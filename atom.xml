<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Horace</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.zhaohaihao.com/"/>
  <updated>2020-04-07T03:29:00.592Z</updated>
  <id>https://www.zhaohaihao.com/</id>
  
  <author>
    <name>Horace</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹-çŠ¶æ€æ¨¡å¼ (State)</title>
    <link href="https://www.zhaohaihao.com/posts/2020030304.html"/>
    <id>https://www.zhaohaihao.com/posts/2020030304.html</id>
    <published>2020-03-03T14:34:57.000Z</published>
    <updated>2020-04-07T03:29:00.592Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/124-State" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>å½“ä¸€ä¸ªå¯¹è±¡çš„å†…åœ¨çŠ¶æ€æ”¹å˜æ—¶å…è®¸æ”¹å˜å…¶è¡Œä¸ºã€‚</p></blockquote><p>çŠ¶æ€æ¨¡å¼ä¸»è¦è§£å†³çš„æ˜¯å½“æ§åˆ¶ä¸€ä¸ªå¯¹è±¡çŠ¶æ€è½¬æ¢çš„æ¡ä»¶è¡¨è¾¾å¼è¿‡äºå¤æ‚çš„æƒ…å†µã€‚å¯ä»¥å°†çŠ¶æ€çš„åˆ¤æ–­é€»è¾‘è½¬ç§»åˆ°è¡¨ç¤ºä¸åŒçŠ¶æ€çš„ä¸€ç³»åˆ—ç±»å½“ä¸­ï¼Œä»è€Œç®€åŒ–å¤æ‚çš„åˆ¤æ–­é€»è¾‘ã€‚</p><h1 id="ä¸‰ä¸ªè§’è‰²"><a href="#ä¸‰ä¸ªè§’è‰²" class="headerlink" title="ä¸‰ä¸ªè§’è‰²"></a>ä¸‰ä¸ªè§’è‰²</h1><p>çŠ¶æ€æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ä¸ªè§’è‰²ï¼š</p><ul><li><strong>ç¯å¢ƒç±»Context</strong>ï¼šä¹Ÿå«åšä¸Šä¸‹æ–‡ï¼Œç»´æŠ¤ä¸€ä¸ªå½“å‰çŠ¶æ€ï¼Œå¹¶å°†ä¸çŠ¶æ€ç›¸å…³çš„æ“ä½œå§”æ‰˜ç»™å½“å‰çŠ¶æ€å¯¹è±¡æ¥å¤„ç†ã€‚</li><li><strong>æŠ½è±¡çŠ¶æ€ç±»State</strong>ï¼šå®šä¹‰ä¸€ä¸ªæ¥å£ç”¨æ¥å°è£…ç¯å¢ƒå¯¹è±¡ä¸­ç‰¹å®šçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºã€‚</li><li><strong>å…·ä½“çŠ¶æ€ç±»Concrete State</strong>ï¼šå®ç°æŠ½è±¡çŠ¶æ€ç±»å¯¹åº”çš„è¡Œä¸ºã€‚</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç¬”è€…è¿™é‡Œä»¥å¼€å…³ç¯ä¸ºä¾‹ï¼Œä¸»è¦æœ‰å¼€ã€å…³ä¸¤ç§çŠ¶æ€ã€‚</p><h2 id="åˆ›å»ºæŠ½è±¡çŠ¶æ€ç±»"><a href="#åˆ›å»ºæŠ½è±¡çŠ¶æ€ç±»" class="headerlink" title="åˆ›å»ºæŠ½è±¡çŠ¶æ€ç±»"></a>åˆ›å»ºæŠ½è±¡çŠ¶æ€ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ç”µç¯çŠ¶æ€ç±»(æŠ½è±¡çŠ¶æ€ç±»)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 22:38</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ElectricLightState</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> ElectricLightContext electricLightContext;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setElectricLightContext</span><span class="params">(ElectricLightContext electricLightContext)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.electricLightContext = electricLightContext;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼€ç¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">turnOn</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å…³ç¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">turnOff</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–çŠ¶æ€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">getState</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå…·ä½“çŠ¶æ€ç±»"><a href="#åˆ›å»ºå…·ä½“çŠ¶æ€ç±»" class="headerlink" title="åˆ›å»ºå…·ä½“çŠ¶æ€ç±»"></a>åˆ›å»ºå…·ä½“çŠ¶æ€ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ‰“å¼€çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 22:42</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TurnOnState</span> <span class="keyword">extends</span> <span class="title">ElectricLightState</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">turnOn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ“ä½œé”™è¯¯, å½“å‰ç”µç¯çŠ¶æ€å·²ç»æ˜¯æ‰“å¼€çŠ¶æ€"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">turnOff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.electricLightContext.setElectricLightState(ElectricLightContext.TURN_OFF_STATE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"æ‰“å¼€çŠ¶æ€"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å…³é—­çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 22:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TurnOffState</span> <span class="keyword">extends</span> <span class="title">ElectricLightState</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">turnOn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.electricLightContext.setElectricLightState(ElectricLightContext.TURN_ON_STATE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">turnOff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ“ä½œé”™è¯¯, å½“å‰ç”µç¯çŠ¶æ€å·²ç»æ˜¯å…³é—­çŠ¶æ€"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"å…³é—­çŠ¶æ€"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºç¯å¢ƒç±»"><a href="#åˆ›å»ºç¯å¢ƒç±»" class="headerlink" title="åˆ›å»ºç¯å¢ƒç±»"></a>åˆ›å»ºç¯å¢ƒç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ç”µç¯ç¯å¢ƒç±»(ç¯å¢ƒç±»)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 22:39</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ElectricLightContext</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ElectricLightState electricLightState;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> TurnOnState TURN_ON_STATE = <span class="keyword">new</span> TurnOnState();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> TurnOffState TURN_OFF_STATE = <span class="keyword">new</span> TurnOffState();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ElectricLightState <span class="title">getElectricLightState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> electricLightState;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setElectricLightState</span><span class="params">(ElectricLightState electricLightState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.electricLightState = electricLightState;</span><br><span class="line">        <span class="comment">// å°†å½“å‰çš„ç¯å¢ƒé€šçŸ¥åˆ°å„ä¸ªçŠ¶æ€å®ç°ç±»</span></span><br><span class="line">        <span class="keyword">this</span>.electricLightState.setElectricLightContext(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">turnOn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.electricLightState.turnOn();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">turnOff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.electricLightState.turnOff();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç»´æŠ¤ä¸€ä¸ªå½“å‰çŠ¶æ€å¯¹è±¡ï¼Œå¹¶å°† <code>turnOff()</code> ã€ <code>turnOn()</code> è¿™äº›ä¸çŠ¶æ€ç›¸å…³çš„æ“ä½œå§”æ‰˜ç»™å½“å‰çš„çŠ¶æ€å¯¹è±¡æ¥è¿›è¡Œå¤„ç†ã€‚</p><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 22:55</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ElectricLightContext electricLightContext = <span class="keyword">new</span> ElectricLightContext();</span><br><span class="line">        electricLightContext.setElectricLightState(<span class="keyword">new</span> TurnOnState());</span><br><span class="line">        System.out.println(String.format(<span class="string">"å½“å‰ç”µç¯çš„çŠ¶æ€: [%s]"</span>, electricLightContext.getElectricLightState().getState()));</span><br><span class="line">        electricLightContext.turnOn();</span><br><span class="line"></span><br><span class="line">        electricLightContext.turnOff();</span><br><span class="line">        System.out.println(String.format(<span class="string">"å½“å‰ç”µç¯çš„çŠ¶æ€: [%s]"</span>, electricLightContext.getElectricLightState().getState()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>å½“å‰ç”µç¯çš„çŠ¶æ€: [æ‰“å¼€çŠ¶æ€]<br>æ“ä½œé”™è¯¯, å½“å‰ç”µç¯çŠ¶æ€å·²ç»æ˜¯æ‰“å¼€çŠ¶æ€<br>å½“å‰ç”µç¯çš„çŠ¶æ€: [å…³é—­çŠ¶æ€]</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/state/state01.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>å½“ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå®ƒçš„çŠ¶æ€ï¼Œå¹¶ä¸”å®ƒå¿…é¡»åœ¨è¿è¡Œæ—¶åˆ»æ ¹æ®çŠ¶æ€æ”¹å˜å®ƒçš„è¡Œä¸ºæ—¶ã€‚</li><li>ä¸šåŠ¡åœºæ™¯ä¸­æœ‰å¤šä¸ªçŠ¶æ€ï¼Œä¸”è¿™äº›çŠ¶æ€çš„å˜åŒ–éƒ½éœ€è¦ä¾é å¤§é‡çš„å¤šåˆ†æ”¯åˆ¤æ–­è¯­å¥æ¥å®ç°ã€‚</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>å°†ä¸ç‰¹å®šçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºå±€éƒ¨åŒ–ï¼Œå¹¶ä¸”å°†ä¸åŒçŠ¶æ€çš„è¡Œä¸ºåˆ†å‰²å¼€æ¥ã€‚</li><li>æ˜“æ‰©å±•ã€‚é€šè¿‡å®šä¹‰æ–°çš„å­ç±»å¯ä»¥å¾ˆå®¹æ˜“å¢åŠ æ–°çš„çŠ¶æ€å’Œè½¬æ¢ã€‚</li><li>é€šè¿‡æŠŠå„ç§çŠ¶æ€è½¬ç§»é€»è¾‘åˆ†å¸ƒåˆ°Stateçš„å­ç±»ä¹‹é—´ï¼Œæ¥å‡å°‘ç›¸äº’é—´çš„ä¾èµ–ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><p>åœ¨çŠ¶æ€å¤šçš„ä¸šåŠ¡åœºæ™¯å½“ä¸­ä½¿ç”¨ï¼Œä¼šå¯¼è‡´ç±»æ•°ç›®çš„å¢åŠ ï¼Œä½¿ç³»ç»Ÿå˜å¾—å¤æ‚ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://www.runoob.com/design-pattern/state-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-çŠ¶æ€æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹-è®¿é—®è€…æ¨¡å¼ (Visitor)</title>
    <link href="https://www.zhaohaihao.com/posts/2020030303.html"/>
    <id>https://www.zhaohaihao.com/posts/2020030303.html</id>
    <published>2020-03-03T07:48:05.000Z</published>
    <updated>2020-04-07T03:29:42.132Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/123-Visitor" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>å°è£…ä¸€äº›æ–½åŠ äºæŸç§æ•°æ®ç»“æ„å…ƒç´ ä¹‹ä¸Šçš„æ“ä½œã€‚ä¸€æ—¦è¿™äº›æ“ä½œéœ€è¦ä¿®æ”¹ï¼Œæ¥å—è¿™ä¸ªæ“ä½œçš„æ•°æ®ç»“æ„å¯ä»¥ä¿æŒä¸å˜ã€‚</p></blockquote><p>è®¿é—®è€…æ¨¡å¼é€‚ç”¨äºæ•°æ®ç»“æ„ç›¸å¯¹ç¨³å®šçš„ç³»ç»Ÿï¼Œå®ƒæŠŠæ•°æ®ç»“æ„å’Œä½œç”¨äºæ•°æ®ç»“æ„ä¸Šçš„æ“ä½œä¹‹é—´çš„è€¦åˆè§£è„±å¼€ï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ä»¥ç›¸å¯¹è‡ªç”±çš„æ¼”åŒ–ã€‚</p><p>è®¿é—®è€…æ¨¡å¼çš„æ ¸å¿ƒå°±æ˜¯æ ¹æ®ä¸åŒçš„è®¿é—®è€…å¯¹ç›¸åŒçš„æ•°æ®äº§ç”Ÿä¸åŒçš„æ“ä½œè¡Œä¸ºã€‚</p><h1 id="äº”ä¸ªè§’è‰²"><a href="#äº”ä¸ªè§’è‰²" class="headerlink" title="äº”ä¸ªè§’è‰²"></a>äº”ä¸ªè§’è‰²</h1><p>è®¿é—®è€…æ¨¡å¼ä¸»è¦åŒ…å«ä»¥ä¸‹äº”ä¸ªè§’è‰²ï¼š</p><ul><li><strong>æŠ½è±¡è®¿é—®è€…ç±»Visitor</strong>ï¼šä¸ºå¯¹è±¡ç»“æ„ä¸­çš„æ¯ä¸€ä¸ªå…·ä½“å…ƒç´ ç±»æä¾›ä¸€ä¸ªè®¿é—®æ“ä½œã€‚</li><li><strong>å…·ä½“è®¿é—®è€…ç±»Concrete Visitor</strong>ï¼šå®ç°æŠ½è±¡è®¿é—®è€…ä¸­å£°æ˜çš„å„ä¸ªæ–¹æ³•ã€‚</li><li><strong>æŠ½è±¡å…ƒç´ ç±»Element</strong>ï¼šå®šä¹‰ä¸€ä¸ªæ¥å—æ“ä½œï¼Œä»¥è¢«æ¥å—çš„è®¿é—®è€…å¯¹è±¡ä½œä¸ºå…¶å‚æ•°ã€‚</li><li><strong>å…·ä½“å…ƒç´ ç±»Concrete Element</strong>ï¼šå®ç°æŠ½è±¡å…ƒç´ ç±»çš„æ¥å—æ“ä½œã€‚</li><li><strong>å¯¹è±¡ç»“æ„ç±»Object Structure</strong>ï¼šæ˜¯ä¸€ä¸ªåŒ…å«å…ƒç´ è§’è‰²çš„å®¹å™¨ï¼Œèƒ½å¤Ÿéå†å…¶å†…éƒ¨çš„å…ƒç´ ï¼ŒåŒæ—¶æä¾›ä¸€ä¸ªé«˜å±‚çš„æ¥å£ä»¥å…è®¸è®¿é—®è€…è®¿é—®å®ƒçš„å…ƒç´ ã€‚</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç¬”è€…è¿™é‡Œä»¥ç”¨æˆ·è®¿é—®<a href="https://blog.csdn.net/Dh_Chao" target="_blank" rel="noopener">ç¬”è€…CSDNåšå®¢</a>ä¸ºä¾‹ã€‚</p><p>ç¬”è€…è¿™é‡Œå°†ç”¨æˆ·åˆ†ä¸ºåŒ¿åç”¨æˆ·(éæ³¨å†Œç”¨æˆ·)å’ŒCSDNç”¨æˆ·(æ³¨å†Œç”¨æˆ·)ä¸¤ç§ï¼Œå³ä¸åŒçš„è®¿é—®è€…ã€‚</p><p>åšå®¢åœ¨è¿™é‡Œå¯ä»¥å½“åšå¯¹è±¡ç»“æ„ï¼Œè€Œæ¯ç¯‡åšæ–‡å¯ä»¥æ˜¯ä¸€ä¸ªå…·ä½“çš„å…ƒç´ ã€‚</p><h2 id="åˆ›å»ºæŠ½è±¡è®¿é—®è€…ç±»"><a href="#åˆ›å»ºæŠ½è±¡è®¿é—®è€…ç±»" class="headerlink" title="åˆ›å»ºæŠ½è±¡è®¿é—®è€…ç±»"></a>åˆ›å»ºæŠ½è±¡è®¿é—®è€…ç±»</h2><p>æŒ‰ç…§è¦æ±‚ä¸ºå¯¹è±¡ç»“æ„ä¸­çš„æ¯ä¸€ä¸ªå…·ä½“çš„å…ƒç´ ç±»æä¾›ä¸€ä¸ªè®¿é—®æ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æŠ½è±¡è®¿é—®è€…</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 17:07</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Visitor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¿é—®æ–‡ç« å†…å®¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> articleContent æ–‡ç« å†…å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">visit</span><span class="params">(ArticleContent articleContent)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¿é—®èµ„æºå†…å®¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resourceContent èµ„æºå†…å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">visit</span><span class="params">(ResourceContent resourceContent)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå…·ä½“è®¿é—®è€…ç±»"><a href="#åˆ›å»ºå…·ä½“è®¿é—®è€…ç±»" class="headerlink" title="åˆ›å»ºå…·ä½“è®¿é—®è€…ç±»"></a>åˆ›å»ºå…·ä½“è®¿é—®è€…ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ³¨å†Œç”¨æˆ·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 17:14</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegisteredUserVisitor</span> <span class="keyword">implements</span> <span class="title">Visitor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(ArticleContent articleContent)</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"CSDNç”¨æˆ·è®¿é—®åšå®¢æ–‡ç« [%s]"</span>, articleContent.getName()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(ResourceContent resourceContent)</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"CSDNç”¨æˆ·ä¸‹è½½åšå®¢èµ„æº[%s]"</span>, resourceContent.getName()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> éæ³¨å†Œç”¨æˆ·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 17:06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GuestUserVisitor</span> <span class="keyword">implements</span> <span class="title">Visitor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(ArticleContent articleContent)</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"åŒ¿åç”¨æˆ·è®¿é—®åšå®¢æ–‡ç« [%s]"</span>, articleContent.getName()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(ResourceContent resourceContent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (resourceContent.isNeedLogin()) &#123;</span><br><span class="line">            System.out.println(<span class="string">"åŒ¿åç”¨æˆ·æ— æ³•è®¿é—®å½“å‰èµ„æº, è¯·ç™»å½•!"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(String.format(<span class="string">"åŒ¿åç”¨æˆ·ä¸‹è½½åšå®¢èµ„æº[%s]"</span>, resourceContent.getName()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæŠ½è±¡å…ƒç´ ç±»"><a href="#åˆ›å»ºæŠ½è±¡å…ƒç´ ç±»" class="headerlink" title="åˆ›å»ºæŠ½è±¡å…ƒç´ ç±»"></a>åˆ›å»ºæŠ½è±¡å…ƒç´ ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å†…å®¹ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 17:08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Content</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Content</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¥å—æ“ä½œ, æ ¸å¿ƒæ–¹æ³•, æ¥å—è®¿é—®è€…è®¿é—®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> visitor è®¿é—®è€…</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Visitior visitor)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå…·ä½“å…ƒç´ ç±»"><a href="#åˆ›å»ºå…·ä½“å…ƒç´ ç±»" class="headerlink" title="åˆ›å»ºå…·ä½“å…ƒç´ ç±»"></a>åˆ›å»ºå…·ä½“å…ƒç´ ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ–‡ç« å†…å®¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 17:11</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArticleContent</span> <span class="keyword">extends</span> <span class="title">Content</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ArticleContent</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Visitor visitor)</span> </span>&#123;</span><br><span class="line">        visitor.visit(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> èµ„æºå†…å®¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 17:15</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResourceContent</span> <span class="keyword">extends</span> <span class="title">Content</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦éœ€è¦ç™»å½•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> needLogin;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ResourceContent</span><span class="params">(String name, <span class="keyword">boolean</span> needLogin)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">        <span class="keyword">this</span>.needLogin = needLogin;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isNeedLogin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> needLogin;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Visitor visitor)</span> </span>&#123;</span><br><span class="line">        visitor.visit(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå¯¹è±¡ç»“æ„ç±»"><a href="#åˆ›å»ºå¯¹è±¡ç»“æ„ç±»" class="headerlink" title="åˆ›å»ºå¯¹è±¡ç»“æ„ç±»"></a>åˆ›å»ºå¯¹è±¡ç»“æ„ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> åšå®¢ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 17:34</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Blog</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Content&gt; contentList = <span class="keyword">new</span> ArrayList&lt;Content&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ å†…å®¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> content å†…å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addContent</span><span class="params">(Content content)</span> </span>&#123;</span><br><span class="line">        contentList.add(content);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤å†…å®¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> content å†…å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeContent</span><span class="params">(Content content)</span> </span>&#123;</span><br><span class="line">        contentList.remove(content);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¥å—è®¿é—®è€…è®¿é—®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> visitor è®¿é—®è€…</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Visitor visitor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Content content : contentList) &#123;</span><br><span class="line">            content.accept(visitor);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 17:34</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºå¯¹è±¡ç»“æ„</span></span><br><span class="line">        Blog blog = <span class="keyword">new</span> Blog();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºå…·ä½“å…ƒç´ </span></span><br><span class="line">        Content articleContent = <span class="keyword">new</span> ArticleContent(<span class="string">"Javaè®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹-è®¿é—®è€…æ¨¡å¼ (Visitor)"</span>);</span><br><span class="line">        Content resourceContent = <span class="keyword">new</span> ResourceContent(<span class="string">"ä»£ç ç”Ÿæˆå™¨å·¥å…·.zip"</span>, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        blog.addContent(articleContent);</span><br><span class="line">        blog.addContent(resourceContent);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸åŒè®¿é—®å¯¹è±¡</span></span><br><span class="line">        Visitor registeredUserVisitor = <span class="keyword">new</span> RegisteredUserVisitor();</span><br><span class="line">        Visitor guestUserVisitor = <span class="keyword">new</span> GuestUserVisitor();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸åŒå¯¹è±¡åˆ†åˆ«è®¿é—®æ•°æ®</span></span><br><span class="line">        blog.accept(registeredUserVisitor);</span><br><span class="line">        blog.accept(guestUserVisitor);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>CSDNç”¨æˆ·è®¿é—®åšå®¢æ–‡ç« [Javaè®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹-è®¿é—®è€…æ¨¡å¼ (Visitor)]<br>CSDNç”¨æˆ·ä¸‹è½½åšå®¢èµ„æº[ä»£ç ç”Ÿæˆå™¨å·¥å…·.zip]<br>åŒ¿åç”¨æˆ·è®¿é—®åšå®¢æ–‡ç« [Javaè®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹-è®¿é—®è€…æ¨¡å¼ (Visitor)]<br>åŒ¿åç”¨æˆ·æ— æ³•è®¿é—®å½“å‰èµ„æº, è¯·ç™»å½•!</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/visitor/visitor01.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><p>å¯¹è±¡çš„æ•°æ®ç»“æ„ç›¸å¯¹ç¨³å®šï¼Œä½†æ˜¯å…¶æ“ä½œç®—æ³•ç»å¸¸å‘ç”Ÿå˜åŒ–çš„ç¨‹åºã€‚</p><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><p>è‰¯å¥½çš„æ‰©å±•æ€§ã€‚èƒ½å¤Ÿåœ¨ä¸ä¿®æ”¹å¯¹è±¡ç»“æ„ä¸­çš„å…ƒç´ æƒ…å†µä¸‹ï¼Œä¸ºå¯¹è±¡ç»“æ„ä¸­çš„å…ƒç´ æ·»åŠ æ–°åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯å¢åŠ æ–°çš„è®¿é—®è€…ç±»ã€‚</p><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>å¢åŠ æ–°çš„æ•°æ®ç»“æ„è¾ƒä¸ºå›°éš¾ï¼Œå…·ä½“çš„å…ƒç´ çš„å˜æ›´ä¹Ÿè¾ƒä¸ºéº»çƒ¦ã€‚</li><li>ç ´åäº†å°è£…æ€§ã€‚è®¿é—®è€…æ¨¡å¼ä¸­çš„å…·ä½“å…ƒç´ ä¼šæš´éœ²ç»™è®¿é—®è€…ã€‚</li></ul><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-è®¿é—®è€…æ¨¡å¼</a></li><li><a href="https://www.runoob.com/design-pattern/visitor-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-è®¿é—®è€…æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹-è´£ä»»é“¾æ¨¡å¼ (Chain of Responsibility)</title>
    <link href="https://www.zhaohaihao.com/posts/2020030302.html"/>
    <id>https://www.zhaohaihao.com/posts/2020030302.html</id>
    <published>2020-03-03T01:55:35.000Z</published>
    <updated>2020-04-07T03:29:21.225Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/122-Chain-of-Responsibility" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå»å¤„ç†è¯·æ±‚ã€‚ä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™ä¸ªå¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚</p></blockquote><p>è´£ä»»é“¾æ¨¡å¼ä¹Ÿå«åš<strong>èŒè´£é“¾æ¨¡å¼</strong>ã€‚</p><h1 id="ä¸‰ä¸ªè§’è‰²"><a href="#ä¸‰ä¸ªè§’è‰²" class="headerlink" title="ä¸‰ä¸ªè§’è‰²"></a>ä¸‰ä¸ªè§’è‰²</h1><p>è´£ä»»é“¾æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ä¸ªè§’è‰²ï¼š</p><ul><li><strong>æŠ½è±¡å¤„ç†è€…Handler</strong>ï¼šå®šä¹‰ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ¥å£ï¼Œå†…éƒ¨åŒ…å«ä¸€ä¸ªåç»§å¤„ç†è€…çš„å¼•ç”¨ã€‚</li><li><strong>å…·ä½“å¤„ç†è€…Concrete Handler</strong>ï¼šå®ç°æŠ½è±¡å¤„ç†è€…ã€‚å¦‚æœèƒ½å¤Ÿå¤„ç†è¯·æ±‚åˆ™å¤„ç†ï¼Œå¦åˆ™å°±å°†è¯¥è¯·æ±‚è½¬å‘ç»™å®ƒçš„åç»§å¤„ç†è€…ã€‚</li><li><strong>å®¢æˆ·ç«¯ç±»Client</strong>ï¼šåˆ›å»ºå¤„ç†é“¾ï¼ŒåŒæ—¶å‘é“¾å¤´çš„å…·ä½“å¤„ç†è€…å¯¹è±¡æäº¤è¯·æ±‚ï¼Œå®ƒå¹¶ä¸å…³å¿ƒå¤„ç†ç»†èŠ‚å’Œè¯·æ±‚çš„ä¼ é€’è¿‡ç¨‹ã€‚</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç°åœ¨å¤šæ•°å…¬å¸è¯·å‡éƒ½é€šè¿‡é’‰é’‰æ¥èµ°å®¡æ‰¹æµç¨‹ï¼Œä¸åŒçš„å…¬å¸å®¡æ‰¹çš„è§„åˆ™ä¹Ÿä¸åŒã€‚</p><p>ç¬”è€…è¿™é‡Œä»¥è¯·äº‹å‡ä¸ºä¾‹ï¼Œä»¥åŠä»¥ä¸‹å®¡æ‰¹äº‹å‡è§„åˆ™æ¥ç®€å•è®²è§£è´£ä»»é“¾æ¨¡å¼ã€‚</p><table><thead><tr><th align="center"><strong>äº‹å‡å¤©æ•°(æœ€å°å•ä½:å¤©)</strong></th><th align="center"><strong>å®¡æ‰¹äºº</strong></th></tr></thead><tbody><tr><td align="center">1å¤©</td><td align="center">ç»„é•¿-&gt;äººäº‹ç»ç†</td></tr><tr><td align="center">1å¤©-7å¤©(åŒ…å«7å¤©)</td><td align="center">ç»„é•¿-&gt;æ€»ç›‘-&gt;äººäº‹ç»ç†</td></tr><tr><td align="center">7å¤©ä»¥ä¸Š</td><td align="center">ç»„é•¿-&gt;æ€»ç›‘-&gt;è€æ¿-&gt;äººäº‹ç»ç†</td></tr></tbody></table><h2 id="åˆ›å»ºè¯·æ±‚å®ä½“ç±»"><a href="#åˆ›å»ºè¯·æ±‚å®ä½“ç±»" class="headerlink" title="åˆ›å»ºè¯·æ±‚å®ä½“ç±»"></a>åˆ›å»ºè¯·æ±‚å®ä½“ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> äº‹å‡è¯·æ±‚å®ä½“ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 14:50</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonalLeaveRequest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”³è¯·äºº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String applicant;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤©æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer days;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼€å§‹æ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String startTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç†ç”±</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String reason;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¤å¤„å¿½ç•¥getterã€setteræ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤©æ•°å¸¸é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Days</span> </span>&#123;</span><br><span class="line">        Integer ONE = <span class="number">1</span>;</span><br><span class="line">        Integer SEVEN = <span class="number">7</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæŠ½è±¡å¤„ç†è€…"><a href="#åˆ›å»ºæŠ½è±¡å¤„ç†è€…" class="headerlink" title="åˆ›å»ºæŠ½è±¡å¤„ç†è€…"></a>åˆ›å»ºæŠ½è±¡å¤„ç†è€…</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å®¡æ‰¹äºº</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 14:58</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Approver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åç»§å®¡æ‰¹äºº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> Approver approver;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®åç»§å®¡æ‰¹äºº</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> approver åç»§å®¡æ‰¹äºº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNextApprpver</span><span class="params">(Approver approver)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.approver = approver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®¡æ‰¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request äº‹å‡è¯·æ±‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">approve</span><span class="params">(PersonalLeaveRequest request)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå…·ä½“å¤„ç†è€…"><a href="#åˆ›å»ºå…·ä½“å¤„ç†è€…" class="headerlink" title="åˆ›å»ºå…·ä½“å¤„ç†è€…"></a>åˆ›å»ºå…·ä½“å¤„ç†è€…</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> è€æ¿</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 15:11</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BossApprover</span> <span class="keyword">extends</span> <span class="title">Approver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">approve</span><span class="params">(PersonalLeaveRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotEmpty(request.getReason())) &#123;</span><br><span class="line">            System.out.println(<span class="string">"è€æ¿å®¡æ ¸ç»“æœ: æ‰¹å‡†"</span>);</span><br><span class="line">            <span class="keyword">if</span> (approver != <span class="keyword">null</span>) &#123;</span><br><span class="line">                approver.approve(request);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"è€æ¿å®¡æ ¸ç»“æœ: ä¸æ‰¹å‡†"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ€»ç›‘</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 15:11</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InspectorGeneralApprover</span> <span class="keyword">extends</span> <span class="title">Approver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">approve</span><span class="params">(PersonalLeaveRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotEmpty(request.getReason())) &#123;</span><br><span class="line">            System.out.println(<span class="string">"æ€»ç›‘å®¡æ ¸ç»“æœ: æ‰¹å‡†"</span>);</span><br><span class="line">            <span class="keyword">if</span> (approver != <span class="keyword">null</span>) &#123;</span><br><span class="line">                approver.approve(request);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"æ€»ç›‘å®¡æ ¸ç»“æœ: ä¸æ‰¹å‡†"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ç»„é•¿</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 15:07</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GroupLeaderApprover</span> <span class="keyword">extends</span> <span class="title">Approver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">approve</span><span class="params">(PersonalLeaveRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotEmpty(request.getReason())) &#123;</span><br><span class="line">            System.out.println(<span class="string">"ç»„é•¿å®¡æ ¸ç»“æœ: æ‰¹å‡†"</span>);</span><br><span class="line">            <span class="keyword">if</span> (approver != <span class="keyword">null</span>) &#123;</span><br><span class="line">                approver.approve(request);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"ç»„é•¿å®¡æ ¸ç»“æœ: ä¸æ‰¹å‡†"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> äººäº‹ç»ç†</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 15:07</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonnelManagerApprover</span> <span class="keyword">extends</span> <span class="title">Approver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">approve</span><span class="params">(PersonalLeaveRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotEmpty(request.getReason())) &#123;</span><br><span class="line">            System.out.println(<span class="string">"äººäº‹ç»ç†å®¡æ ¸ç»“æœ: æ‰¹å‡†"</span>);</span><br><span class="line">            <span class="keyword">if</span> (approver != <span class="keyword">null</span>) &#123;</span><br><span class="line">                approver.approve(request);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"äººäº‹ç»ç†å®¡æ ¸ç»“æœ: ä¸æ‰¹å‡†"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œåœ¨æ¯ä¸ªå…·ä½“çš„å¤„ç†ç±»å½“ä¸­ <code>if (approver != null) {}</code> è¿™ä¸ªåˆ¤æ–­æ˜¯å¦å­˜åœ¨åç»§å¤„ç†è€…å¼•ç”¨çš„åˆ†æ”¯æ˜¯å¿…é¡»å­˜åœ¨çš„ã€‚</p><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><p>è¿™é‡Œçš„æµ‹è¯•ç±»ä¹Ÿå¯ä»¥ä½œä¸ºæˆ‘ä»¬çš„å®¢æˆ·ç«¯ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 15:23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        PersonalLeaveRequest request = <span class="keyword">new</span> PersonalLeaveRequest();</span><br><span class="line">        request.setApplicant(<span class="string">"æµ·è±ª"</span>);</span><br><span class="line">        request.setDays(<span class="number">6</span>);</span><br><span class="line">        request.setStartTime(<span class="string">"2020å¹´03æœˆ03æ—¥15:24:37"</span>);</span><br><span class="line">        request.setReason(<span class="string">"å®¶ä¸­æœ‰äº‹"</span>);</span><br><span class="line"></span><br><span class="line">        Approver groupLeaderApprover = <span class="keyword">new</span> GroupLeaderApprover();</span><br><span class="line">        Approver personnelManagerApprover = <span class="keyword">new</span> PersonnelManagerApprover();</span><br><span class="line">        Approver inspectorGeneralApprover = <span class="keyword">new</span> InspectorGeneralApprover();</span><br><span class="line">        Approver bossApprover = <span class="keyword">new</span> BossApprover();</span><br><span class="line"></span><br><span class="line">        Integer days = request.getDays();</span><br><span class="line">        <span class="comment">// å®¡æ‰¹äº‹å‡è§„åˆ™</span></span><br><span class="line">        <span class="keyword">if</span> (PersonalLeaveRequest.Days.ONE.equals(days)) &#123;</span><br><span class="line">            <span class="comment">// äº‹å‡å¤©æ•°1å¤©</span></span><br><span class="line">            groupLeaderApprover.setNextApprpver(personnelManagerApprover);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (days &gt; PersonalLeaveRequest.Days.ONE &amp;&amp; days &lt;= PersonalLeaveRequest.Days.SEVEN) &#123;</span><br><span class="line">            <span class="comment">// äº‹å‡å¤©æ•°1å¤©-7å¤©(åŒ…å«7å¤©)</span></span><br><span class="line">            groupLeaderApprover.setNextApprpver(inspectorGeneralApprover);</span><br><span class="line">            inspectorGeneralApprover.setNextApprpver(personnelManagerApprover);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (days &gt; PersonalLeaveRequest.Days.SEVEN) &#123;</span><br><span class="line">            <span class="comment">// äº‹å‡å¤©æ•°7å¤©ä»¥ä¸Š</span></span><br><span class="line">            groupLeaderApprover.setNextApprpver(inspectorGeneralApprover);</span><br><span class="line">            groupLeaderApprover.setNextApprpver(bossApprover);</span><br><span class="line">            bossApprover.setNextApprpver(personnelManagerApprover);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"è¯·å‡å¤©æ•°å¼‚å¸¸"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"&gt;&gt;&gt;&gt;"</span>);</span><br><span class="line">        System.out.println(</span><br><span class="line">                String.format(<span class="string">"[%s]å‘èµ·è¯·å‡ç”³è¯·, è¯·å‡å¤©æ•°[%s]å¤©, è¯·å‡å¼€å§‹æ—¶é—´[%s], è¯·å‡ç†ç”±[%s]"</span>, request.getApplicant(), request.getDays(),</span><br><span class="line">                        request.getStartTime(), request.getReason()));</span><br><span class="line">        System.out.println(<span class="string">"&lt;&lt;&lt;&lt;"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"å®¡æ ¸ç»“æœå¦‚ä¸‹:"</span>);</span><br><span class="line">        groupLeaderApprover.approve(request);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>&gt;&gt;&gt;&gt;<br>[æµ·è±ª]å‘èµ·è¯·å‡ç”³è¯·, è¯·å‡å¤©æ•°[6]å¤©, è¯·å‡å¼€å§‹æ—¶é—´[2020å¹´03æœˆ03æ—¥15:24:37], è¯·å‡ç†ç”±[å®¶ä¸­æœ‰äº‹]<br>&lt;&lt;&lt;&lt;<br>å®¡æ ¸ç»“æœå¦‚ä¸‹:<br>ç»„é•¿å®¡æ ¸ç»“æœ: æ‰¹å‡†<br>æ€»ç›‘å®¡æ ¸ç»“æœ: æ‰¹å‡†<br>äººäº‹ç»ç†å®¡æ ¸ç»“æœ: æ‰¹å‡†</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/chain-of-responsibility/chain-of-responsibility01.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><p>ä¸€ä¸ªè¯·æ±‚çš„å¤„ç†éœ€è¦å¤šä¸ªå¯¹è±¡å½“ä¸­çš„ä¸€ä¸ªæˆ–è€…å‡ ä¸ªåä½œå¤„ç†ã€‚</p><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>é™ä½å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ã€‚å¯¹è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è¿›è¡Œè§£è€¦ã€‚</li><li>è´£ä»»é“¾å¯ä»¥åŠ¨æ€ç»„åˆã€‚å½“å·¥ä½œæµç¨‹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥åŠ¨æ€åœ°æ”¹å˜é“¾å†…çš„æˆå‘˜æˆ–è€…è°ƒåŠ¨å®ƒä»¬çš„æ¬¡åºï¼Œä¹Ÿå¯åŠ¨æ€åœ°æ–°å¢æˆ–è€…åˆ é™¤è´£ä»»ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>è´£ä»»é“¾è¾ƒé•¿æ—¶ï¼Œè¯·æ±‚çš„å¤„ç†å¯èƒ½ä¼šæ¶‰åŠå¤šä¸ªå¯¹è±¡ï¼Œä»è€Œå½±å“ç³»ç»Ÿçš„æ€§èƒ½ã€‚</li></ul><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-è´£ä»»é“¾æ¨¡å¼</a></li><li><a href="https://www.runoob.com/design-pattern/chain-of-responsibility-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-è´£ä»»é“¾æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹-ä¸­ä»‹è€…æ¨¡å¼ (Mediator)</title>
    <link href="https://www.zhaohaihao.com/posts/2020030301.html"/>
    <id>https://www.zhaohaihao.com/posts/2020030301.html</id>
    <published>2020-03-02T17:23:21.000Z</published>
    <updated>2020-04-07T03:29:16.755Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/121-Mediator" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚ä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚</p></blockquote><h1 id="å››ä¸ªè§’è‰²"><a href="#å››ä¸ªè§’è‰²" class="headerlink" title="å››ä¸ªè§’è‰²"></a>å››ä¸ªè§’è‰²</h1><p>ä¸­ä»‹è€…æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹å››ä¸ªè§’è‰²ï¼š</p><ul><li><strong>æŠ½è±¡ä¸­ä»‹è€…Mediator</strong>ï¼šæä¾›äº†æ³¨å†ŒåŒäº‹å¯¹è±¡ä¸è½¬å‘åŒäº‹å¯¹è±¡ä¿¡æ¯çš„æŠ½è±¡æ–¹æ³•ã€‚</li><li><strong>å…·ä½“ä¸­ä»‹è€…Concrete Mediator</strong>ï¼šç®¡ç†åŒäº‹å¯¹è±¡ç±»ï¼Œåè°ƒæ‰€æœ‰åŒäº‹å¯¹è±¡ä¹‹é—´çš„äº¤äº’å…³ç³»ã€‚</li><li><strong>æŠ½è±¡åŒäº‹ç±»Colleague</strong>ï¼šæä¾›åŒäº‹å¯¹è±¡ä¹‹é—´äº¤äº’çš„æŠ½è±¡æ–¹æ³•ã€‚</li><li><strong>å…·ä½“åŒäº‹ç±»Concrete Colleague</strong>ï¼šæŠ½è±¡åŒäº‹ç±»çš„å®ç°è€…ï¼Œä¸å…¶ä½™åŒäº‹å¯¹è±¡äº¤äº’æ—¶ï¼Œäº¤ç”±ä¸­ä»‹è€…å¯¹è±¡å¤„ç†ã€‚</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ä¸­ä»‹è€…æ¨¡å¼åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­è¿˜æ˜¯æ¯”è¾ƒå¸¸è§çš„ã€‚</p><p>å¾®ä¿¡ç¾¤èŠå°±æ˜¯ä¸€ä¸ªå¾ˆå…¸å‹çš„ä¾‹å­ã€‚å…¬å¸å‘˜å·¥ä¹‹é—´æœ‰ä»€ä¹ˆäº‹éƒ½å¯ä»¥é€šè¿‡å¾®ä¿¡ç¾¤è¿™ä¸ªä¸­ä»‹è€…è¿›è¡Œå¤šäººçš„æ²Ÿé€šï¼Œè€Œä¸éœ€è¦æ¯æ¬¡éƒ½å•ç‹¬ä¸€å¯¹ä¸€çš„æ‰¾å‘˜å·¥æ²Ÿé€šã€‚</p><p>æ‰“ä¸ªæ¯”æ–¹ï¼Œæœ€è¿‘æ–°å† è‚†è™ï¼Œå¾ˆå¤šå…¬å¸éƒ½å»¶è¿Ÿå¤å·¥äº†ï¼Œå…¬å¸äººäº‹ç»ç†éœ€è¦ç»™æ‰€æœ‰å‘˜å·¥å‘å»¶è¿Ÿå¤å·¥é€šçŸ¥ã€‚å‡è®¾å¿½ç•¥å¾®ä¿¡ç¾¤å‘åŠ©æ‰‹åŠŸèƒ½ï¼Œé‚£å…¬å¸äººäº‹ç»ç†éœ€è¦ä¸€å¯¹ä¸€çš„å‘ŠçŸ¥å‘˜å·¥å»¶è¿Ÿå¤å·¥ï¼Œé‚£æ˜¯ä¸æ˜¯è¦å¿™æ­»äº†ï¼Ÿ</p><p>ç°åœ¨æˆ‘ä»¬é€šè¿‡å¾®ä¿¡ç¾¤å‘ŠçŸ¥æ¥è¿›è¡Œç®€å•çš„å®ç°ã€‚</p><h2 id="åˆ›å»ºæŠ½è±¡ä¸­ä»‹è€…"><a href="#åˆ›å»ºæŠ½è±¡ä¸­ä»‹è€…" class="headerlink" title="åˆ›å»ºæŠ½è±¡ä¸­ä»‹è€…"></a>åˆ›å»ºæŠ½è±¡ä¸­ä»‹è€…</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å·¥ä½œç¾¤ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 12:12</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">WorkGroup</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ å‘˜å·¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> staff å‘˜å·¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addStaff</span><span class="params">(IStaff staff)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘é€æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> staff å‘é€æ¶ˆæ¯çš„å‘˜å·¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">(IStaff staff, String message)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå…·ä½“ä¸­ä»‹è€…"><a href="#åˆ›å»ºå…·ä½“ä¸­ä»‹è€…" class="headerlink" title="åˆ›å»ºå…·ä½“ä¸­ä»‹è€…"></a>åˆ›å»ºå…·ä½“ä¸­ä»‹è€…</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å¾®ä¿¡å·¥ä½œç¾¤</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 12:29</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeChatWorkGroup</span> <span class="keyword">implements</span> <span class="title">WorkGroup</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;IStaff&gt; staffList = <span class="keyword">new</span> ArrayList&lt;IStaff&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addStaff</span><span class="params">(IStaff staff)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (staff != <span class="keyword">null</span> &amp;&amp; !staffList.contains(staff)) &#123;</span><br><span class="line">            staffList.add(staff);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">(IStaff staff, String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (IStaff iStaff : staffList) &#123;</span><br><span class="line">            <span class="comment">// æ’é™¤è‡ªèº«, ç»™åˆ«çš„å‘˜å·¥å‘æ¶ˆæ¯</span></span><br><span class="line">            <span class="keyword">if</span> (!staff.equals(iStaff)) &#123;</span><br><span class="line">                iStaff.receiveMessage(message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæŠ½è±¡åŒäº‹ç±»"><a href="#åˆ›å»ºæŠ½è±¡åŒäº‹ç±»" class="headerlink" title="åˆ›å»ºæŠ½è±¡åŒäº‹ç±»"></a>åˆ›å»ºæŠ½è±¡åŒäº‹ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å‘˜å·¥ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 12:26</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">IStaff</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> WorkGroup workGroup;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å§“å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">IStaff</span><span class="params">(WorkGroup workGroup, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.workGroup = workGroup;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">receiveMessage</span><span class="params">(String message)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘é€æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">(String message)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå…·ä½“åŒäº‹ç±»"><a href="#åˆ›å»ºå…·ä½“åŒäº‹ç±»" class="headerlink" title="åˆ›å»ºå…·ä½“åŒäº‹ç±»"></a>åˆ›å»ºå…·ä½“åŒäº‹ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> è€æ¿</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 12:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Boss</span> <span class="keyword">extends</span> <span class="title">IStaff</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Boss</span><span class="params">(WorkGroup workGroup)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(workGroup, <span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">// æ³¨å†Œè‡³ä¸­ä»‹è€…å¯¹è±¡å½“ä¸­</span></span><br><span class="line">        workGroup.addStaff(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receiveMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"è€æ¿æ¥æ”¶åˆ°æ¶ˆæ¯: %s"</span>, message));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"è€æ¿å‘é€æ¶ˆæ¯: %s"</span>, message));</span><br><span class="line">        workGroup.sendMessage(<span class="keyword">this</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> äººäº‹ç»ç†</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 12:49</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonnelManager</span> <span class="keyword">extends</span> <span class="title">IStaff</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PersonnelManager</span><span class="params">(WorkGroup workGroup)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(workGroup, <span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">// æ³¨å†Œè‡³ä¸­ä»‹è€…å¯¹è±¡å½“ä¸­</span></span><br><span class="line">        workGroup.addStaff(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receiveMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"äººäº‹ç»ç†æ¥æ”¶åˆ°æ¶ˆæ¯: %s"</span>, message));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"äººäº‹ç»ç†å‘é€æ¶ˆæ¯: %s"</span>, message));</span><br><span class="line">        workGroup.sendMessage(<span class="keyword">this</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ™®é€šå‘˜å·¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 12:48</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Staff</span> <span class="keyword">extends</span> <span class="title">IStaff</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Staff</span><span class="params">(WorkGroup workGroup, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(workGroup, name);</span><br><span class="line">        <span class="comment">// æ³¨å†Œè‡³ä¸­ä»‹è€…å¯¹è±¡å½“ä¸­</span></span><br><span class="line">        workGroup.addStaff(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receiveMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"å‘˜å·¥[%s]æ¥æ”¶åˆ°æ¶ˆæ¯: %s"</span>, <span class="keyword">this</span>.name, message));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"å‘˜å·¥[%s]å‘é€æ¶ˆæ¯: %s"</span>, <span class="keyword">this</span>.name, message));</span><br><span class="line">        workGroup.sendMessage(<span class="keyword">this</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-03 12:53</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸­ä»‹è€…å¯¹è±¡</span></span><br><span class="line">        WorkGroup weChatWorkGroup = <span class="keyword">new</span> WeChatWorkGroup();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºå…·ä½“åŒäº‹å¯¹è±¡</span></span><br><span class="line">        Boss boss = <span class="keyword">new</span> Boss(weChatWorkGroup);</span><br><span class="line">        PersonnelManager personnelManager = <span class="keyword">new</span> PersonnelManager(weChatWorkGroup);</span><br><span class="line">        Staff staffA = <span class="keyword">new</span> Staff(weChatWorkGroup, <span class="string">"æµ·è±ª"</span>);</span><br><span class="line">        Staff staffB = <span class="keyword">new</span> Staff(weChatWorkGroup, <span class="string">"äºšè"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"&gt;&gt;&gt;&gt;&gt;"</span>);</span><br><span class="line">        personnelManager.sendMessage(<span class="string">"@æ‰€æœ‰äºº ç”±äºè¿‘æœŸæ–°å† ç–«æƒ…å½±å“ï¼Œå…¬å¸å†³å®šå»¶è¿Ÿå¤å·¥, å…·ä½“æ—¶é—´å¦è¡Œé€šçŸ¥, æ”¶åˆ°è¯·å›å¤!"</span>);</span><br><span class="line">        System.out.println(<span class="string">"&lt;&lt;&lt;&lt;&lt;"</span>);</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"&gt;&gt;&gt;&gt;&gt;"</span>);</span><br><span class="line">        boss.sendMessage(<span class="string">"ç–«æƒ…æœŸé—´æ²¡äº‹ä¸è¦å¤–å‡º, å‹¤æ´—æ‰‹, æˆ´å£ç½©, å¤§å®¶æ³¨æ„å®‰å…¨å“¦~"</span>);</span><br><span class="line">        System.out.println(<span class="string">"&lt;&lt;&lt;&lt;&lt;"</span>);</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"&gt;&gt;&gt;&gt;&gt;"</span>);</span><br><span class="line">        staffA.sendMessage(<span class="string">"æ”¶åˆ°"</span>);</span><br><span class="line">        System.out.println(<span class="string">"&lt;&lt;&lt;&lt;&lt;"</span>);</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"&gt;&gt;&gt;&gt;&gt;"</span>);</span><br><span class="line">        staffB.sendMessage(<span class="string">"æ”¶åˆ°"</span>);</span><br><span class="line">        System.out.println(<span class="string">"&lt;&lt;&lt;&lt;&lt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>&gt;&gt;&gt;&gt;&gt;<br>äººäº‹ç»ç†å‘é€æ¶ˆæ¯: @æ‰€æœ‰äºº ç”±äºè¿‘æœŸæ–°å† ç–«æƒ…å½±å“ï¼Œå…¬å¸å†³å®šå»¶è¿Ÿå¤å·¥, å…·ä½“æ—¶é—´å¦è¡Œé€šçŸ¥, æ”¶åˆ°è¯·å›å¤!<br>è€æ¿æ¥æ”¶åˆ°æ¶ˆæ¯: @æ‰€æœ‰äºº ç”±äºè¿‘æœŸæ–°å† ç–«æƒ…å½±å“ï¼Œå…¬å¸å†³å®šå»¶è¿Ÿå¤å·¥, å…·ä½“æ—¶é—´å¦è¡Œé€šçŸ¥, æ”¶åˆ°è¯·å›å¤!<br>å‘˜å·¥[æµ·è±ª]æ¥æ”¶åˆ°æ¶ˆæ¯: @æ‰€æœ‰äºº ç”±äºè¿‘æœŸæ–°å† ç–«æƒ…å½±å“ï¼Œå…¬å¸å†³å®šå»¶è¿Ÿå¤å·¥, å…·ä½“æ—¶é—´å¦è¡Œé€šçŸ¥, æ”¶åˆ°è¯·å›å¤!<br>å‘˜å·¥[äºšè]æ¥æ”¶åˆ°æ¶ˆæ¯: @æ‰€æœ‰äºº ç”±äºè¿‘æœŸæ–°å† ç–«æƒ…å½±å“ï¼Œå…¬å¸å†³å®šå»¶è¿Ÿå¤å·¥, å…·ä½“æ—¶é—´å¦è¡Œé€šçŸ¥, æ”¶åˆ°è¯·å›å¤!<br>&lt;&lt;&lt;&lt;&lt;</p><p>&gt;&gt;&gt;&gt;&gt;<br>è€æ¿å‘é€æ¶ˆæ¯: ç–«æƒ…æœŸé—´æ²¡äº‹ä¸è¦å¤–å‡º, å‹¤æ´—æ‰‹, æˆ´å£ç½©, å¤§å®¶æ³¨æ„å®‰å…¨å“¦~<br>äººäº‹ç»ç†æ¥æ”¶åˆ°æ¶ˆæ¯: ç–«æƒ…æœŸé—´æ²¡äº‹ä¸è¦å¤–å‡º, å‹¤æ´—æ‰‹, æˆ´å£ç½©, å¤§å®¶æ³¨æ„å®‰å…¨å“¦~<br>å‘˜å·¥[æµ·è±ª]æ¥æ”¶åˆ°æ¶ˆæ¯: ç–«æƒ…æœŸé—´æ²¡äº‹ä¸è¦å¤–å‡º, å‹¤æ´—æ‰‹, æˆ´å£ç½©, å¤§å®¶æ³¨æ„å®‰å…¨å“¦~<br>å‘˜å·¥[äºšè]æ¥æ”¶åˆ°æ¶ˆæ¯: ç–«æƒ…æœŸé—´æ²¡äº‹ä¸è¦å¤–å‡º, å‹¤æ´—æ‰‹, æˆ´å£ç½©, å¤§å®¶æ³¨æ„å®‰å…¨å“¦~<br>&lt;&lt;&lt;&lt;&lt;</p><p>&gt;&gt;&gt;&gt;&gt;<br>å‘˜å·¥[æµ·è±ª]å‘é€æ¶ˆæ¯: æ”¶åˆ°<br>è€æ¿æ¥æ”¶åˆ°æ¶ˆæ¯: æ”¶åˆ°<br>äººäº‹ç»ç†æ¥æ”¶åˆ°æ¶ˆæ¯: æ”¶åˆ°<br>å‘˜å·¥[äºšè]æ¥æ”¶åˆ°æ¶ˆæ¯: æ”¶åˆ°<br>&lt;&lt;&lt;&lt;&lt;</p><p>&gt;&gt;&gt;&gt;&gt;<br>å‘˜å·¥[äºšè]å‘é€æ¶ˆæ¯: æ”¶åˆ°<br>è€æ¿æ¥æ”¶åˆ°æ¶ˆæ¯: æ”¶åˆ°<br>äººäº‹ç»ç†æ¥æ”¶åˆ°æ¶ˆæ¯: æ”¶åˆ°<br>å‘˜å·¥[æµ·è±ª]æ¥æ”¶åˆ°æ¶ˆæ¯: æ”¶åˆ°<br>&lt;&lt;&lt;&lt;&lt;</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/mediator/mediator01.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>å½“å¯¹è±¡ä¹‹é—´å­˜åœ¨å¤æ‚çš„å¼•ç”¨å…³ç³»è€Œå¯¼è‡´ä¾èµ–å…³ç³»ç»“æ„æ··ä¹±ä¸”éš¾ä»¥å¤ç”¨æ—¶ã€‚</li><li>äº¤äº’çš„å…¬å…±è¡Œä¸ºï¼Œå½“æƒ³åˆ›å»ºä¸€ä¸ªè¿è¡Œäºå¤šä¸ªç±»ä¹‹é—´çš„å¯¹è±¡ï¼Œä½†æ˜¯åˆä¸æƒ³ç”Ÿæˆæ–°çš„å­ç±»æ—¶ã€‚</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>é™ä½äº†å¯¹è±¡ä¹‹é—´çš„è€¦åˆæ€§ï¼Œæé«˜äº†å¯¹è±¡çš„å¤ç”¨æ€§ã€‚</li><li>å°†å¯¹è±¡é—´çš„ä¸€å¯¹å¤šå…³è”å…³ç³»è½¬å˜ä¸ºä¸€å¯¹ä¸€çš„å…³è”å…³ç³»ï¼Œé™ä½äº†ç¨‹åºçš„å¤æ‚åº¦ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><p>åœ¨æŸäº›åœºæ™¯ä¸­ï¼Œå¦‚æœè®¾è®¡ä¸å¦¥å½“ï¼Œä¼šä½¿å¾—ä¸­ä»‹è€…å¯¹è±¡æœ¬èº«è¿‡äºå¤æ‚ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-ä¸­ä»‹è€…æ¨¡å¼</a></li><li><a href="https://www.runoob.com/design-pattern/mediator-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-ä¸­ä»‹è€…æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹-å‘½ä»¤æ¨¡å¼ (Command)</title>
    <link href="https://www.zhaohaihao.com/posts/2020030203.html"/>
    <id>https://www.zhaohaihao.com/posts/2020030203.html</id>
    <published>2020-03-02T14:48:01.000Z</published>
    <updated>2020-04-07T03:29:29.692Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/120-Command" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>å°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿ä½ å¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ã€‚</p></blockquote><h1 id="å››ä¸ªè§’è‰²"><a href="#å››ä¸ªè§’è‰²" class="headerlink" title="å››ä¸ªè§’è‰²"></a>å››ä¸ªè§’è‰²</h1><p>å‘½ä»¤æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹å››ä¸ªè§’è‰²ï¼š</p><ul><li><strong>æŠ½è±¡å‘½ä»¤ç±»Command</strong>ï¼šå£°æ˜æ‰§è¡Œæ“ä½œçš„æ¥å£ã€‚</li><li><strong>å…·ä½“å‘½ä»¤ç±»Concrete Command</strong>ï¼šæ˜¯æŠ½è±¡å‘½ä»¤ç±»çš„å…·ä½“å®ç°ç±»ï¼ŒæŒæœ‰æ¥å—è€…å¯¹è±¡ï¼ŒåŒæ—¶é€šè¿‡è°ƒç”¨æ¥æ”¶è€…çš„åŠŸèƒ½æ¥å®Œæˆå‘½ä»¤è¦æ‰§è¡Œçš„æ“ä½œã€‚</li><li><strong>æ¥æ”¶è€…Receiver</strong>ï¼šæ‰§è¡Œå‘½ä»¤åŠŸèƒ½çš„ç›¸å…³æ“ä½œã€‚</li><li><strong>è°ƒç”¨è€…Invoker</strong>ï¼šæ‹¥æœ‰å¾ˆå¤šå‘½ä»¤å¯¹è±¡ï¼Œå¹¶é€šè¿‡è®¿é—®å‘½ä»¤å¯¹è±¡æ¥æ‰§è¡Œç›¸å…³è¯·æ±‚ï¼Œå…¶ä¸ç›´æ¥è®¿é—®æ¥æ”¶è€…ã€‚</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç¬”è€…å¥³æœ‹å‹åœ¨ä¸€å®¶çŸ¥è¯†ä»˜è´¹å…¬å¸åšäººäº‹å…¼è€æ¿åŠ©ç†ï¼Œå¸¸å¸¸ä¼šæ¥æ”¶åˆ°ä¸€äº›æ¥è‡ªè€æ¿çš„å·¥ä½œå®‰æ’ã€‚</p><p>ç¬”è€…è¿™é‡Œä»¥æ­¤ä¸ºä¾‹ã€‚å‡è®¾è¿™å¤©ä¸‹ç­ï¼Œå¥³æœ‹å‹æ¥åˆ°è€æ¿çš„ä»¥ä¸‹å‡ ä¸ªå·¥ä½œå®‰æ’ï¼š</p><ul><li>æ˜æ—©9ç‚¹å‡†æ—¶åœ¨å…¬å¸å…¬å·ä¸Šå‘å¸ƒä¸€ç¯‡xxçš„æ¨æ–‡ã€‚</li><li>ä¸Šåˆå’Œè€æ¿ä¸€èµ·å¤–å‡ºçœ‹è®²åº§åœºåœ°ã€‚</li><li>å®‰æ’æ˜å¤©ä¸‹åˆä¸¤ç‚¹çš„ä¼šè®®ã€‚</li></ul><h2 id="åˆ›å»ºæŠ½è±¡å‘½ä»¤ç±»"><a href="#åˆ›å»ºæŠ½è±¡å‘½ä»¤ç±»" class="headerlink" title="åˆ›å»ºæŠ½è±¡å‘½ä»¤ç±»"></a>åˆ›å»ºæŠ½è±¡å‘½ä»¤ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æŠ½è±¡å‘½ä»¤æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-02 16:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå…·ä½“å‘½ä»¤ç±»"><a href="#åˆ›å»ºå…·ä½“å‘½ä»¤ç±»" class="headerlink" title="åˆ›å»ºå…·ä½“å‘½ä»¤ç±»"></a>åˆ›å»ºå…·ä½“å‘½ä»¤ç±»</h2><p>æ¯ä¸€ä¸ªå…·ä½“çš„å·¥ä½œå®‰æ’å¯¹åº”ä¸€ä¸ªå…·ä½“çš„å‘½ä»¤ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å‘é€æ¨æ–‡å‘½ä»¤</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-02 16:33</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SendTweetsCommand</span> <span class="keyword">implements</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Staff staff;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SendTweetsCommand</span><span class="params">(Staff staff)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.staff = staff;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        staff.sendTweets();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> çœ‹åœºåœ°å‘½ä»¤</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-02 16:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LookVenueCommand</span> <span class="keyword">implements</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Staff staff;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LookVenueCommand</span><span class="params">(Staff staff)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.staff = staff;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        staff.lookVenue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å®‰æ’ä¼šè®®å‘½ä»¤</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-02 16:38</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AttendMeetingCommand</span> <span class="keyword">implements</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Staff staff;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AttendMeetingCommand</span><span class="params">(Staff staff)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.staff = staff;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        staff.attendMeeting();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæ¥å—è€…"><a href="#åˆ›å»ºæ¥å—è€…" class="headerlink" title="åˆ›å»ºæ¥å—è€…"></a>åˆ›å»ºæ¥å—è€…</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ¥å—è€…ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-02 16:58</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Staff</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Staff</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘æ¨æ–‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendTweets</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.name + <span class="string">"æ—©ä¸Š9ç‚¹å‡†æ—¶åœ¨å…¬å¸å…¬å·ä¸Šå‘å¸ƒä¸€ç¯‡xxçš„æ¨æ–‡"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çœ‹åœºåœ°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lookVenue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.name + <span class="string">"ä¸Šåˆå’Œè€æ¿ä¸€èµ·å¤–å‡ºçœ‹è®²åº§åœºåœ°"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®‰æ’ä¼šè®®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attendMeeting</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.name + <span class="string">"å®‰æ’ä¸‹åˆä¸¤ç‚¹çš„ä¼šè®®"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºè°ƒç”¨è€…"><a href="#åˆ›å»ºè°ƒç”¨è€…" class="headerlink" title="åˆ›å»ºè°ƒç”¨è€…"></a>åˆ›å»ºè°ƒç”¨è€…</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> è°ƒç”¨è€…ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-02 16:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Boss</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Command&gt; commandList = <span class="keyword">new</span> ArrayList&lt;Command&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ å‘½ä»¤</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> command å‘½ä»¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCommand</span><span class="params">(Command command)</span> </span>&#123;</span><br><span class="line">        commandList.add(command);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘é€å‘½ä»¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendCommands</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Command command : commandList) &#123;</span><br><span class="line">            command.execute();</span><br><span class="line">        &#125;</span><br><span class="line">        commandList.clear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-02 16:48</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Staff staff = <span class="keyword">new</span> Staff(<span class="string">"äºšè"</span>);</span><br><span class="line">        Command sendTweetsCommand = <span class="keyword">new</span> SendTweetsCommand(staff);</span><br><span class="line">        Command lookVenueCommand = <span class="keyword">new</span> LookVenueCommand(staff);</span><br><span class="line">        Command attendMeetingCommand = <span class="keyword">new</span> AttendMeetingCommand(staff);</span><br><span class="line"></span><br><span class="line">        Boss boss = <span class="keyword">new</span> Boss();</span><br><span class="line">        boss.addCommand(sendTweetsCommand);</span><br><span class="line">        boss.addCommand(lookVenueCommand);</span><br><span class="line">        boss.addCommand(attendMeetingCommand);</span><br><span class="line"></span><br><span class="line">        boss.sendCommands();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>äºšèæ—©ä¸Š9ç‚¹å‡†æ—¶åœ¨å…¬å¸å…¬å·ä¸Šå‘å¸ƒä¸€ç¯‡xxçš„æ¨æ–‡<br>äºšèä¸Šåˆå’Œè€æ¿ä¸€èµ·å¤–å‡ºçœ‹è®²åº§åœºåœ°<br>äºšèå®‰æ’ä¸‹åˆä¸¤ç‚¹çš„ä¼šè®®</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/command/command01.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>å½“è¯·æ±‚è°ƒç”¨è€…å’Œè¯·æ±‚æ¥å—è€…éœ€è¦è§£è€¦æ—¶ï¼Œå‘½ä»¤æ¨¡å¼ä½¿å¾—è°ƒç”¨è€…å’Œæ¥å—è€…ä¸ç›´æ¥äº¤äº’ã€‚</li><li>éœ€è¦æŠ½è±¡å‡ºç­‰å¾…æ‰§è¡Œçš„è¡Œä¸ºã€‚</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>é™ä½ç³»ç»Ÿçš„è€¦åˆåº¦ã€‚</li><li>è‰¯å¥½çš„æ‰©å±•æ€§ã€‚æ–°å¢æˆ–è€…åˆ é™¤å‘½ä»¤ä¸ä¼šå½±å“å…¶ä»–ç±»ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><p>å¯¹äºæ¯ä¸€ä¸ªå…·ä½“çš„æ“ä½œéƒ½éœ€è¦å¯¹åº”è®¾è®¡ä¸€ä¸ªå…·ä½“çš„å‘½ä»¤ç±»ï¼Œè¿™ä¼šå¯¼è‡´ç±»çš„æ•°ç›®çš„å¢åŠ ï¼Œå¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-å‘½ä»¤æ¨¡å¼</a></li><li><a href="https://www.runoob.com/design-pattern/command-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-å‘½ä»¤æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹-å¤‡å¿˜å½•æ¨¡å¼ (Memento)</title>
    <link href="https://www.zhaohaihao.com/posts/2020030202.html"/>
    <id>https://www.zhaohaihao.com/posts/2020030202.html</id>
    <published>2020-03-02T06:45:29.000Z</published>
    <updated>2020-04-07T03:29:52.978Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/119-Memento" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶ä¸”åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ï¼Œä»è€Œå¯ä»¥åœ¨å°†æ¥åˆé€‚çš„æ—¶å€™æŠŠè¿™ä¸ªå¯¹è±¡è¿˜åŸåˆ°ä¹‹å‰ä¿å­˜çš„çŠ¶æ€ã€‚</p></blockquote><p>å¤‡å¿˜å½•æ¨¡å¼ä¹Ÿå«<strong>å¿«ç…§æ¨¡å¼</strong>ã€‚</p><h1 id="ä¸‰ä¸ªè§’è‰²"><a href="#ä¸‰ä¸ªè§’è‰²" class="headerlink" title="ä¸‰ä¸ªè§’è‰²"></a>ä¸‰ä¸ªè§’è‰²</h1><p>å¤‡å¿˜å½•æ¨¡å¼ä¸»è¦çš„è§’è‰²æœ‰ä»¥ä¸‹ä¸‰ä¸ªï¼š</p><ul><li><strong>å‘èµ·äººOriginator</strong>ï¼šè´Ÿè´£åˆ›å»ºä¸€ä¸ªå¤‡å¿˜å½•ï¼Œè®°å½•å½“å‰æ—¶åˆ»å‘èµ·äººçš„å†…éƒ¨çŠ¶æ€ï¼ŒåŒæ—¶æä¾›æ¢å¤å¤‡å¿˜å½•æ•°æ®çš„èƒ½åŠ›ã€‚</li><li><strong>å¤‡å¿˜å½•Memento</strong>ï¼šè´Ÿè´£å­˜å‚¨å‘èµ·äººå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ã€‚</li><li><strong>ç®¡ç†è€…Caretaker</strong>ï¼šå¯¹å¤‡å¿˜å½•è¿›è¡Œç®¡ç†ï¼Œæä¾›ä¿å­˜ä¸è·å–å¤‡å¿˜å½•çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸èƒ½å¯¹å¤‡å¿˜å½•çš„å†…å®¹è¿›è¡Œæ“ä½œæˆ–è€…æ£€æŸ¥ã€‚</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>æˆ‘ä»¬åœ¨ä½¿ç”¨ <code>IntelliJ IDEA</code> è¿›è¡Œå¼€å‘çš„æ—¶å€™ï¼Œ<code>IntelliJ IDEA</code> ä¼šå°†æ‰€æœ‰çš„æ›´æ”¹è¿›è¡Œè‡ªåŠ¨ä¿å­˜ã€‚è€Œä¸”åœ¨æˆ‘ä»¬å¼€å‘çš„ä»»ä½•é˜¶æ®µæˆ‘ä»¬éƒ½å¯ä»¥å¯¹ä¸å¿…è¦çš„æ›´æ”¹è¿›è¡Œè¿˜åŸæ“ä½œï¼Œè®©ä»»ä½•æ–‡ä»¶æˆ–è€…ç›®å½•éƒ½å¯ä»¥æ¢å¤åˆ°æ›´æ”¹ä¹‹å‰çš„ä»»ä½•çŠ¶æ€ã€‚</p><p>ç¬”è€…è¿™é‡Œå°± <code>IntelliJ IDEA</code> çš„ä¿å­˜å’Œè¿˜åŸæ›´æ”¹ä¸ºä¾‹æ¥è¿›è¡Œç®€å•çš„ç¤ºä¾‹è¯´æ˜ã€‚</p><h2 id="åˆ›å»ºå‘èµ·äºº"><a href="#åˆ›å»ºå‘èµ·äºº" class="headerlink" title="åˆ›å»ºå‘èµ·äºº"></a>åˆ›å»ºå‘èµ·äºº</h2><p>åœ¨è¯¥ç¤ºä¾‹å½“ä¸­ï¼Œæˆ‘ä»¬æ˜¯å¯¹ä»£ç æ–‡ä»¶è¿›è¡Œå¤‡ä»½ï¼Œæ‰€ä»¥å…¶å¯ä»¥ä½œä¸ºæ˜¯ä¸€ä¸ªå‘èµ·äººè§’è‰²ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä»£ç æ–‡ä»¶(å‘èµ·äºº)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-02 11:22</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CodeFile</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç±»å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String className;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å†…å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤‡ä»½ç¼–å·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CodeFile</span><span class="params">(String className, String content, String code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.className = className;</span><br><span class="line">        <span class="keyword">this</span>.content = content;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¤å¤„çœç•¥getterã€setteræ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºä»£ç æ–‡ä»¶å¤‡ä»½</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CodeFileMemento <span class="title">saveToMemento</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¤‡ä»½, å¤‡ä»½ç¼–å·: "</span> + <span class="keyword">this</span>.code);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CodeFileMemento(<span class="keyword">this</span>.className, <span class="keyword">this</span>.content, <span class="keyword">this</span>.code);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’¤é”€è‡³æŸä¸ªå¤‡ä»½</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> codeFileMemento ä»£ç æ–‡ä»¶å¤‡ä»½</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">undoFromMemento</span><span class="params">(CodeFileMemento codeFileMemento)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ’¤é”€ä»£ç æ–‡ä»¶è‡³åŸå…ˆå¤‡ä»½, å†…å®¹ä¸º: "</span> + codeFileMemento);</span><br><span class="line">        <span class="keyword">this</span>.className = codeFileMemento.getClassName();</span><br><span class="line">        <span class="keyword">this</span>.content = codeFileMemento.getContent();</span><br><span class="line">        <span class="keyword">this</span>.code = codeFileMemento.getCode();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"CodeFile&#123;"</span> + <span class="string">"className='"</span> + className + <span class="string">'\''</span> + <span class="string">", content='"</span> + content + <span class="string">'\''</span> + <span class="string">", code='"</span> + code +</span><br><span class="line">                <span class="string">'\''</span> + <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå¤‡å¿˜å½•"><a href="#åˆ›å»ºå¤‡å¿˜å½•" class="headerlink" title="åˆ›å»ºå¤‡å¿˜å½•"></a>åˆ›å»ºå¤‡å¿˜å½•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä»£ç æ–‡ä»¶å¤‡ä»½</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-02 11:26</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CodeFileMemento</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç±»å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String className;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å†…å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤‡ä»½ç¼–å·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CodeFileMemento</span><span class="params">(String className, String content, String code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.className = className;</span><br><span class="line">        <span class="keyword">this</span>.content = content;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getClassName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> className;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"CodeFileMemento&#123;"</span> + <span class="string">"className='"</span> + className + <span class="string">'\''</span> + <span class="string">", content='"</span> + content + <span class="string">'\''</span> + <span class="string">", code='"</span> +</span><br><span class="line">                code + <span class="string">'\''</span> + <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºç®¡ç†è€…"><a href="#åˆ›å»ºç®¡ç†è€…" class="headerlink" title="åˆ›å»ºç®¡ç†è€…"></a>åˆ›å»ºç®¡ç†è€…</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä»£ç æ–‡ä»¶å¤‡ä»½ç®¡ç†å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-02 11:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CodeFileMementoManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Stack&lt;CodeFileMemento&gt; CODE_FILE_MEMENTO_STACK = <span class="keyword">new</span> Stack&lt;CodeFileMemento&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ä»£ç æ–‡ä»¶å¤‡ä»½</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CodeFileMemento <span class="title">getCodeFileMemento</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> CODE_FILE_MEMENTO_STACK.pop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ ä»£ç æ–‡ä»¶å¤‡ä»½</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> codeFileMemento ä»£ç æ–‡ä»¶å¤‡ä»½</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCodeFileMemento</span><span class="params">(CodeFileMemento codeFileMemento)</span> </span>&#123;</span><br><span class="line">        CODE_FILE_MEMENTO_STACK.push(codeFileMemento);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-02 11:36</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        CodeFileMementoManager codeFileMementoManager = <span class="keyword">new</span> CodeFileMementoManager();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»£ç æ–‡ä»¶è¿›è¡Œå¤‡ä»½</span></span><br><span class="line">        CodeFile codeFile = <span class="keyword">new</span> CodeFile(<span class="string">"Test"</span>, <span class="string">"public class Test &#123;&#125;"</span>, <span class="string">"bak-0001"</span>);</span><br><span class="line">        CodeFileMemento codeFileMemento = codeFile.saveToMemento();</span><br><span class="line">        codeFileMementoManager.addCodeFileMemento(codeFileMemento);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¿®æ”¹ä»£ç æ–‡ä»¶å†…å®¹</span></span><br><span class="line">        codeFile.setContent(<span class="string">"public class Test &#123;public static void main(String[] args) &#123;&#125;&#125;"</span>);</span><br><span class="line">        codeFile.setCode(<span class="string">"bak-0002"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"å½“å‰æ–‡ä»¶å†…å®¹: "</span> + codeFile);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åæ‚”äº†, è¿›è¡Œæ’¤é”€æ“ä½œ</span></span><br><span class="line">        CodeFileMemento rollbackMemento = codeFileMementoManager.getCodeFileMemento();</span><br><span class="line">        codeFile.undoFromMemento(rollbackMemento);</span><br><span class="line">        System.out.println(<span class="string">"æ‰§è¡Œæ’¤é”€æ“ä½œå, å½“å‰æ–‡ä»¶å†…å®¹: "</span> + codeFile);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¤‡ä»½, å¤‡ä»½ç¼–å·: bak-0001<br>å½“å‰æ–‡ä»¶å†…å®¹: CodeFile{className=â€™Testâ€™, content=â€™public class Test {public static void main(String[] args) {}}â€™, code=â€™bak-0002â€™}<br>æ’¤é”€ä»£ç æ–‡ä»¶è‡³åŸå…ˆå¤‡ä»½, å†…å®¹ä¸º: CodeFileMemento{className=â€™Testâ€™, content=â€™public class Test {}â€™, code=â€™bak-0001â€™}<br>æ‰§è¡Œæ’¤é”€æ“ä½œå, å½“å‰æ–‡ä»¶å†…å®¹: CodeFile{className=â€™Testâ€™, content=â€™public class Test {}â€™, code=â€™bak-0001â€™}</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/memento/memento01.png?x-oss-process=style/style01" alt="image.png"></p><p>ä»ç±»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ <code>CodeFileMemento</code> (å¤‡å¿˜å½•è§’è‰²)åªèƒ½ç”±æˆ‘ä»¬çš„ <code>CodeFile</code> (å‘èµ·äººè§’è‰²)æ¥åˆ›å»ºï¼Œè€Œ <code>CodeFileMemento</code> (å¤‡å¿˜å½•è§’è‰²)å’Œ <code>CodeFileMementoManager</code> (ç®¡ç†è€…è§’è‰²)ä¹‹é—´æ˜¯ä¸€ä¸ªèšåˆå…³ç³»ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>éœ€è¦ä¿å­˜ä¸æ¢å¤æ•°æ®çš„ç›¸å…³ä¸šåŠ¡åœºæ™¯ã€‚</li><li>éœ€è¦æä¾›ä¸€ä¸ªå¯ä»¥å›æ»šæ“ä½œçš„åœºæ™¯ï¼Œå³å¯ä»¥æ¢å¤åˆ°ä¹‹å‰ä¿å­˜çš„çŠ¶æ€ã€‚</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>ä¸ºç”¨æˆ·æä¾›äº†ä¸€ç§å¯ä»¥æ¢å¤çŠ¶æ€çš„æœºåˆ¶ã€‚</li><li>ä¿æŒå…³é”®å¯¹è±¡çš„æ•°æ®å°è£…ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><p>å¯¹è±¡éœ€è¦ä¿å­˜çš„å†…éƒ¨çŠ¶æ€ä¿¡æ¯è¿‡å¤šæˆ–è€…æ“ä½œé¢‘ç¹æ—¶ï¼Œä¼šå ç”¨æ¯”è¾ƒå¤§çš„å†…å­˜èµ„æºã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://www.runoob.com/design-pattern/memento-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-å¤‡å¿˜å½•æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹-è§‚å¯Ÿè€…æ¨¡å¼ (Observer)</title>
    <link href="https://www.zhaohaihao.com/posts/2020030201.html"/>
    <id>https://www.zhaohaihao.com/posts/2020030201.html</id>
    <published>2020-03-02T01:12:38.000Z</published>
    <updated>2020-04-07T03:29:37.962Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/118-Observer" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>å®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€æ—¶ï¼Œå®ƒçš„æ‰€æœ‰ä¾èµ–è€…(è§‚å¯Ÿè€…)éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶ä¸”è‡ªåŠ¨æ›´æ–°ã€‚</p></blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼æä¾›äº†ä¸€ç§å¯¹è±¡è®¾è®¡ï¼Œè®©è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…(ä¸»é¢˜)ä¹‹é—´æ¾è€¦åˆã€‚</p><h1 id="å››ä¸ªè§’è‰²"><a href="#å››ä¸ªè§’è‰²" class="headerlink" title="å››ä¸ªè§’è‰²"></a>å››ä¸ªè§’è‰²</h1><p>è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸»è¦è§’è‰²æœ‰ä»¥ä¸‹å››ä¸ªï¼š</p><ul><li><strong>æŠ½è±¡ä¸»é¢˜è§’è‰²Subject</strong>ï¼šå°†æ‰€æ¬²å¯¹è§‚å¯Ÿè€…å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åœ¨ä¸€ä¸ªé›†åˆé‡Œï¼Œæ¯ä¸ªä¸»é¢˜éƒ½å¯ä»¥æœ‰ä»»ä½•æ•°é‡çš„è§‚å¯Ÿè€…ã€‚æŠ½è±¡ä¸»é¢˜æä¾›ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥å¢åŠ æˆ–è€…åˆ é™¤è§‚å¯Ÿè€…å¯¹è±¡ã€‚</li><li><strong>å…·ä½“ä¸»é¢˜è§’è‰²Concrete Subject</strong>ï¼šå°†æœ‰å…³çŠ¶æ€å­˜å…¥å…·ä½“è§‚å¯Ÿè€…å¯¹è±¡ã€‚åœ¨å…·ä½“ä¸»é¢˜çš„å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œç»™æ‰€æœ‰æ³¨å†Œè¿‡çš„è§‚å¯Ÿè€…å‘é€é€šçŸ¥ã€‚</li><li><strong>æŠ½è±¡è§‚å¯Ÿè€…è§’è‰²Observer</strong>ï¼šç»™æ‰€æœ‰çš„å…·ä½“è§‚å¯Ÿè€…å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œåœ¨å¾—åˆ°ä¸»é¢˜çš„é€šçŸ¥æ—¶æ›´æ–°è‡ªå·±ã€‚</li><li><strong>å…·ä½“è§‚å¯Ÿè€…è§’è‰²Concrete Observer</strong>ï¼šå®ç°æŠ½è±¡è§‚å¯Ÿè€…è§’è‰²æ‰€è¦æ±‚çš„æ›´æ–°æ¥å£ï¼Œä»¥ä¾¿ä½¿æœ¬èº«çš„çŠ¶æ€ä¸ä¸»é¢˜çš„çŠ¶æ€ç›¸äº’åè°ƒã€‚</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>æœ€è¿‘æ–°å† è‚†è™ï¼Œè¯åº—çš„å£ç½©å¾ˆæ˜¯ç•…é”€ï¼Œç”šè‡³æ˜¯è„±é”€ï¼Œå¤§å®¶éƒ½ç­‰ç€è¯åº—è¿›å£ç½©çš„é€šçŸ¥ã€‚ç¬”è€…ä»¥æ­¤ä½œä¸ºç¤ºä¾‹ã€‚</p><p>æ–¹ä¾¿èµ·è§ï¼Œç¬”è€…è¿™é‡Œä½¿ç”¨Javaå†…ç½®çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚</p><p>åœ¨ <code>java.util</code> åŒ…å½“ä¸­åŒ…å«äº†æœ€åŸºæœ¬çš„ <code>Observer</code> æ¥å£å’Œ <code>Observable</code> ç±»ï¼Œè¿™ä¸æˆ‘ä»¬çš„æŠ½è±¡ä¸»é¢˜ <code>Subject</code> å’ŒæŠ½è±¡è§‚å¯Ÿè€… <code>Observer</code> å¾ˆæ˜¯ç›¸ä¼¼ã€‚è€Œä¸”ç”±äº <code>Observer</code> æ¥å£å’Œ <code>Observable</code> ç±»å·²ç»é¢„å…ˆå®ç°äº†è®¸å¤šåŠŸèƒ½ï¼Œä½¿å¾—æˆ‘ä»¬åœ¨ä½¿ç”¨ä¸Šæ›´åŠ çš„æ–¹ä¾¿ã€‚</p><h2 id="åˆ›å»ºå…·ä½“ä¸»é¢˜"><a href="#åˆ›å»ºå…·ä½“ä¸»é¢˜" class="headerlink" title="åˆ›å»ºå…·ä½“ä¸»é¢˜"></a>åˆ›å»ºå…·ä½“ä¸»é¢˜</h2><p>è¿™é‡Œæ–¹æ³•ä¸­è°ƒç”¨çš„ <code>setChanged()</code> æ–¹æ³•å’Œ <code>notifyObservers()</code> æ–¹æ³•éƒ½æ˜¯ç”± <code>Observable</code> ç±»æä¾›çš„ã€‚ <code>setChanged()</code> ä»£è¡¨ç€ä¸»é¢˜çŠ¶æ€çš„æ”¹å˜ã€‚ <code>notifyObservers()</code> åˆ™è¡¨ç¤ºé€šçŸ¥æ‰€æœ‰çš„æ³¨å†Œäº†çš„è§‚å¯Ÿè€…ï¼Œå‚æ•°å¯ä¼ å¯ä¸ä¼ ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> è¯åº—ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-01 23:15</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pharmacy</span> <span class="keyword">extends</span> <span class="title">Observable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¯åº—åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pharmacy</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é‡‡è´­</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pharmacy  è¯åº—</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> gauzeMask å£ç½©</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">purchase</span><span class="params">(Pharmacy pharmacy, GauzeMask gauzeMask)</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"%sæœ€è¿‘åˆšé‡‡è´­äº†ä¸€æ‰¹%s, æ•°é‡ä¸º%s, å•ä»·ä¸º%s"</span>, pharmacy.getName(), gauzeMask.getType(),</span><br><span class="line">                gauzeMask.getAmount(), gauzeMask.getPrice()));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Observable æä¾›çš„æ–¹æ³•, ä»£è¡¨ä¸»é¢˜çŠ¶æ€çš„æ”¹å˜</span></span><br><span class="line">        setChanged();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Observable æä¾›çš„æ–¹æ³•, é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…</span></span><br><span class="line">        notifyObservers(gauzeMask);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå…·ä½“è§‚å¯Ÿè€…"><a href="#åˆ›å»ºå…·ä½“è§‚å¯Ÿè€…" class="headerlink" title="åˆ›å»ºå…·ä½“è§‚å¯Ÿè€…"></a>åˆ›å»ºå…·ä½“è§‚å¯Ÿè€…</h2><p><code>update()</code> æ˜¯çˆ¶ç±»æŠ½è±¡è§‚å¯Ÿè€… <code>Obserber</code> ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚å‚æ•° <code>Observable o</code> ä»£è¡¨çš„æ˜¯è¢«è§‚å¯Ÿçš„å¯¹è±¡ï¼Œ <code>Object arg</code> è¡¨ç¤ºçš„æ˜¯ä¸»é¢˜ä¸­å‘å¸ƒé€šçŸ¥æ—¶ä¼ é€’çš„å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> é¡¾å®¢ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-01 23:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> <span class="keyword">implements</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å§“å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Customer</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Observable o, Object arg)</span> </span>&#123;</span><br><span class="line">        Pharmacy pharmacy = (Pharmacy) o;</span><br><span class="line">        GauzeMask gauzeMask = (GauzeMask) arg;</span><br><span class="line">        System.out.println(String.format(<span class="string">"é¡¾å®¢%sæ”¶åˆ°%sçš„é€šçŸ¥: æœ€è¿‘åˆšé‡‡è´­äº†ä¸€æ‰¹%s, æ•°é‡ä¸º%s, å•ä»·ä¸º%s"</span>, <span class="keyword">this</span>.name, pharmacy.getName(),</span><br><span class="line">                gauzeMask.getType(), gauzeMask.getAmount(), gauzeMask.getPrice()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºç¼ºçœå®ä½“ç±»"><a href="#åˆ›å»ºç¼ºçœå®ä½“ç±»" class="headerlink" title="åˆ›å»ºç¼ºçœå®ä½“ç±»"></a>åˆ›å»ºç¼ºçœå®ä½“ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å£ç½©ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-01 23:17</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GauzeMask</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> amount;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»·æ ¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GauzeMask</span><span class="params">(String type, <span class="keyword">int</span> amount, <span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">        <span class="keyword">this</span>.amount = amount;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAmount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> amount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-01 23:46</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Pharmacy pharmacy = <span class="keyword">new</span> Pharmacy(<span class="string">"ä¸€æ–¹å¤§è¯æˆ¿"</span>);</span><br><span class="line">        GauzeMask gauzeMask = <span class="keyword">new</span> GauzeMask(<span class="string">"ä¸€æ¬¡æ€§å£ç½©"</span>, <span class="number">5000</span>, <span class="number">4.8</span>);</span><br><span class="line"></span><br><span class="line">        Customer customer1 = <span class="keyword">new</span> Customer(<span class="string">"æµ·è±ª"</span>);</span><br><span class="line">        Customer customer2 = <span class="keyword">new</span> Customer(<span class="string">"äºšè"</span>);</span><br><span class="line">        pharmacy.addObserver(customer1);</span><br><span class="line">        pharmacy.addObserver(customer2);</span><br><span class="line"></span><br><span class="line">        pharmacy.purchase(pharmacy, gauzeMask);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>ä¸€æ–¹å¤§è¯æˆ¿æœ€è¿‘åˆšé‡‡è´­äº†ä¸€æ‰¹ä¸€æ¬¡æ€§å£ç½©, æ•°é‡ä¸º5000, å•ä»·ä¸º4.8<br>é¡¾å®¢äºšèæ”¶åˆ°ä¸€æ–¹å¤§è¯æˆ¿çš„é€šçŸ¥: æœ€è¿‘åˆšé‡‡è´­äº†ä¸€æ‰¹ä¸€æ¬¡æ€§å£ç½©, æ•°é‡ä¸º5000, å•ä»·ä¸º4.8<br>é¡¾å®¢æµ·è±ªæ”¶åˆ°ä¸€æ–¹å¤§è¯æˆ¿çš„é€šçŸ¥: æœ€è¿‘åˆšé‡‡è´­äº†ä¸€æ‰¹ä¸€æ¬¡æ€§å£ç½©, æ•°é‡ä¸º5000, å•ä»·ä¸º4.8</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/observer/observer01.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><p>å¯¹è±¡ä¹‹é—´å­˜åœ¨ä¸€å¯¹å¤šçš„å…³ç³»ï¼ŒåŒæ—¶ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ä¼šå½±å“å…¶ä»–å¯¹è±¡ã€‚</p><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ä¹‹é—´æ˜¯æŠ½è±¡è€¦åˆå…³ç³»ï¼Œé™ä½äº†ä¸¤è€…çš„è€¦åˆåº¦ã€‚</li><li>è§‚å¯Ÿè€…ä¸è¢«è§‚å¯Ÿè€…ä¹‹é—´å»ºç«‹äº†ä¸€å¥—è§¦å‘æœºåˆ¶ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>æœ‰å¯èƒ½ä¼šå‡ºç°å¾ªç¯å¼•ç”¨ã€‚</li><li>å½“è§‚å¯Ÿè€…å¯¹è±¡å¾ˆå¤šæ—¶ï¼Œå‘å¸ƒé€šçŸ¥çš„æ—¶é—´æ¶ˆè€—ä¼šå»¶é•¿ï¼Œä»è€Œå½±å“ç¨‹åºçš„æ•ˆç‡ã€‚</li></ul><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-è§‚å¯Ÿè€…æ¨¡å¼</a></li><li><a href="https://www.runoob.com/design-pattern/observer-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-è§‚å¯Ÿè€…æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹-è§£é‡Šå™¨æ¨¡å¼ (Interpreter)</title>
    <link href="https://www.zhaohaihao.com/posts/2020030101.html"/>
    <id>https://www.zhaohaihao.com/posts/2020030101.html</id>
    <published>2020-03-01T12:15:20.000Z</published>
    <updated>2020-04-07T03:29:33.791Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/117-Interpreter" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>ç»™å®šä¸€ä¸ªè¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•çš„ä¸€ç§è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¿™ä¸ªè§£é‡Šå™¨ä½¿ç”¨è¯¥è¡¨ç¤ºæ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚</p></blockquote><p>å®šä¹‰ä¸­æåˆ°çš„æ–‡æ³•å’Œå¥å­çš„æ¦‚å¿µåŒç¼–è¯‘åŸç†ä¸­çš„æè¿°ç›¸åŒï¼Œâ€œæ–‡æ³•â€æŒ‡çš„è¯­è¨€çš„è¯­æ³•è§„åˆ™ï¼Œè€Œâ€œå¥å­â€æ˜¯æŒ‡è¯­è¨€é›†ä¸­çš„å…ƒç´ ã€‚</p><h1 id="å››ä¸ªè§’è‰²"><a href="#å››ä¸ªè§’è‰²" class="headerlink" title="å››ä¸ªè§’è‰²"></a>å››ä¸ªè§’è‰²</h1><p>è§£é‡Šå™¨æ¨¡å¼ä¸»è¦æœ‰å››ä¸ªè§’è‰²ï¼š</p><ul><li><strong>ç¯å¢ƒè§’è‰²Context</strong>ï¼šåŒ…å«è§£é‡Šå™¨ä¹‹å¤–çš„ä¸€äº›å…¨å±€ä¿¡æ¯ã€‚</li><li><strong>æŠ½è±¡è¡¨è¾¾å¼AbstractExpression</strong>ï¼šå£°æ˜ä¸€ä¸ªæŠ½è±¡çš„è§£é‡Šæ“ä½œï¼Œè¿™ä¸ªæ¥å£ä¸ºæŠ½è±¡è¯­æ³•æ ‘ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹æ‰€å…±äº«ã€‚</li><li><strong>ç»ˆç»“ç¬¦è¡¨è¾¾å¼TerminalExpression</strong>ï¼šå®ç°ä¸æ–‡æ³•ä¸­çš„ç»ˆç»“ç¬¦ç›¸å…³è”çš„è§£é‡Šæ“ä½œã€‚</li><li><strong>éç»ˆç»“ç¬¦è¡¨è¾¾å¼NonterminalExpression</strong>ï¼šä¸ºæ–‡æ³•ä¸­çš„éç»ˆç»“ç¬¦å®ç°è§£é‡Šæ“ä½œï¼Œå¯¹æ–‡æ³•ä¸­æ¯ä¸€æ¡è§„åˆ™R1ã€R2â€¦Rnéƒ½éœ€è¦ä¸€ä¸ªå…·ä½“çš„éç»ˆç»“ç¬¦è¡¨è¾¾å¼ç±»ã€‚</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç¬”è€…è¿™é‡Œé€šè¿‡è§£é‡Šå™¨æ¨¡å¼æ¥å®ç°è¿ç®—è¡¨è¾¾å¼çš„è®¡ç®—ï¼Œä¾‹å¦‚è®¡ç®—è¡¨è¾¾å¼A-B+Cçš„å€¼ã€‚</p><h2 id="åˆ›å»ºæŠ½è±¡è¡¨è¾¾å¼"><a href="#åˆ›å»ºæŠ½è±¡è¡¨è¾¾å¼" class="headerlink" title="åˆ›å»ºæŠ½è±¡è¡¨è¾¾å¼"></a>åˆ›å»ºæŠ½è±¡è¡¨è¾¾å¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æŠ½è±¡è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-29 18:41</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Expression</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£é‡Š</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">interpret</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºç»ˆç»“ç¬¦è¡¨è¾¾å¼"><a href="#åˆ›å»ºç»ˆç»“ç¬¦è¡¨è¾¾å¼" class="headerlink" title="åˆ›å»ºç»ˆç»“ç¬¦è¡¨è¾¾å¼"></a>åˆ›å»ºç»ˆç»“ç¬¦è¡¨è¾¾å¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> åŠ æ³•è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-01 18:17</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AddExpression</span> <span class="keyword">implements</span> <span class="title">Expression</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Expression left;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Expression right;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AddExpression</span><span class="params">(Expression left, Expression right)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.left = left;</span><br><span class="line">        <span class="keyword">this</span>.right = right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">interpret</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.left.interpret() + <span class="keyword">this</span>.right.interpret();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å‡æ³•è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-01 18:17</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubExpression</span> <span class="keyword">implements</span> <span class="title">Expression</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Expression left;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Expression right;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SubExpression</span><span class="params">(Expression left, Expression right)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.left = left;</span><br><span class="line">        <span class="keyword">this</span>.right = right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">interpret</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.left.interpret() - <span class="keyword">this</span>.right.interpret();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºéç»ˆç»“ç¬¦è¡¨è¾¾å¼"><a href="#åˆ›å»ºéç»ˆç»“ç¬¦è¡¨è¾¾å¼" class="headerlink" title="åˆ›å»ºéç»ˆç»“ç¬¦è¡¨è¾¾å¼"></a>åˆ›å»ºéç»ˆç»“ç¬¦è¡¨è¾¾å¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ•°å­—è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-01 18:21</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NumberExpression</span> <span class="keyword">implements</span> <span class="title">Expression</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> number;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NumberExpression</span><span class="params">(<span class="keyword">int</span> number)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.number = number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NumberExpression</span><span class="params">(String number)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.number = Integer.valueOf(number);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">interpret</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> String.format(<span class="string">"%s"</span>, <span class="keyword">this</span>.number);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºç¯å¢ƒè§’è‰²"><a href="#åˆ›å»ºç¯å¢ƒè§’è‰²" class="headerlink" title="åˆ›å»ºç¯å¢ƒè§’è‰²"></a>åˆ›å»ºç¯å¢ƒè§’è‰²</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> è¡¨è¾¾å¼ç¯å¢ƒè§’è‰²</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-01 18:23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExpressionContext</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Expression expression;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£æ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> expStr å­—ç¬¦ä¸²è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">parse</span><span class="params">(String expStr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Stack&lt;Expression&gt; stack = <span class="keyword">new</span> Stack&lt;Expression&gt;();</span><br><span class="line"></span><br><span class="line">        String[] expArray = expStr.split(<span class="string">","</span>);</span><br><span class="line"></span><br><span class="line">        Expression left;</span><br><span class="line">        Expression right;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; expArray.length; i++) &#123;</span><br><span class="line">            String exp = expArray[i];</span><br><span class="line">            <span class="keyword">if</span> (isSymbol(exp)) &#123;</span><br><span class="line">                <span class="comment">// +æˆ–è€…-è¿ç®—ç¬¦å·</span></span><br><span class="line">                left = stack.pop();</span><br><span class="line">                right = <span class="keyword">new</span> NumberExpression(expArray[++i]);</span><br><span class="line">                System.out.println(String.format(<span class="string">"æ•°å­—%så’Œ%så¼€å§‹è¿›è¡Œ%sæ“ä½œè¿ç®—"</span>, left, right, exp));</span><br><span class="line">                Expression expression = getExpression(left, right, exp);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">int</span> result = expression.interpret();</span><br><span class="line">                System.out.println(String.format(<span class="string">"è¿ç®—ç»“æœ%så¼€å§‹å…¥æ ˆ"</span>, result));</span><br><span class="line">                stack.push(<span class="keyword">new</span> NumberExpression(result));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// æ•°å­—</span></span><br><span class="line">                NumberExpression numberExpression = <span class="keyword">new</span> NumberExpression(exp);</span><br><span class="line">                System.out.println(String.format(<span class="string">"æ•°å­—%så¼€å§‹å…¥æ ˆ"</span>, numberExpression));</span><br><span class="line">                stack.push(numberExpression);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> stack.pop().interpret();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦æ˜¯ç¬¦å·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> exp è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isSymbol</span><span class="params">(String exp)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"+"</span>.equals(exp) || <span class="string">"-"</span>.equals(exp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> left å·¦è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> right å³è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> symbol è¿ç®—ç¬¦å·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Expression <span class="title">getExpression</span><span class="params">(Expression left, Expression right, String symbol)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"+"</span>.equals(symbol)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> AddExpression(left, right);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"-"</span>.equals(symbol)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> SubExpression(left, right);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(String.format(<span class="string">"å½“å‰è§£æå™¨ä¸æ”¯æŒè¯¥æ“ä½œç¬¦%sçš„è§£æ"</span>, symbol));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-03-01 18:26</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String expStr = <span class="string">"10,-,4,+,1"</span>;</span><br><span class="line">        ExpressionContext expressionContext = <span class="keyword">new</span> ExpressionContext();</span><br><span class="line">        <span class="keyword">int</span> parse = expressionContext.parse(expStr);</span><br><span class="line">        System.out.println(<span class="string">"è¡¨è¾¾å¼æœ€ç»ˆçš„è¿ç®—ç»“æœä¸º: "</span> + parse);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>æ•°å­—10å¼€å§‹å…¥æ ˆ<br>æ•°å­—10å’Œ4å¼€å§‹è¿›è¡Œ-æ“ä½œè¿ç®—<br>è¿ç®—ç»“æœ6å¼€å§‹å…¥æ ˆ<br>æ•°å­—6å’Œ1å¼€å§‹è¿›è¡Œ+æ“ä½œè¿ç®—<br>è¿ç®—ç»“æœ7å¼€å§‹å…¥æ ˆ<br>è¡¨è¾¾å¼æœ€ç»ˆçš„è¿ç®—ç»“æœä¸º: 7</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/interpreter/interpreter01.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è§£é‡Šå™¨æ¨¡å¼åœ¨å®é™…çš„è½¯ä»¶å¼€å‘ä¸­ä½¿ç”¨æ¯”è¾ƒå°‘ï¼Œå› ä¸ºå®ƒä¼šå¼•èµ·æ•ˆç‡ã€æ€§èƒ½ä»¥åŠç»´æŠ¤ç­‰é—®é¢˜ã€‚</p><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>å°†ä¸€ä¸ªéœ€è¦è§£é‡Šæ‰§è¡Œçš„è¯­è¨€ä¸­çš„å¥å­è¡¨ç¤ºä¸ºä¸€ä¸ªæŠ½è±¡è¯­æ³•æ ‘ã€‚</li><li>æŸç§ç±»å‹çš„é—®é¢˜é‡å¤å‡ºç°å¯ä»¥ç”¨ä¸€ç§ç®€å•çš„è¯­è¨€æ¥è¿›è¡Œè¡¨è¾¾ã€‚</li><li>ç®€å•è¯­æ³•éœ€è¦è§£é‡Šçš„åœºæ™¯ã€‚</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>å¯æ‰©å±•æ€§æ¯”è¾ƒå¥½ï¼Œçµæ´»ã€‚</li><li>ç®€å•æ–‡æ³•è¾ƒä¸ºå®¹æ˜“å®ç°ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>å½“è¯­æ³•è§„åˆ™æ•°ç›®å¤ªå¤šæ—¶ï¼Œç±»çš„ä¸ªæ•°å°†æ€¥å‰§å¢åŠ ï¼Œå¯¼è‡´ç³»ç»Ÿçš„å¤æ‚åº¦å¢åŠ ã€‚</li><li>è§£é‡Šå™¨æ¨¡å¼é‡‡ç”¨å¤§é‡çš„å¾ªç¯å’Œé€’å½’è°ƒç”¨ï¼Œæ‰§è¡Œæ•ˆç‡è¾ƒä¸ºä½ä¸‹ã€‚</li></ul><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://www.runoob.com/design-pattern/interpreter-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-è§£é‡Šå™¨æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹-ç­–ç•¥æ¨¡å¼ (Strategy)</title>
    <link href="https://www.zhaohaihao.com/posts/2020022802.html"/>
    <id>https://www.zhaohaihao.com/posts/2020022802.html</id>
    <published>2020-02-28T08:11:58.000Z</published>
    <updated>2020-04-07T03:29:49.571Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/116-Strategy" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>å®šä¹‰äº†ç®—æ³•å®¶æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©å®ƒä»¬ä¹‹é—´å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œæ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ï¼Œä¸ä¼šå½±å“åˆ°ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚</p></blockquote><h1 id="ä¸‰ä¸ªè§’è‰²"><a href="#ä¸‰ä¸ªè§’è‰²" class="headerlink" title="ä¸‰ä¸ªè§’è‰²"></a>ä¸‰ä¸ªè§’è‰²</h1><p>ç­–ç•¥æ¨¡å¼ä¸­ä¸»è¦æœ‰ä¸‰ä¸ªè§’è‰²ï¼š</p><ul><li><strong>æŠ½è±¡ç­–ç•¥ç±»Strategy</strong>ï¼šå®šä¹‰æ‰€æœ‰æ”¯æŒçš„ç®—æ³•çš„å…¬å…±æ¥å£ï¼Œå¯ä»¥æ˜¯æ¥å£ä¹Ÿå¯ä»¥æ˜¯æŠ½è±¡ç±»ã€‚</li><li><strong>å…·ä½“ç­–ç•¥ç±»Concrete Strategy</strong>ï¼šå°è£…å…·ä½“çš„ç®—æ³•æˆ–è€…è¡Œä¸ºã€‚</li><li><strong>ç¯å¢ƒç±»Context</strong>ï¼šç»´æŠ¤ä¸€ä¸ªç­–ç•¥ç±»çš„å¼•ç”¨ï¼Œæä¾›ç»™å®¢æˆ·ç«¯è°ƒç”¨ã€‚</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç¬”è€…è¿™é‡Œé’ˆå¯¹æŸè¶…å¸‚çš„ä¼šå‘˜ä½“ç³»ä¸ºä¾‹ã€‚ä¸åŒç­‰çº§çš„ä¼šå‘˜æ‹¥æœ‰ä¸åŒçš„æ‰“æŠ˜åŠ›åº¦ï¼Œå…·ä½“æƒ…å†µå¦‚ä¸‹è¡¨ã€‚</p><table><thead><tr><th align="center"><strong>è¶…å¸‚ä¼šå‘˜æ‰“æŠ˜å¯¹ç…§è¡¨</strong></th><th></th></tr></thead><tbody><tr><td align="center"><strong>ä¼šå‘˜ç­‰çº§</strong></td><td><strong>æ‰“æŠ˜åŠ›åº¦</strong></td></tr><tr><td align="center">æ™®é€šä¼šå‘˜</td><td>ä¸æ‰“æŠ˜</td></tr><tr><td align="center">é»„é‡‘ä¼šå‘˜</td><td>ä¹äº”æŠ˜</td></tr><tr><td align="center">é“‚é‡‘ä¼šå‘˜</td><td>å…«å…«æŠ˜</td></tr><tr><td align="center">é’»çŸ³ä¼šå‘˜</td><td>å…«æŠ˜</td></tr></tbody></table><h2 id="åˆ›å»ºæŠ½è±¡ç­–ç•¥"><a href="#åˆ›å»ºæŠ½è±¡ç­–ç•¥" class="headerlink" title="åˆ›å»ºæŠ½è±¡ç­–ç•¥"></a>åˆ›å»ºæŠ½è±¡ç­–ç•¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¼šå‘˜ç­–ç•¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 16:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MemberStrategy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰“æŠ˜</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">discount</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå…·ä½“ç­–ç•¥"><a href="#åˆ›å»ºå…·ä½“ç­–ç•¥" class="headerlink" title="åˆ›å»ºå…·ä½“ç­–ç•¥"></a>åˆ›å»ºå…·ä½“ç­–ç•¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ™®é€šä¼šå‘˜ç­–ç•¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 16:58</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrdinaryMemberStrategy</span> <span class="keyword">implements</span> <span class="title">MemberStrategy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">discount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ™®é€šä¼šå‘˜ä¸æ‰“æŠ˜"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> é»„é‡‘ä¼šå‘˜ç­–ç•¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 16:59</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GoldMemberStrategy</span> <span class="keyword">implements</span> <span class="title">MemberStrategy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">discount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"é»„é‡‘ä¼šå‘˜æ‰€æœ‰å•†å“æ‰“ä¹äº”æŠ˜"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> é“‚é‡‘ä¼šå‘˜ç­–ç•¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 17:00</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PlatinumMemberStrategy</span> <span class="keyword">implements</span> <span class="title">MemberStrategy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">discount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"é“‚é‡‘ä¼šå‘˜æ‰€æœ‰å•†å“æ‰“å…«å…«æŠ˜"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> é’»çŸ³ä¼šå‘˜ç­–ç•¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 17:01</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiamondMemberStrategy</span> <span class="keyword">implements</span> <span class="title">MemberStrategy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">discount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"é’»çŸ³ä¼šå‘˜æ‰€æœ‰å•†å“æ‰“å…«æŠ˜"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºç¯å¢ƒç±»"><a href="#åˆ›å»ºç¯å¢ƒç±»" class="headerlink" title="åˆ›å»ºç¯å¢ƒç±»"></a>åˆ›å»ºç¯å¢ƒç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ‰“æŠ˜æ´»åŠ¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 17:03</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiscountActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MemberStrategy memberStrategy;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DiscountActivity</span><span class="params">(MemberStrategy memberStrategy)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.memberStrategy = memberStrategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰“æŠ˜</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">discount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        memberStrategy.discount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 17:05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String member = <span class="string">"é»„é‡‘ä¼šå‘˜"</span>;</span><br><span class="line">        DiscountActivity discountActivity;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"é»„é‡‘ä¼šå‘˜"</span>.equals(member)) &#123;</span><br><span class="line">            discountActivity = <span class="keyword">new</span> DiscountActivity(<span class="keyword">new</span> GoldMemberStrategy());</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"é“‚é‡‘ä¼šå‘˜"</span>.equals(member)) &#123;</span><br><span class="line">            discountActivity = <span class="keyword">new</span> DiscountActivity(<span class="keyword">new</span> PlatinumMemberStrategy());</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"é’»çŸ³ä¼šå‘˜"</span>.equals(member)) &#123;</span><br><span class="line">            discountActivity = <span class="keyword">new</span> DiscountActivity(<span class="keyword">new</span> DiamondMemberStrategy());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            discountActivity = <span class="keyword">new</span> DiscountActivity(<span class="keyword">new</span> OrdinaryMemberStrategy());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        discountActivity.discount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>é»„é‡‘ä¼šå‘˜æ‰€æœ‰å•†å“æ‰“ä¹äº”æŠ˜</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/strategy/strategy01.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="é—®é¢˜æ‰€åœ¨"><a href="#é—®é¢˜æ‰€åœ¨" class="headerlink" title="é—®é¢˜æ‰€åœ¨"></a>é—®é¢˜æ‰€åœ¨</h1><p>ä¸Šè¿°ç¤ºä¾‹ä»£ç çš„æµ‹è¯•ç±»å³æˆ‘ä»¬çš„å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¹¶æœªå®Œå…¨æ¶ˆé™¤ <code>if...else</code> è¿™ç§æ¡ä»¶è¯­å¥ï¼Œè€Œä¸”æ¯æ¬¡æ–¹æ³•æ‰§è¡Œåˆ°æ­¤å¤„æ—¶ï¼Œéƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªç­–ç•¥å¯¹è±¡å’Œä¸€ä¸ªæ´»åŠ¨å¯¹è±¡ï¼Œä¼šå­˜åœ¨é‡å¤åˆ›å»ºçš„ç°è±¡ã€‚</p><h1 id="æ–¹æ¡ˆæ”¹è¿›"><a href="#æ–¹æ¡ˆæ”¹è¿›" class="headerlink" title="æ–¹æ¡ˆæ”¹è¿›"></a>æ–¹æ¡ˆæ”¹è¿›</h1><p>ä¸ºäº†é¿å…ä¸Šè¿°çš„é—®é¢˜ï¼Œæˆ‘ä»¬ç»“åˆç­–ç•¥æ¨¡å¼å’Œå·¥å‚æ¨¡å¼åœ¨åŸæœ‰çš„ç¤ºä¾‹ä»£ç ä¸Šè¿›è¡Œæ”¹é€ ã€‚</p><h2 id="æ–°å¢å·¥å‚ç±»"><a href="#æ–°å¢å·¥å‚ç±»" class="headerlink" title="æ–°å¢å·¥å‚ç±»"></a>æ–°å¢å·¥å‚ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¼šå‘˜ç­–ç•¥å·¥å‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 17:24</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MemberStrategyFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, MemberStrategy&gt; MEMBER_STRATEGY_MAP = <span class="keyword">new</span> HashMap&lt;String, MemberStrategy&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">MemberStrategyFactory</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ä¼šå‘˜ç­–ç•¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> member ä¼šå‘˜ç­‰çº§</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MemberStrategy <span class="title">getMemberStrategy</span><span class="params">(String member)</span> </span>&#123;</span><br><span class="line">        MemberStrategy memberStrategy = MEMBER_STRATEGY_MAP.get(member);</span><br><span class="line">        <span class="keyword">return</span> memberStrategy == <span class="keyword">null</span> ? MEMBER_STRATEGY_MAP.get(MemberKey.ORDINARY) : memberStrategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MEMBER_STRATEGY_MAP.put(MemberKey.ORDINARY, <span class="keyword">new</span> OrdinaryMemberStrategy());</span><br><span class="line">        MEMBER_STRATEGY_MAP.put(MemberKey.GOLD, <span class="keyword">new</span> GoldMemberStrategy());</span><br><span class="line">        MEMBER_STRATEGY_MAP.put(MemberKey.PLATINUM, <span class="keyword">new</span> PlatinumMemberStrategy());</span><br><span class="line">        MEMBER_STRATEGY_MAP.put(MemberKey.DIAMOND, <span class="keyword">new</span> DiamondMemberStrategy());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¼šå‘˜é”®å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">interface</span> <span class="title">MemberKey</span> </span>&#123;</span><br><span class="line">        String ORDINARY = <span class="string">"æ™®é€šä¼šå‘˜"</span>;</span><br><span class="line">        String GOLD = <span class="string">"é»„é‡‘ä¼šå‘˜"</span>;</span><br><span class="line">        String PLATINUM = <span class="string">"é“‚é‡‘ä¼šå‘˜"</span>;</span><br><span class="line">        String DIAMOND = <span class="string">"é’»çŸ³ä¼šå‘˜"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è°ƒæ•´æµ‹è¯•ç±»"><a href="#è°ƒæ•´æµ‹è¯•ç±»" class="headerlink" title="è°ƒæ•´æµ‹è¯•ç±»"></a>è°ƒæ•´æµ‹è¯•ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 17:05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String member = <span class="string">"é»„é‡‘ä¼šå‘˜"</span>;</span><br><span class="line">        DiscountActivity discountActivity = <span class="keyword">new</span> DiscountActivity(MemberStrategyFactory.getMemberStrategy(member));</span><br><span class="line">        discountActivity.discount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>é»„é‡‘ä¼šå‘˜æ‰€æœ‰å•†å“æ‰“ä¹äº”æŠ˜</p></blockquote><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ç­–ç•¥æ¨¡å¼å’Œå·¥å‚æ¨¡å¼çš„ç»„åˆä½¿ç”¨ï¼Œæˆ‘ä»¬æ¶ˆé™¤äº†å®¢æˆ·ç«¯çš„ <code>if...else</code> æ¡ä»¶è½¬ä¹‰è¯­å¥ï¼Œä½¿å®¢æˆ·ç«¯å˜å¾—ç›¸å¯¹ç®€å•ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ç­–ç•¥æ¨¡å¼çš„ä½¿ç”¨æ–¹å¼ä¸€èˆ¬å¹¶ä¸æ˜¯ç‹¬ç«‹ä½¿ç”¨çš„ï¼Œæœ‰å¯èƒ½éœ€è¦ç»“åˆå·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€äº«å…ƒæ¨¡å¼ç­‰è®¾è®¡æ¨¡å¼æ¥ä¸€èµ·å®ç°ã€‚</p><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>å¤šä¸ªç±»çš„åŒºåˆ«ä»…ä»…åœ¨äºè¡¨ç°è¡Œä¸ºçš„ä¸åŒã€‚</li><li>ä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°åœ¨å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§ã€‚</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>å¯ä»¥é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶è¯­å¥ã€‚</li><li>ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œå¯ä»¥åœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œçµæ´»å¢åŠ æ–°ç®—æ³•ã€‚</li><li>å„ç®—æ³•å½¼æ­¤ç‹¬ç«‹ï¼Œä¸”å¯¹å®¢æˆ·ç«¯éšè—å…·ä½“çš„ç®—æ³•å®ç°ï¼Œæé«˜äº†ç®—æ³•çš„ä¿å¯†æ€§å’Œå®‰å…¨æ€§ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>å®¢æˆ·ç«¯å¿…é¡»ç†è§£æ‰€æœ‰ç­–ç•¥ç®—æ³•çš„åŒºåˆ«ï¼Œå¹¶ä¸”è‡ªè¡Œå†³å®šä½¿ç”¨å“ªä¸€ä¸ªç­–ç•¥ç±»ã€‚</li><li>ä¼šé€ æˆå¾ˆå¤šçš„ç­–ç•¥ç±»ã€‚</li></ul><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-ç­–ç•¥æ¨¡å¼</a></li><li><a href="https://www.runoob.com/design-pattern/strategy-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-ç­–ç•¥æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹-è¿­ä»£å™¨æ¨¡å¼ (Iterator)</title>
    <link href="https://www.zhaohaihao.com/posts/2020022801.html"/>
    <id>https://www.zhaohaihao.com/posts/2020022801.html</id>
    <published>2020-02-28T05:55:21.000Z</published>
    <updated>2020-04-07T03:29:45.908Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/115-Iterator" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸æš´éœ²å…¶å†…éƒ¨çš„è¡¨ç¤ºã€‚</p></blockquote><h1 id="å››ä¸ªè§’è‰²"><a href="#å››ä¸ªè§’è‰²" class="headerlink" title="å››ä¸ªè§’è‰²"></a>å››ä¸ªè§’è‰²</h1><p>è¿­ä»£å™¨æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹å››ä¸ªè§’è‰²ï¼š</p><ul><li><strong>æŠ½è±¡èšåˆè§’è‰²Aggregate</strong>ï¼šå®šä¹‰å­˜å‚¨ã€æ·»åŠ ã€åˆ é™¤èšåˆå¯¹è±¡ä»¥åŠåˆ›å»ºè¿­ä»£å™¨å¯¹è±¡çš„æ¥å£ã€‚</li><li><strong>å…·ä½“èšåˆè§’è‰²Concrete Aggregate</strong>ï¼šå®ç°æŠ½è±¡èšåˆç±»ï¼Œè¿”å›ä¸€ä¸ªå…·ä½“çš„è¿­ä»£å™¨å®ä¾‹ã€‚</li><li><strong>æŠ½è±¡è¿­ä»£å™¨Iterator</strong>ï¼šå®šä¹‰è®¿é—®å’Œéå†èšåˆå…ƒç´ çš„æ¥å£ã€‚</li><li><strong>å…·ä½“è¿­ä»£å™¨Concrete Iterator</strong>ï¼šå®ç°æŠ½è±¡è¿­ä»£å™¨æ¥å£ä¸­é”å®šä¹‰çš„æ–¹æ³•ï¼Œå®Œæˆå¯¹èšåˆå¯¹è±¡çš„éå†ï¼Œå¹¶ä¸”è®°å½•éå†çš„å½“å‰ä½ç½®ã€‚</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç¬”è€…è¿™é‡Œä»¥è¶…å¸‚çš„å•†å“ä¸ºä¾‹ï¼Œéœ€è¦åšä¸€ä¸ªå•†å“æ¸…å•çš„å±•ç¤ºã€‚</p><h2 id="åˆ›å»ºå•†å“å®ä½“ç±»"><a href="#åˆ›å»ºå•†å“å®ä½“ç±»" class="headerlink" title="åˆ›å»ºå•†å“å®ä½“ç±»"></a>åˆ›å»ºå•†å“å®ä½“ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å•†å“å®ä½“ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 14:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Goods</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»·æ ¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Goods</span><span class="params">(String name, <span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæŠ½è±¡èšåˆè§’è‰²"><a href="#åˆ›å»ºæŠ½è±¡èšåˆè§’è‰²" class="headerlink" title="åˆ›å»ºæŠ½è±¡èšåˆè§’è‰²"></a>åˆ›å»ºæŠ½è±¡èšåˆè§’è‰²</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å•†å“æŠ½è±¡èšåˆæ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 14:26</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">GoodsAggregate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addGoods</span><span class="params">(Goods goods)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeGoods</span><span class="params">(Goods goods)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å•†å“è¿­ä»£å™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">GoodsIterator <span class="title">getGoodsIterator</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå…·ä½“èšåˆè§’è‰²"><a href="#åˆ›å»ºå…·ä½“èšåˆè§’è‰²" class="headerlink" title="åˆ›å»ºå…·ä½“èšåˆè§’è‰²"></a>åˆ›å»ºå…·ä½“èšåˆè§’è‰²</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å•†å“å…·ä½“èšåˆç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 14:30</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GoodsAggregateImpl</span> <span class="keyword">implements</span> <span class="title">GoodsAggregate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Goods&gt; goodsList = <span class="keyword">new</span> ArrayList&lt;Goods&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addGoods</span><span class="params">(Goods goods)</span> </span>&#123;</span><br><span class="line">        goodsList.add(goods);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeGoods</span><span class="params">(Goods goods)</span> </span>&#123;</span><br><span class="line">        goodsList.remove(goods);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> GoodsIterator <span class="title">getGoodsIterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> GoodsIteratorImpl(goodsList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæŠ½è±¡è¿­ä»£å™¨è§’è‰²"><a href="#åˆ›å»ºæŠ½è±¡è¿­ä»£å™¨è§’è‰²" class="headerlink" title="åˆ›å»ºæŠ½è±¡è¿­ä»£å™¨è§’è‰²"></a>åˆ›å»ºæŠ½è±¡è¿­ä»£å™¨è§’è‰²</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å•†å“æŠ½è±¡è¿­ä»£å™¨æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 14:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">GoodsIterator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ä¸‹ä¸€ä¸ªå•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Goods <span class="title">nextGoods</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­æ˜¯å¦è¿˜æœ‰å•†å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">hasGoods</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå…·ä½“è¿­ä»£å™¨è§’è‰²"><a href="#åˆ›å»ºå…·ä½“è¿­ä»£å™¨è§’è‰²" class="headerlink" title="åˆ›å»ºå…·ä½“è¿­ä»£å™¨è§’è‰²"></a>åˆ›å»ºå…·ä½“è¿­ä»£å™¨è§’è‰²</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å•†å“æŠ½è±¡è¿­ä»£å™¨ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 14:32</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GoodsIteratorImpl</span> <span class="keyword">implements</span> <span class="title">GoodsIterator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Goods&gt; goodsList;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å•†å“ä½ç½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> index;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GoodsIteratorImpl</span><span class="params">(List&lt;Goods&gt; goodsList)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.goodsList = goodsList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Goods <span class="title">nextGoods</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å½“å‰å•†å“çš„ä½ç½®æ˜¯"</span> + index);</span><br><span class="line">        Goods goods = goodsList.get(index);</span><br><span class="line">        index++;</span><br><span class="line">        <span class="keyword">return</span> goods;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasGoods</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; goodsList.size()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-28 14:40</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºå•†å“</span></span><br><span class="line">        Goods goods1 = <span class="keyword">new</span> Goods(<span class="string">"å¯ä¹"</span>, <span class="number">3.0</span>);</span><br><span class="line">        Goods goods2 = <span class="keyword">new</span> Goods(<span class="string">"è–¯ç‰‡"</span>, <span class="number">5.0</span>);</span><br><span class="line">        Goods goods3 = <span class="keyword">new</span> Goods(<span class="string">"å¥¶èŒ¶"</span>, <span class="number">3.0</span>);</span><br><span class="line">        Goods goods4 = <span class="keyword">new</span> Goods(<span class="string">"é¦™è‚ "</span>, <span class="number">10.0</span>);</span><br><span class="line">        Goods goods5 = <span class="keyword">new</span> Goods(<span class="string">"å¥¶ç²‰"</span>, <span class="number">33.0</span>);</span><br><span class="line">        Goods goods6 = <span class="keyword">new</span> Goods(<span class="string">"ç‰›è‚‰å¹²"</span>, <span class="number">23.0</span>);</span><br><span class="line"></span><br><span class="line">        GoodsAggregate goodsAggregate = <span class="keyword">new</span> GoodsAggregateImpl();</span><br><span class="line">        goodsAggregate.addGoods(goods1);</span><br><span class="line">        goodsAggregate.addGoods(goods2);</span><br><span class="line">        goodsAggregate.addGoods(goods3);</span><br><span class="line">        goodsAggregate.addGoods(goods4);</span><br><span class="line">        goodsAggregate.addGoods(goods5);</span><br><span class="line">        goodsAggregate.addGoods(goods6);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"---å•†å“æ¸…å•---"</span>);</span><br><span class="line">        GoodsIterator goodsIterator = goodsAggregate.getGoodsIterator();</span><br><span class="line">        Goods goods;</span><br><span class="line">        <span class="keyword">while</span> (goodsIterator.hasGoods()) &#123;</span><br><span class="line">            goods = goodsIterator.nextGoods();</span><br><span class="line">            System.out.println(String.format(<span class="string">"å•†å“åç§°: %s, å•†å“ä»·æ ¼: %s"</span>, goods.getName(), goods.getPrice()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>â€”å•†å“æ¸…å•â€”<br>å½“å‰å•†å“çš„ä½ç½®æ˜¯0<br>å•†å“åç§°: å¯ä¹, å•†å“ä»·æ ¼: 3.0<br>å½“å‰å•†å“çš„ä½ç½®æ˜¯1<br>å•†å“åç§°: è–¯ç‰‡, å•†å“ä»·æ ¼: 5.0<br>å½“å‰å•†å“çš„ä½ç½®æ˜¯2<br>å•†å“åç§°: å¥¶èŒ¶, å•†å“ä»·æ ¼: 3.0<br>å½“å‰å•†å“çš„ä½ç½®æ˜¯3<br>å•†å“åç§°: é¦™è‚ , å•†å“ä»·æ ¼: 10.0<br>å½“å‰å•†å“çš„ä½ç½®æ˜¯4<br>å•†å“åç§°: å¥¶ç²‰, å•†å“ä»·æ ¼: 33.0<br>å½“å‰å•†å“çš„ä½ç½®æ˜¯5<br>å•†å“åç§°: ç‰›è‚‰å¹², å•†å“ä»·æ ¼: 23.0</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/iterator/iterator01.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>å½“è®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å†…å®¹ä½†åˆä¸æƒ³æš´éœ²å…¶å†…éƒ¨è¡¨ç¤ºã€‚</li><li>éœ€è¦ä¸ºèšåˆå¯¹è±¡æä¾›å¤šç§çš„éå†æ–¹å¼ã€‚</li><li>å½“éœ€è¦ä¸ºéå†ä¸åŒçš„èšåˆç»“æ„æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>å…·æœ‰è‰¯å¥½çš„å°è£…æ€§ï¼Œä¸ºéå†ä¸åŒçš„èšåˆç»“æ„æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚</li><li>åˆ†ç¦»äº†èšåˆç±»çš„éå†è¡Œä¸ºï¼Œç®€åŒ–èšåˆç±»ã€‚</li><li>å…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§ï¼Œæ–°å¢èšåˆç±»å’Œè¿­ä»£å™¨ç±»æ— éœ€ä¿®æ”¹åŸæœ‰ä»£ç ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><p>å¢åŠ äº†ç±»çš„ä¸ªæ•°ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-è¿­ä»£å™¨æ¨¡å¼</a></li><li><a href="https://www.runoob.com/design-pattern/iterator-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-è¿­ä»£å™¨æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹-æ¨¡æ¿æ–¹æ³•æ¨¡å¼ (Template Method)</title>
    <link href="https://www.zhaohaihao.com/posts/2020022701.html"/>
    <id>https://www.zhaohaihao.com/posts/2020022701.html</id>
    <published>2020-02-27T02:12:30.000Z</published>
    <updated>2020-04-07T03:29:25.322Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/114-Template-Method" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>å®šä¹‰ä¸€ä¸ªç®—æ³•çš„æ­¥éª¤ï¼Œå¹¶å…è®¸å­ç±»ä¸ºä¸€ä¸ªæˆ–è€…å¤šä¸ªæ­¥éª¤æä¾›å®ç°ã€‚</p></blockquote><p>æ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹ï¼Œé‡æ–°å®šä¹‰ç®—æ³•ä¸­çš„æŸäº›æ­¥éª¤ã€‚</p><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç¬”è€…è¿™é‡Œä»¥åšç•ªèŒ„ç‚’è›‹ä¸ºä¾‹ã€‚ç¬”è€…å°†åšç•ªèŒ„ç‚’è›‹çš„æ­¥éª¤åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼šå€’æ²¹ã€æ”¾é¸¡è›‹ã€æ”¾ç•ªèŒ„ã€å€’è°ƒæ–™ã€ç¿»ç‚’ã€‚ä¸è€ƒè™‘å¤šä½™çš„ç»†èŠ‚é—®é¢˜ï¼Œä¸åŒçš„äººåšç•ªèŒ„ç‚’è›‹çš„æ­¥éª¤åº”è¯¥æ˜¯ç±»ä¼¼çš„ã€‚</p><h2 id="åˆ›å»ºæŠ½è±¡æ¨¡æ¿"><a href="#åˆ›å»ºæŠ½è±¡æ¨¡æ¿" class="headerlink" title="åˆ›å»ºæŠ½è±¡æ¨¡æ¿"></a>åˆ›å»ºæŠ½è±¡æ¨¡æ¿</h2><p>è¿™é‡Œä¸»è¦å®šä¹‰ç‚’èœçš„æ­¥éª¤ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æŠ½è±¡æ¨¡æ¿ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-27 15:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractCook</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åšé¥­çš„æ•´ä½“æ­¥éª¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">cook</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pourOil();</span><br><span class="line">        <span class="keyword">this</span>.addEgg();</span><br><span class="line">        <span class="keyword">this</span>.addTomato();</span><br><span class="line">        <span class="keyword">this</span>.pourSeasoning();</span><br><span class="line">        <span class="keyword">this</span>.stirFry();</span><br><span class="line">        <span class="keyword">if</span> (needChoppedGreenOnion()) &#123;</span><br><span class="line">            <span class="keyword">this</span>.addChoppedGreenOnion();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å€’æ²¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">pourOil</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å€’å…¥é£Ÿç”¨æ²¹"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ”¾é¸¡è›‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">addEgg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ”¾å…¥é¸¡è›‹"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ”¾ç•ªèŒ„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">addTomato</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ”¾å…¥ç•ªèŒ„"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¿»ç‚’</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">stirFry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å¿«é€Ÿç¿»ç‚’"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ”¾è‘±èŠ±</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">addChoppedGreenOnion</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ”¾ç‚¹è‘±èŠ±"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦éœ€è¦è‘±èŠ± (é’©å­æ–¹æ³•)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">needChoppedGreenOnion</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å€’è°ƒå‘³å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">pourSeasoning</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>needChoppedGreenOnion()</code> æ˜¯ä¸€ä¸ªé’©å­æ–¹æ³•ï¼Œè®©å…·ä½“çš„å­ç±»æ¥å†³å®šæ˜¯å¦æ·»åŠ è‘±èŠ±ï¼Œé»˜è®¤ä¸æ·»åŠ ã€‚</p><p>ä»¥ä¸Šçš„éƒ¨åˆ†æ–¹æ³•ç”¨ <code>final</code> ä¿®é¥°ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢å­ç±»å¯¹å…¶è¿›è¡Œé‡å†™ã€‚</p><h2 id="åˆ›å»ºå…·ä½“å­ç±»"><a href="#åˆ›å»ºå…·ä½“å­ç±»" class="headerlink" title="åˆ›å»ºå…·ä½“å­ç±»"></a>åˆ›å»ºå…·ä½“å­ç±»</h2><p>è¿™é‡Œä»¥ç¬”è€…åšé¥­å’Œå¥³æœ‹å‹åšé¥­ä¸ºä¾‹ã€‚ç”±äºä¸¤äººçš„å£å‘³ä¸åŒï¼Œå€’å…¥çš„è°ƒå‘³å“ä¼šå­˜åœ¨äº›è®¸å·®å¼‚ã€‚è€Œä¸”ç¬”è€…å–œæ¬¢åœ¨ç•ªèŒ„ç‚’è›‹ä¸­åŠ å…¥è‘±èŠ±ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å…·ä½“å­ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-27 16:04</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MeCook</span> <span class="keyword">extends</span> <span class="title">AbstractCook</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pourSeasoning</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ”¾ç‚¹ç›"</span>);</span><br><span class="line">        System.out.println(<span class="string">"æ”¾ç‚¹é…±æ²¹"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ­¤å¤„è¦†ç›–äº†çˆ¶ç±»é’©å­æ–¹æ³•çš„é»˜è®¤å®ç°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">needChoppedGreenOnion</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å…·ä½“å­ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-27 16:07</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GirlFriendCook</span> <span class="keyword">extends</span> <span class="title">AbstractCook</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pourSeasoning</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ”¾ç‚¹ç›"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ <code>MeCook</code> ç±»ä¸­é‡å†™äº†çˆ¶ç±»çš„ <code>needChoppedGreenOnion()</code> æ–¹æ³•ï¼Œé‚£ä¹ˆå¯¹äºçˆ¶ç±»ä¸­æ¨¡æ¿æ–¹æ³•æ‰§è¡Œ <code>needChoppedGreenOnion()</code> æ–¹æ³•æ—¶ï¼Œæ‹¿åˆ°çš„å…¶å®æ˜¯å­ç±»æ–¹æ³•çš„è¿”å›å€¼ã€‚</p><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-27 16:13</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æˆ‘åšç•ªèŒ„ç‚’è›‹</span></span><br><span class="line">        System.out.println(<span class="string">"---æˆ‘åšç•ªèŒ„ç‚’è›‹ å¼€å§‹---"</span>);</span><br><span class="line">        AbstractCook meCook = <span class="keyword">new</span> MeCook();</span><br><span class="line">        meCook.cook();</span><br><span class="line">        System.out.println(<span class="string">"---æˆ‘åšç•ªèŒ„ç‚’è›‹ ç»“æŸ---"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¥³æœ‹å‹åšç•ªèŒ„ç‚’è›‹</span></span><br><span class="line">        System.out.println(<span class="string">"---å¥³æœ‹å‹åšç•ªèŒ„ç‚’è›‹ å¼€å§‹---"</span>);</span><br><span class="line">        AbstractCook girlFriendCook = <span class="keyword">new</span> GirlFriendCook();</span><br><span class="line">        girlFriendCook.cook();</span><br><span class="line">        System.out.println(<span class="string">"---å¥³æœ‹å‹åšç•ªèŒ„ç‚’è›‹ ç»“æŸ---"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»è¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>â€”æˆ‘åšç•ªèŒ„ç‚’è›‹ å¼€å§‹â€”<br>å€’å…¥é£Ÿç”¨æ²¹<br>æ”¾å…¥é¸¡è›‹<br>æ”¾å…¥ç•ªèŒ„<br>æ”¾ç‚¹ç›<br>æ”¾ç‚¹é…±æ²¹<br>å¿«é€Ÿç¿»ç‚’<br>æ”¾ç‚¹è‘±èŠ±<br>â€”æˆ‘åšç•ªèŒ„ç‚’è›‹ ç»“æŸâ€”<br>â€”å¥³æœ‹å‹åšç•ªèŒ„ç‚’è›‹ å¼€å§‹â€”<br>å€’å…¥é£Ÿç”¨æ²¹<br>æ”¾å…¥é¸¡è›‹<br>æ”¾å…¥ç•ªèŒ„<br>æ”¾ç‚¹ç›<br>å¿«é€Ÿç¿»ç‚’<br>â€”å¥³æœ‹å‹åšç•ªèŒ„ç‚’è›‹ ç»“æŸâ€”</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/template-method/template-method01.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>ç®—æ³•çš„æ•´ä½“æ­¥éª¤å›ºå®šï¼Œä½†å…¶ä¸­çš„ä¸ªåˆ«éƒ¨åˆ†æ˜“å˜ã€‚</li><li>å¤šä¸ªå­ç±»å­˜åœ¨å…¬å…±çš„è¡Œä¸ºï¼Œå¯ä»¥å°†å…¶æå–å‡ºæ¥å¹¶ä¸”é›†ä¸­åˆ°ä¸€ä¸ªå…¬å…±çˆ¶ç±»å½“ä¸­ï¼Œé¿å…ä»£ç é‡å¤ã€‚</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>çˆ¶ç±»æä¾›å…¬å…±éƒ¨åˆ†ä»£ç ï¼Œæé«˜å¤ç”¨æ€§ã€‚</li><li>å°†ä¸å˜éƒ¨åˆ†çš„ç®—æ³•å°è£…åˆ°çˆ¶ç±»ä¸­å®ç°ï¼ŒæŠŠå¯å˜éƒ¨åˆ†çš„ç®—æ³•ç”±å­ç±»ç»§æ‰¿å»å®ç°ï¼Œæé«˜äº†æ‰©å±•æ€§ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>å¯¹äºæ¯ä¸ªä¸åŒçš„å®ç°éƒ½éœ€è¦ä¸€ä¸ªå­ç±»æ¥å®ç°ï¼Œå¯¼è‡´ç±»æ•°ç›®çš„å¢åŠ ï¼Œå¢åŠ ç³»ç»Ÿå®ç°çš„å¤æ‚åº¦ã€‚</li><li>çˆ¶ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ç”±è‡ªå­ç±»å®ç°ï¼Œå¦‚æœçˆ¶ç±»æ·»åŠ æ–°çš„æŠ½è±¡æ–¹æ³•ï¼Œæ‰€æœ‰çš„å­ç±»éƒ½éœ€è¦ä¿®æ”¹ã€‚</li></ul><h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2><p><strong>é’©å­æ–¹æ³•</strong>ï¼šæä¾›ç¼ºçœè¡Œä¸ºï¼Œå­ç±»å¯ä»¥åœ¨å¿…è¦æ—¶è¿›è¡Œæ‰©å±•ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-æ¨¡æ¿æ–¹æ³•</a></li><li><a href="https://www.runoob.com/design-pattern/template-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-æ¨¡æ¿æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç»“æ„å‹-ä»£ç†æ¨¡å¼ (Proxy)</title>
    <link href="https://www.zhaohaihao.com/posts/2020022602.html"/>
    <id>https://www.zhaohaihao.com/posts/2020022602.html</id>
    <published>2020-02-26T07:02:01.000Z</published>
    <updated>2020-04-07T03:30:54.651Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/113-Proxy" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ç”¨æ¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</p></blockquote><p>åœ¨ä»£ç†æ¨¡å¼ä¸­ï¼Œä»£ç†å¯¹è±¡ä½œä¸ºè®¿é—®å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´çš„ä¸­ä»‹ã€‚</p><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç¬”è€…è¿™é‡Œä»¥è´­ä¹°ç«è½¦ç¥¨ä¸ºä¾‹ã€‚æˆ‘ä»¬è´­ä¹°ç«è½¦ç¥¨ä¸ä¸€å®šè¦å»ç«è½¦ç«™è´­ä¹°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡12306ç½‘ç«™æˆ–è€…å»ç«è½¦ç¥¨ä»£å”®ç‚¹è´­ä¹°ã€‚</p><h2 id="åŸºäºç»§æ‰¿çš„é™æ€ä»£ç†å®ç°"><a href="#åŸºäºç»§æ‰¿çš„é™æ€ä»£ç†å®ç°" class="headerlink" title="åŸºäºç»§æ‰¿çš„é™æ€ä»£ç†å®ç°"></a>åŸºäºç»§æ‰¿çš„é™æ€ä»£ç†å®ç°</h2><h3 id="åˆ›å»ºç›®æ ‡å¯¹è±¡"><a href="#åˆ›å»ºç›®æ ‡å¯¹è±¡" class="headerlink" title="åˆ›å»ºç›®æ ‡å¯¹è±¡"></a>åˆ›å»ºç›®æ ‡å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ç«è½¦ç«™(ç›®æ ‡å¯¹è±¡)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 21:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Station</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å§“å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å§‹å‘ç«™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String start;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»ˆç‚¹ç«™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String end;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Station</span><span class="params">(String username, String start, String end)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.start = start;</span><br><span class="line">        <span class="keyword">this</span>.end = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¤å¤„çœç•¥getterã€setteræ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"%sè´­ä¹°äº†ä»%sè‡³%sçš„ç«è½¦ç¥¨"</span>, username, start, end));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºä»£ç†å¯¹è±¡"><a href="#åˆ›å»ºä»£ç†å¯¹è±¡" class="headerlink" title="åˆ›å»ºä»£ç†å¯¹è±¡"></a>åˆ›å»ºä»£ç†å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 12306ç½‘ç«™ç±»(ä»£ç†å¯¹è±¡)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 21:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Website12306</span> <span class="keyword">extends</span> <span class="title">Station</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Website12306</span><span class="params">(String username, String start, String end)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(username, start, end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿæ—¥å¿—æ‰“å°</span></span><br><span class="line">        System.out.println(String.format(<span class="string">"ã€æ‰“å°æ—¥å¿—ã€‘ %såœ¨12306å¹³å°ä¸Šè´­ä¹°ä»%sè‡³%sçš„ç«è½¦ç¥¨"</span>, getUsername(), getStart(), getEnd()));</span><br><span class="line">        <span class="keyword">super</span>.buy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 21:54</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Station station = <span class="keyword">new</span> Website12306(<span class="string">"æµ·è±ª"</span>, <span class="string">"è¯¸æš¨"</span>, <span class="string">"æ­å·"</span>);</span><br><span class="line">        station.buy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>ã€æ‰“å°æ—¥å¿—ã€‘ æµ·è±ªåœ¨12306å¹³å°ä¸Šè´­ä¹°ä»è¯¸æš¨è‡³æ­å·çš„ç«è½¦ç¥¨<br>æµ·è±ªè´­ä¹°äº†ä»è¯¸æš¨è‡³æ­å·çš„ç«è½¦ç¥¨</p></blockquote><h3 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h3><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/proxy/proxy01.png?x-oss-process=style/style01" alt="image.png"></p><p>ä»ä¸Šè¿°ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä»£ç†å¯¹è±¡ä¸­çš„ <code>buy()</code> æ–¹æ³•å®é™…ä¸Šæœ€ç»ˆè°ƒç”¨çš„æ˜¯ç›®æ ‡å¯¹è±¡çš„ <code>buy()</code> æ–¹æ³•ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä»£ç†å¯¹è±¡ä¸­å¯¹æ–¹æ³•è¿›è¡Œå¢å¼ºã€‚</p><h2 id="åŸºäºæ¥å£çš„é™æ€ä»£ç†å®ç°"><a href="#åŸºäºæ¥å£çš„é™æ€ä»£ç†å®ç°" class="headerlink" title="åŸºäºæ¥å£çš„é™æ€ä»£ç†å®ç°"></a>åŸºäºæ¥å£çš„é™æ€ä»£ç†å®ç°</h2><h3 id="åˆ›å»ºæŠ½è±¡æ¥å£"><a href="#åˆ›å»ºæŠ½è±¡æ¥å£" class="headerlink" title="åˆ›å»ºæŠ½è±¡æ¥å£"></a>åˆ›å»ºæŠ½è±¡æ¥å£</h3><p>å¯ä»¥æ˜¯æ¥å£ä¹Ÿå¯ä»¥æ˜¯æŠ½è±¡ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æŠ½è±¡æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 21:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Station</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºç›®æ ‡å¯¹è±¡-1"><a href="#åˆ›å»ºç›®æ ‡å¯¹è±¡-1" class="headerlink" title="åˆ›å»ºç›®æ ‡å¯¹è±¡"></a>åˆ›å»ºç›®æ ‡å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> è¯¸æš¨ç«è½¦ç«™(ç›®æ ‡å¯¹è±¡)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 22:10</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZhuJiStation</span> <span class="keyword">implements</span> <span class="title">Station</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å§“å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å§‹å‘ç«™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String start;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»ˆç‚¹ç«™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String end;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ZhuJiStation</span><span class="params">(String username, String start, String end)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.start = start;</span><br><span class="line">        <span class="keyword">this</span>.end = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¤å¤„çœç•¥getterã€setteræ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"%sè´­ä¹°äº†ä»%sè‡³%sçš„ç«è½¦ç¥¨"</span>, username, start, end));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºä»£ç†å¯¹è±¡-1"><a href="#åˆ›å»ºä»£ç†å¯¹è±¡-1" class="headerlink" title="åˆ›å»ºä»£ç†å¯¹è±¡"></a>åˆ›å»ºä»£ç†å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 12306ç½‘ç«™ç±»(ä»£ç†å¯¹è±¡)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 21:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Website12306</span> <span class="keyword">implements</span> <span class="title">Station</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å§“å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å§‹å‘ç«™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String start;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»ˆç‚¹ç«™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String end;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Station station;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Website12306</span><span class="params">(String username, String start, String end)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.start = start;</span><br><span class="line">        <span class="keyword">this</span>.end = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿæ—¥å¿—æ‰“å°</span></span><br><span class="line">        System.out.println(String.format(<span class="string">"ã€æ‰“å°æ—¥å¿—ã€‘ %såœ¨12306å¹³å°ä¸Šè´­ä¹°ä»%sè‡³%sçš„ç«è½¦ç¥¨"</span>, username, start, end));</span><br><span class="line">        <span class="keyword">if</span> (station == <span class="keyword">null</span>) &#123;</span><br><span class="line">            station = <span class="keyword">new</span> ZhuJiStation(username, start, end);</span><br><span class="line">        &#125;</span><br><span class="line">        station.buy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ç±»åŠè¾“å‡º-1"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º-1" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 21:54</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Station station = <span class="keyword">new</span> Website12306(<span class="string">"æµ·è±ª"</span>, <span class="string">"è¯¸æš¨"</span>, <span class="string">"æ­å·"</span>);</span><br><span class="line">        station.buy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>ã€æ‰“å°æ—¥å¿—ã€‘ æµ·è±ªåœ¨12306å¹³å°ä¸Šè´­ä¹°ä»è¯¸æš¨è‡³æ­å·çš„ç«è½¦ç¥¨<br>æµ·è±ªè´­ä¹°äº†ä»è¯¸æš¨è‡³æ­å·çš„ç«è½¦ç¥¨</p></blockquote><h3 id="ç±»ç»“æ„å›¾-1"><a href="#ç±»ç»“æ„å›¾-1" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h3><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/proxy/proxy02.png?x-oss-process=style/style01" alt="image.png"></p><p>è¿™ç§æ–¹å¼éœ€è¦ç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡å®ç°åŒä¸€ä¸ªæ¥å£æˆ–è€…ç»§æ‰¿åŒä¸€ä¸ªæŠ½è±¡ç±»ã€‚</p><h2 id="åŸºäºJDKåŠ¨æ€ä»£ç†å®ç°"><a href="#åŸºäºJDKåŠ¨æ€ä»£ç†å®ç°" class="headerlink" title="åŸºäºJDKåŠ¨æ€ä»£ç†å®ç°"></a>åŸºäºJDKåŠ¨æ€ä»£ç†å®ç°</h2><p>åŸºäºJDKåŠ¨æ€ä»£ç†çš„å®ç°ï¼Œä¸»è¦ä¾èµ–çš„æ˜¯ <code>Proxy</code> ç±»çš„ <code>newProxyInstance()</code> æ–¹æ³•å’Œ <code>InvocationHandler</code> ç±»çš„ <code>invoke()</code> æ–¹æ³•ã€‚</p><p>è€Œä¸”JDKåŠ¨æ€ä»£ç†ä¸èƒ½å¤Ÿä»£ç†ç±»ï¼Œåªèƒ½å¤ŸåŸºäºæ¥å£å®ç°ã€‚</p><h3 id="åˆ›å»ºæŠ½è±¡æ¥å£-1"><a href="#åˆ›å»ºæŠ½è±¡æ¥å£-1" class="headerlink" title="åˆ›å»ºæŠ½è±¡æ¥å£"></a>åˆ›å»ºæŠ½è±¡æ¥å£</h3><p>è¿™ä¸ªåœ°æ–¹åªèƒ½æ˜¯æ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æŠ½è±¡æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 21:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Station</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºç›®æ ‡å¯¹è±¡-2"><a href="#åˆ›å»ºç›®æ ‡å¯¹è±¡-2" class="headerlink" title="åˆ›å»ºç›®æ ‡å¯¹è±¡"></a>åˆ›å»ºç›®æ ‡å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> è¯¸æš¨ç«è½¦ç«™(ç›®æ ‡å¯¹è±¡)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 22:10</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZhuJiStation</span> <span class="keyword">implements</span> <span class="title">Station</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å§“å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å§‹å‘ç«™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String start;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»ˆç‚¹ç«™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String end;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ZhuJiStation</span><span class="params">(String username, String start, String end)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.start = start;</span><br><span class="line">        <span class="keyword">this</span>.end = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¤å¤„çœç•¥getterã€setteræ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"%sè´­ä¹°äº†ä»%sè‡³%sçš„ç«è½¦ç¥¨"</span>, username, start, end));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºåŠ¨æ€ä»£ç†ç±»"><a href="#åˆ›å»ºåŠ¨æ€ä»£ç†ç±»" class="headerlink" title="åˆ›å»ºåŠ¨æ€ä»£ç†ç±»"></a>åˆ›å»ºåŠ¨æ€ä»£ç†ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> åŠ¨æ€ä»£ç†ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 22:32</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StationDynamicProxy</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StationDynamicProxy</span><span class="params">(Object target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">bind</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Class clazz = target.getClass();</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(clazz.getClassLoader(), clazz.getInterfaces(), <span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿæ—¥å¿—æ‰“å°</span></span><br><span class="line">        System.out.println(<span class="string">"ã€æ—¥å¿—æ‰“å°ã€‘çœŸå®æ“ä½œä¹‹å‰è¿›è¡Œæ—¥å¿—æ‰“å°"</span>);</span><br><span class="line">        <span class="keyword">return</span> method.invoke(target, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ç±»åŠè¾“å‡º-2"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º-2" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 21:54</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Station station = (Station) <span class="keyword">new</span> StationDynamicProxy(<span class="keyword">new</span> ZhuJiStation(<span class="string">"æµ·è±ª"</span>, <span class="string">"è¯¸æš¨"</span>, <span class="string">"æ­å·"</span>)).bind();</span><br><span class="line">        station.buy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>ã€æ—¥å¿—æ‰“å°ã€‘çœŸå®æ“ä½œä¹‹å‰è¿›è¡Œæ—¥å¿—æ‰“å°<br>æµ·è±ªè´­ä¹°äº†ä»è¯¸æš¨è‡³æ­å·çš„ç«è½¦ç¥¨</p></blockquote><h3 id="ç±»ç»“æ„å›¾-2"><a href="#ç±»ç»“æ„å›¾-2" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h3><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/proxy/proxy03.png?x-oss-process=style/style01" alt="image.png"></p><h2 id="åŸºäºCGLibåŠ¨æ€ä»£ç†å®ç°"><a href="#åŸºäºCGLibåŠ¨æ€ä»£ç†å®ç°" class="headerlink" title="åŸºäºCGLibåŠ¨æ€ä»£ç†å®ç°"></a>åŸºäºCGLibåŠ¨æ€ä»£ç†å®ç°</h2><p>CGLibæ˜¯é’ˆå¯¹äºç±»çš„ä»£ç†æ¨¡å¼ï¼Œä½¿ç”¨CGLibå°±å¿…é¡»å®ç° <code>MethodInterceptor</code> æ¥å£ã€‚</p><h3 id="åˆ›å»ºç›®æ ‡å¯¹è±¡-3"><a href="#åˆ›å»ºç›®æ ‡å¯¹è±¡-3" class="headerlink" title="åˆ›å»ºç›®æ ‡å¯¹è±¡"></a>åˆ›å»ºç›®æ ‡å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> è¯¸æš¨ç«è½¦ç«™(ç›®æ ‡å¯¹è±¡)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 22:10</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZhuJiStation</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å§“å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å§‹å‘ç«™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String start;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»ˆç‚¹ç«™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String end;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¤å¤„å¿½ç•¥getterã€setteræ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"%sè´­ä¹°äº†ä»%sè‡³%sçš„ç«è½¦ç¥¨"</span>, username, start, end));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºåŠ¨æ€ä»£ç†ç±»-1"><a href="#åˆ›å»ºåŠ¨æ€ä»£ç†ç±»-1" class="headerlink" title="åˆ›å»ºåŠ¨æ€ä»£ç†ç±»"></a>åˆ›å»ºåŠ¨æ€ä»£ç†ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> åŠ¨æ€ä»£ç†ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 22:32</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StationDynamicProxy</span> <span class="keyword">implements</span> <span class="title">MethodInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Object o, Method method, Object[] objects, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿæ—¥å¿—æ‰“å°</span></span><br><span class="line">        System.out.println(<span class="string">"ã€æ—¥å¿—æ‰“å°ã€‘çœŸå®æ“ä½œä¹‹å‰è¿›è¡Œæ—¥å¿—æ‰“å°"</span>);</span><br><span class="line">        <span class="keyword">return</span> methodProxy.invokeSuper(o, objects);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ç±»åŠè¾“å‡º-3"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º-3" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 21:54</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Enhancer enhancer = <span class="keyword">new</span> Enhancer();</span><br><span class="line">        enhancer.setSuperclass(ZhuJiStation<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        enhancer.setCallback(<span class="keyword">new</span> StationDynamicProxy());</span><br><span class="line">        ZhuJiStation proxy = (ZhuJiStation) enhancer.create();</span><br><span class="line">        proxy.setUsername(<span class="string">"æµ·è±ª"</span>);</span><br><span class="line">        proxy.setStart(<span class="string">"è¯¸æš¨"</span>);</span><br><span class="line">        proxy.setEnd(<span class="string">"æ­å·"</span>);</span><br><span class="line">        proxy.buy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>ã€æ—¥å¿—æ‰“å°ã€‘çœŸå®æ“ä½œä¹‹å‰è¿›è¡Œæ—¥å¿—æ‰“å°<br>ã€æ—¥å¿—æ‰“å°ã€‘çœŸå®æ“ä½œä¹‹å‰è¿›è¡Œæ—¥å¿—æ‰“å°<br>ã€æ—¥å¿—æ‰“å°ã€‘çœŸå®æ“ä½œä¹‹å‰è¿›è¡Œæ—¥å¿—æ‰“å°<br>ã€æ—¥å¿—æ‰“å°ã€‘çœŸå®æ“ä½œä¹‹å‰è¿›è¡Œæ—¥å¿—æ‰“å°<br>æµ·è±ªè´­ä¹°äº†ä»è¯¸æš¨è‡³æ­å·çš„ç«è½¦ç¥¨</p></blockquote><h3 id="ç±»ç»“æ„å›¾-3"><a href="#ç±»ç»“æ„å›¾-3" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h3><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/proxy/proxy04.png?x-oss-process=style/style01" alt="image.png"></p><p>CGLibæ‘†è„±äº†å¯¹äº <code>Proxy</code> çš„ä¾èµ–ï¼Œä»è€Œé¿å…äº†åˆ›å»ºä»£ç†ç±»å¿…é¡»ç»§æ‰¿ <code>Proxy</code> çš„é™åˆ¶ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><p>è®¿é—®å¯¹è±¡ä¸é€‚åˆæˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨ç›®æ ‡å¯¹è±¡ã€‚</p><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>å°†è®¿é—®å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡åˆ†ç¦»ï¼Œé™ä½äº†ç³»ç»Ÿçš„è€¦åˆåº¦ã€‚</li><li>æ‰©å±•æ€§å¥½ï¼Œå¯ä»¥æ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ã€‚</li><li>å¯ä»¥ä¿æŠ¤ã€å¢å¼ºç›®æ ‡å¯¹è±¡ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚</li><li>åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´å¢åŠ ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä¼šé€ æˆè¯·æ±‚å¤„ç†é€Ÿåº¦å˜æ…¢ã€‚</li></ul><h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2><h3 id="ä»£ç†æ–¹å¼"><a href="#ä»£ç†æ–¹å¼" class="headerlink" title="ä»£ç†æ–¹å¼"></a>ä»£ç†æ–¹å¼</h3><ul><li><strong>é™æ€ä»£ç†</strong>ï¼šé€šè¿‡åœ¨ä»£ç ä¸­æ˜¾ç¤ºåœ°å®šä¹‰ä¸€ä¸ªä¸šåŠ¡å®ç°ç±»çš„ä¸€ä¸ªä»£ç†ï¼Œåœ¨ä»£ç†ç±»ä¸­å¯¹åŒåçš„ä¸šåŠ¡æ–¹æ³•è¿›è¡ŒåŒ…è£…ï¼Œç”¨æˆ·é€šè¿‡è°ƒç”¨ä»£ç†ç±»çš„è¢«åŒ…è£…è¿‡çš„ä¸šåŠ¡æ–¹æ³•æ¥è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„ä¸šåŠ¡æ–¹æ³•ã€‚åŒæ—¶å¯¹ç›®æ ‡å¯¹è±¡çš„ä¸šåŠ¡æ–¹æ³•è¿›è¡Œå¢å¼ºã€‚</li><li><strong>JDKåŠ¨æ€ä»£ç†</strong>ï¼šæ˜¯é€šè¿‡æ¥å£ä¸­çš„æ–¹æ³•åï¼Œåœ¨åŠ¨æ€ç”Ÿæˆçš„ä»£ç†ç±»ä¸­è°ƒç”¨ä¸šåŠ¡å®ç°ç±»çš„åŒåæ–¹æ³•ã€‚</li><li><strong>CGLibåŠ¨æ€ä»£ç†</strong>ï¼šæ˜¯é€šè¿‡ç»§æ‰¿æ¥å®ç°çš„ï¼Œç”Ÿæˆçš„åŠ¨æ€ä»£ç†ç±»æ˜¯ä¸šåŠ¡ç±»çš„å­ç±»ï¼Œé€šè¿‡é‡å†™ä¸šåŠ¡æ–¹æ³•è¿›è¡Œä»£ç†ã€‚</li></ul><h3 id="Springä»£ç†é€‰æ‹©"><a href="#Springä»£ç†é€‰æ‹©" class="headerlink" title="Springä»£ç†é€‰æ‹©"></a>Springä»£ç†é€‰æ‹©</h3><ul><li>å½“Springä¸­çš„Beanæœ‰å®ç°æ¥å£æ—¶ï¼ŒSpringä¼šç”¨JDKçš„åŠ¨æ€ä»£ç†ã€‚</li><li>å½“Springä¸­çš„Beanæ²¡æœ‰å®ç°æ¥å£æ—¶ï¼ŒSpringä¼šä½¿ç”¨CGLibåŠ¨æ€ä»£ç†ã€‚</li></ul><p>å¯ä»¥å¼ºåˆ¶Springä½¿ç”¨CGLibåŠ¨æ€ä»£ç†(åœ¨Springçš„é…ç½®ä¸­æ·»åŠ  <code>&lt;aop:aspectj-autoproxy proxy-target-class=&quot;true&quot;</code> )ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-ä»£ç†æ¨¡å¼</a></li><li><a href="https://www.runoob.com/design-pattern/proxy-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-ä»£ç†æ¨¡å¼</a></li><li><a href="https://blog.csdn.net/weixin_41043145/article/details/97613108" target="_blank" rel="noopener">ä»£ç†æ¨¡å¼(é™æ€ä»£ç†ã€åŠ¨æ€ä»£ç†ã€CGLIBä»£ç†)</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç»“æ„å‹-æ¡¥æ¥æ¨¡å¼ (Bridge)</title>
    <link href="https://www.zhaohaihao.com/posts/2020022601.html"/>
    <id>https://www.zhaohaihao.com/posts/2020022601.html</id>
    <published>2020-02-26T00:29:31.000Z</published>
    <updated>2020-04-07T03:30:50.538Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/112-Bridge" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å…·ä½“å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚</p></blockquote><p>æ¡¥æ¥æ¨¡å¼æ˜¯é€šè¿‡ç»„åˆçš„æ–¹å¼å»ºç«‹ä¸¤ä¸ªç±»ä¹‹é—´çš„è”ç³»ï¼Œè€Œä¸æ˜¯é€šè¿‡ç»§æ‰¿ã€‚</p><h1 id="å››ä¸ªè§’è‰²"><a href="#å››ä¸ªè§’è‰²" class="headerlink" title="å››ä¸ªè§’è‰²"></a>å››ä¸ªè§’è‰²</h1><p>æ¡¥æ¥æ¨¡å¼ä¸­ä¸»è¦æœ‰ä»¥ä¸‹å››ä¸ªè§’è‰²ï¼š</p><ul><li><strong>æŠ½è±¡åŒ–è§’è‰²Abstraction</strong>ï¼šå®šä¹‰æŠ½è±¡ç±»ï¼ŒåŒæ—¶åŒ…å«ä¸€ä¸ªå¯¹å®ç°åŒ–å¯¹è±¡çš„å¼•ç”¨ã€‚</li><li><strong>æ‰©å±•æŠ½è±¡åŒ–è§’è‰²Refined Abstraction</strong>ï¼šæŠ½è±¡åŒ–è§’è‰²çš„å­ç±»ï¼Œå®ç°çˆ¶ç±»ä¸­çš„æ–¹æ³•ï¼ŒåŒæ—¶é€šè¿‡ç»„åˆå…³ç³»è°ƒç”¨å®ç°åŒ–è§’è‰²å½“ä¸­çš„æ–¹æ³•ã€‚</li><li><strong>å®ç°åŒ–è§’è‰²Implementor</strong>ï¼šå®šä¹‰å®ç°ç±»çš„æ¥å£ï¼Œä¾›æ‰©å±•æŠ½è±¡åŒ–è§’è‰²è°ƒç”¨ã€‚</li><li><strong>å…·ä½“å®ç°åŒ–è§’è‰²Concrete Implementor</strong>ï¼šå®šä¹‰å®ç°åŒ–è§’è‰²æ¥å£çš„å…·ä½“å®ç°ã€‚</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç¬”è€…è¿™é‡Œç”¨ä¸åŒçš„ç¬”(åœ†ç ç¬”ã€é“…ç¬”)æ¥ç»˜åˆ¶ä¸åŒå›¾å½¢(åœ†å½¢ã€æ­£æ–¹å½¢)æ¥ä¸¾ä¾‹ã€‚</p><p>è¿™é‡Œå…ˆä¸å¼•è¿›æ¡¥æ¥æ¨¡å¼ï¼Œè€Œæ˜¯é‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥å®ç°ã€‚</p><h2 id="åˆ›å»ºæŠ½è±¡ç±»"><a href="#åˆ›å»ºæŠ½è±¡ç±»" class="headerlink" title="åˆ›å»ºæŠ½è±¡ç±»"></a>åˆ›å»ºæŠ½è±¡ç±»</h2><p>è¿™é‡Œåˆ›å»ºä¸€ä¸ªæŠ½è±¡çˆ¶ç±»ï¼Œä¸»è¦æ˜¯ä¸ºäº†åšæ¥å£çº¦æŸã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ç¬”ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 14:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Pen</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¬”çš„åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pen</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæŠ½è±¡å­ç±»"><a href="#åˆ›å»ºæŠ½è±¡å­ç±»" class="headerlink" title="åˆ›å»ºæŠ½è±¡å­ç±»"></a>åˆ›å»ºæŠ½è±¡å­ç±»</h2><p>åˆ›å»ºä¸åŒç¬”ç§çš„æŠ½è±¡å­ç±»ï¼Œç»§æ‰¿æŠ½è±¡çˆ¶ç±» <code>Pen</code> ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> é“…ç¬”ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 14:55</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Pencil</span> <span class="keyword">extends</span> <span class="title">Pen</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pencil</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(<span class="string">"é“…ç¬”"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> åœ†ç ç¬”ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 14:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BallPen</span> <span class="keyword">extends</span> <span class="title">Pen</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BallPen</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(<span class="string">"åœ†ç ç¬”ç±»"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå…·ä½“çš„å®ç°å­ç±»"><a href="#åˆ›å»ºå…·ä½“çš„å®ç°å­ç±»" class="headerlink" title="åˆ›å»ºå…·ä½“çš„å®ç°å­ç±»"></a>åˆ›å»ºå…·ä½“çš„å®ç°å­ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> é“…ç¬”ç”»åœ†ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 14:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CircleWithPencil</span> <span class="keyword">extends</span> <span class="title">Pencil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(getName() + <span class="string">"ç”»åœ†"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> é“…ç¬”ç”»æ­£æ–¹å½¢ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 14:58</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SquareWithPencil</span> <span class="keyword">extends</span> <span class="title">Pencil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(getName() + <span class="string">"ç”»æ­£æ–¹å½¢"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> åœ†ç ç¬”ç”»åœ†ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 14:57</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CircleWithBallPen</span> <span class="keyword">extends</span> <span class="title">BallPen</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(getName() + <span class="string">"ç”»åœ†"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> åœ†ç ç¬”ç”»æ­£æ–¹å½¢ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 14:59</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SquareWithBallPen</span> <span class="keyword">extends</span> <span class="title">BallPen</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(getName() + <span class="string">"ç”»æ­£æ–¹å½¢"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 15:00</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Pen circleWithBallPen = <span class="keyword">new</span> CircleWithBallPen();</span><br><span class="line">        circleWithBallPen.draw();</span><br><span class="line"></span><br><span class="line">        Pen circleWithPencil = <span class="keyword">new</span> CircleWithPencil();</span><br><span class="line">        circleWithPencil.draw();</span><br><span class="line"></span><br><span class="line">        Pen squareWithBallPen = <span class="keyword">new</span> SquareWithBallPen();</span><br><span class="line">        squareWithBallPen.draw();</span><br><span class="line"></span><br><span class="line">        Pen squareWithPencil = <span class="keyword">new</span> SquareWithPencil();</span><br><span class="line">        squareWithPencil.draw();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>åœ†ç ç¬”ç±»ç”»åœ†<br>é“…ç¬”ç”»åœ†<br>åœ†ç ç¬”ç±»ç”»æ­£æ–¹å½¢<br>é“…ç¬”ç”»æ­£æ–¹å½¢</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º</p><p><img src="https://oss.zhaohaihao.com/photo/design-patterns/bridge/bridge01.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="é—®é¢˜æ‰€åœ¨"><a href="#é—®é¢˜æ‰€åœ¨" class="headerlink" title="é—®é¢˜æ‰€åœ¨"></a>é—®é¢˜æ‰€åœ¨</h1><p>ä¸Šè¿°ä»£ç è™½ç„¶èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ã€‚</p><p>å½“æˆ‘ä»¬éœ€è¦æ‰©å±•ä¸€é¡¹å†…å®¹çš„æ—¶å€™ï¼Œæ¯”æ–¹è¯´ï¼Œç”¨å„ç§ç¬”æ¥ç»˜åˆ¶ç›´çº¿å›¾å½¢ï¼Œé‚£è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦åœ¨ç¤ºä¾‹ä¸­çš„æŠ½è±¡å­ç±» <code>Pencil</code> ã€ <code>BallPen</code> å½“ä¸­å„è‡ªå¢åŠ  <code>LineWithPencil</code> ç±»å’Œ <code>LineWithBallPen</code> ç±»ã€‚åˆæˆ–è€…ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å½©ç¬”æ¥ç»˜åˆ¶å„ç§å›¾å½¢ï¼Œé‚£æˆ‘ä»¬éœ€è¦æ–°å¢ä¸€ä¸ªæŠ½è±¡å­ç±» <code>ColourPen</code> ï¼Œç„¶åå†™å‡ºå…¶å…·ä½“å­ç±» <code>CircleWithColourPen</code> ç±»å’Œ <code>SquareWithColourPen</code> ç±»ã€‚</p><p>æ¢å¥è¯ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨ç¬”å’Œå›¾å½¢è¿™ä¸¤ä¸ªç»´åº¦ä¸­ä»»æ„å¢åŠ ä¸€ç§æƒ…å†µï¼Œå°±éœ€è¦å¢åŠ ä¸åŒç»´åº¦æ•°é‡çš„ç±»ã€‚</p><p>å»¶ä¼¸åˆ°å¤šä¸ªç»´åº¦ï¼Œè¿™ç§æ–¹å¼ä¼šå¯¼è‡´ç±»çš„æˆå€çš„å¢åŠ ï¼Œå‘ç”Ÿç±»çˆ†ç‚¸ã€‚åŒæ—¶è¿™ç§è®¾è®¡ä¹Ÿä½¿å¾—ç¨‹åºçš„ä»£ç å˜å¾—ç›¸å½“çš„è‡ƒè‚¿ã€‚å¯è§ç»§æ‰¿åœ¨è¿™ç§åœºæ™¯ä¸­æ˜¯ç›¸å½“éº»çƒ¦çš„ã€‚</p><h1 id="æ–¹æ¡ˆæ”¹è¿›"><a href="#æ–¹æ¡ˆæ”¹è¿›" class="headerlink" title="æ–¹æ¡ˆæ”¹è¿›"></a>æ–¹æ¡ˆæ”¹è¿›</h1><p>ç°åœ¨å¼•å…¥æ¡¥æ¥æ¨¡å¼å¯¹ä¸Šè¿°ç¤ºä¾‹è¿›è¡Œå®ç°ã€‚</p><p>é€šè¿‡ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åˆ†æå¾—çŸ¥ï¼Œè¿™é‡Œå˜åŒ–çš„ä¸»è¦æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªéƒ¨åˆ†æ˜¯ç¬”çš„ç§ç±»ï¼Œå¦ä¸€ä¸ªéƒ¨åˆ†åˆ™æ˜¯å›¾å½¢çš„ç§ç±»ã€‚é€šè¿‡æ¡¥æ¥æ¨¡å¼ï¼Œæˆ‘ä»¬æŠŠè¿™ç§å¤šä¸ªç»´åº¦åˆ†ç¦»å‡ºæ¥ï¼Œè®©å…¶ç‹¬ç«‹çš„å˜åŒ–ï¼Œå‡å°‘ä¹‹é—´çš„è€¦åˆã€‚</p><h2 id="åˆ›å»ºå®ç°åŒ–è§’è‰²"><a href="#åˆ›å»ºå®ç°åŒ–è§’è‰²" class="headerlink" title="åˆ›å»ºå®ç°åŒ–è§’è‰²"></a>åˆ›å»ºå®ç°åŒ–è§’è‰²</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å›¾å½¢ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 14:57</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">draw</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå…·ä½“å®ç°åŒ–è§’è‰²"><a href="#åˆ›å»ºå…·ä½“å®ç°åŒ–è§’è‰²" class="headerlink" title="åˆ›å»ºå…·ä½“å®ç°åŒ–è§’è‰²"></a>åˆ›å»ºå…·ä½“å®ç°åŒ–è§’è‰²</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> åœ†å½¢ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 14:57</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"ç”»åœ†"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ­£æ–¹å½¢ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 14:57</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"ç”»æ­£æ–¹å½¢"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæŠ½è±¡åŒ–è§’è‰²"><a href="#åˆ›å»ºæŠ½è±¡åŒ–è§’è‰²" class="headerlink" title="åˆ›å»ºæŠ½è±¡åŒ–è§’è‰²"></a>åˆ›å»ºæŠ½è±¡åŒ–è§’è‰²</h2><p>æ­¤å¤„æŠ½è±¡åŒ–è§’è‰²é€šè¿‡ç»„åˆçš„æ–¹å¼ï¼ŒåŒ…å«äº†ä¸€ä¸ªå¯¹å®ç°åŒ–è§’è‰²çš„å¼•ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ç¬”ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 14:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Pen</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å›¾å½¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> Shape shape;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pen</span><span class="params">(Shape shape)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.shape = shape;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæ‰©å±•æŠ½è±¡åŒ–è§’è‰²"><a href="#åˆ›å»ºæ‰©å±•æŠ½è±¡åŒ–è§’è‰²" class="headerlink" title="åˆ›å»ºæ‰©å±•æŠ½è±¡åŒ–è§’è‰²"></a>åˆ›å»ºæ‰©å±•æŠ½è±¡åŒ–è§’è‰²</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> é“…ç¬”ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 14:55</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pencil</span> <span class="keyword">extends</span> <span class="title">Pen</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pencil</span><span class="params">(Shape shape)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(shape);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"é“…ç¬”"</span> + <span class="keyword">super</span>.shape.draw());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> åœ†ç ç¬”ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 14:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BallPen</span> <span class="keyword">extends</span> <span class="title">Pen</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BallPen</span><span class="params">(Shape shape)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(shape);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"åœ†ç ç¬”"</span> + <span class="keyword">super</span>.shape.draw());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º-1"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º-1" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-26 15:00</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Pen ballPen1 = <span class="keyword">new</span> BallPen(<span class="keyword">new</span> Circle());</span><br><span class="line">        ballPen1.draw();</span><br><span class="line"></span><br><span class="line">        Pen ballPen2 = <span class="keyword">new</span> BallPen(<span class="keyword">new</span> Square());</span><br><span class="line">        ballPen2.draw();</span><br><span class="line"></span><br><span class="line">        Pencil pencil1 = <span class="keyword">new</span> Pencil(<span class="keyword">new</span> Circle());</span><br><span class="line">        pencil1.draw();</span><br><span class="line"></span><br><span class="line">        Pencil pencil2 = <span class="keyword">new</span> Pencil(<span class="keyword">new</span> Square());</span><br><span class="line">        pencil2.draw();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>åœ†ç ç¬”ç”»åœ†<br>åœ†ç ç¬”ç”»æ­£æ–¹å½¢<br>é“…ç¬”ç”»åœ†<br>é“…ç¬”ç”»æ­£æ–¹å½¢</p></blockquote><h2 id="ç±»ç»“æ„å›¾-1"><a href="#ç±»ç»“æ„å›¾-1" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º</p><p><img src="https://oss.zhaohaihao.com/photo/design-patterns/bridge/bridge02.png?x-oss-process=style/style01" alt="image.png"></p><p>é€šè¿‡ç±»å›¾æˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°å®ç°åŒ–è§’è‰² <code>Shape</code> å’ŒæŠ½è±¡åŒ–è§’è‰² <code>Pen</code> ä¹‹é—´æ˜¯ä¸€æ¯”ä¸€çš„ç»„åˆå…³ç³»ï¼Œä¸¤è€…éƒ½å¯ä»¥ç‹¬ç«‹çš„æ‰©å±•è‡ªå·±ã€‚å¦‚è®ºä¸¤è€…å¦‚ä½•è¿›è¡Œç»„åˆï¼Œéƒ½ä¸ä¼šå‘ç”Ÿç±»çˆ†ç‚¸çš„æƒ…å†µã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>åœ¨æŠ½è±¡éƒ¨åˆ†å’Œå…·ä½“å®ç°éƒ¨åˆ†ä¹‹é—´éœ€è¦å¢åŠ æ›´å¤šçš„çµæ´»æ€§ã€‚</li><li>ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ª(æˆ–è€…å¤šä¸ª)ç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ª(æˆ–è€…å¤šä¸ª)ç»´åº¦éƒ½éœ€è¦ç‹¬ç«‹åœ°è¿›è¡Œæ‰©å±•ã€‚</li><li>ç”±äºå¤šå±‚ç»§æ‰¿å¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°å‰§å¢ï¼Œæˆ–è€…è¯´ä¸æƒ³ä½¿ç”¨ç»§æ‰¿ã€‚</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>æŠ½è±¡éƒ¨åˆ†å’Œå…·ä½“å®ç°éƒ¨åˆ†åˆ†ç¦»</li><li>æé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§</li><li>é¿å…ç±»çˆ†ç‚¸</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>å¢åŠ äº†ç³»ç»Ÿçš„ç†è§£ä¸è®¾è®¡éš¾åº¦</li><li>ä½¿ç”¨èŒƒå›´å…·æœ‰å±€é™æ€§ï¼Œéœ€è¦è¯†åˆ«å‡ºç³»ç»Ÿä¸­ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦</li></ul><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E6%A9%8B%E6%8E%A5%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-æ¡¥æ¥æ¨¡å¼</a></li><li><a href="https://www.runoob.com/design-pattern/bridge-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-æ¡¥æ¥æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç»“æ„å‹-ç»„åˆæ¨¡å¼ (Composite)</title>
    <link href="https://www.zhaohaihao.com/posts/2020022201.html"/>
    <id>https://www.zhaohaihao.com/posts/2020022201.html</id>
    <published>2020-02-22T12:12:38.000Z</published>
    <updated>2020-04-07T03:30:29.493Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/111-Composite" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ã€‚</p></blockquote><p>ç»„åˆæ¨¡å¼ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</p><h1 id="æ¨¡å¼ä¸­çš„è§’è‰²"><a href="#æ¨¡å¼ä¸­çš„è§’è‰²" class="headerlink" title="æ¨¡å¼ä¸­çš„è§’è‰²"></a>æ¨¡å¼ä¸­çš„è§’è‰²</h1><ul><li><strong>æŠ½è±¡æ„ä»¶Component</strong>ï¼šä¸ºç»„åˆä¸­çš„å¶èŠ‚ç‚¹å¯¹è±¡å’Œåˆ†æ”¯èŠ‚ç‚¹å¯¹è±¡å£°æ˜å…¬å…±æ¥å£å¹¶å®ç°å®ƒä»¬çš„é»˜è®¤è¡Œä¸ºã€‚</li><li><strong>æ ‘å¶æ„ä»¶Leaf</strong>ï¼šæ˜¯ç»„åˆä¸­çš„å¶èŠ‚ç‚¹å¯¹è±¡ï¼Œå¶èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ã€‚</li><li><strong>æ ‘ææ„ä»¶Composite</strong>ï¼šæ˜¯ç»„åˆä¸­çš„åˆ†æ”¯èŠ‚ç‚¹å¯¹è±¡ï¼Œå®šä¹‰ç»„ä»¶çš„è¡Œä¸ºï¼Œæ‹¥æœ‰å­èŠ‚ç‚¹ã€‚</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç¬”è€…è¿™é‡Œä»¥æ—§ç‰ˆä¸ªäººåšå®¢çš„å¯¼èˆªèœå•æ¥ä¸¾ä¾‹ã€‚ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://oss.zhaohaihao.com/photo/design-patterns/composite/composite01.png?x-oss-process=style/style01" alt="image.png"></p><p>é¦–é¡µã€ä¸“é¢˜æ¨èã€è®¾è®¡æ¨¡å¼ã€Spring Cloudè¿™äº›å¯ä»¥çœ‹ä½œå…·ä½“èœå•é¡¹ã€‚ç¼–ç¨‹æ‰‹å†Œåˆ™å¯ä»¥çœ‹ä½œä¸€ä¸ªèœå•ç›®å½•ï¼Œèœå•ç›®å½•ä¸‹æ‹¥æœ‰è®¾è®¡æ¨¡å¼å’ŒSpring Cloudè¿™äº›èœå•é¡¹ã€‚</p><p>èœå•é¡¹æ˜¯åŒ…å«å…·ä½“çš„é¡µé¢è®¿é—®åœ°å€çš„ã€‚</p><h2 id="åˆ›å»ºèœå•ç»„ä»¶ç±»"><a href="#åˆ›å»ºèœå•ç»„ä»¶ç±»" class="headerlink" title="åˆ›å»ºèœå•ç»„ä»¶ç±»"></a>åˆ›å»ºèœå•ç»„ä»¶ç±»</h2><p>åˆ›å»ºä¸€ä¸ªèœå•ç»„ä»¶çš„æŠ½è±¡ç±»ï¼Œå†…éƒ¨åŒ…å«ä¸€äº›é»˜è®¤å®ç°ï¼Œäº¤ç”±å­ç±»å†³å®šæ˜¯å¦é‡å†™ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> èœå•ç»„ä»¶ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-22 11:13</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuComponent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">"ä¸æ”¯æŒæ·»åŠ æ“ä½œ"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">"ä¸æ”¯æŒåˆ é™¤æ“ä½œ"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUrl</span><span class="params">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">"ä¸æ”¯æŒè·å–åœ°å€æ“ä½œ"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">getName</span><span class="params">(MenuComponent menuComponent)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºèœå•é¡¹ç±»"><a href="#åˆ›å»ºèœå•é¡¹ç±»" class="headerlink" title="åˆ›å»ºèœå•é¡¹ç±»"></a>åˆ›å»ºèœå•é¡¹ç±»</h2><p>è¿™é‡Œèœå•é¡¹åŒ…å«åç§°å’Œé¡µé¢è®¿é—®åœ°å€ä¸¤ä¸ªå±æ€§ã€‚èœå•é¡¹æ˜¯ä¸èƒ½è¿›è¡Œèœå•çš„ <code>add</code> å’Œ <code>remove</code> æ“ä½œçš„ï¼Œåªæœ‰èœå•ç›®å½•æ˜¯å¯ä»¥çš„ã€‚æ‰€ä»¥è¿™é‡Œä¸é‡å†™ä¸Šè¿°çš„ <code>add</code> å’Œ <code>remove</code> æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> èœå•é¡¹ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-22 11:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuItem</span> <span class="keyword">extends</span> <span class="title">MenuComponent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * èœå•é¡¹åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¡µé¢è®¿é—®åœ°å€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MenuItem</span><span class="params">(String name, String url)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.url = url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUrl</span><span class="params">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"%s, èœå•é¡¹çš„é¡µé¢è®¿é—®åœ°å€æ˜¯: %s"</span>, name, url));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºèœå•ç›®å½•ç±»"><a href="#åˆ›å»ºèœå•ç›®å½•ç±»" class="headerlink" title="åˆ›å»ºèœå•ç›®å½•ç±»"></a>åˆ›å»ºèœå•ç›®å½•ç±»</h2><p>èœå•ç›®å½•ä¸­å¯ä»¥åŒ…å«å¾ˆå¤šçš„èœå•é¡¹ï¼Œè€Œèœå•é¡¹åˆæ˜¯ä½œä¸ºèœå•ç»„ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå®¹å™¨å±æ€§å»æŒæœ‰è¿™äº›èœå•ç»„ä»¶ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> èœå•ç›®å½•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-22 15:03</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuCatalog</span> <span class="keyword">extends</span> <span class="title">MenuComponent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * èœå•ç›®å½•åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * èœå•ç›®å½•å±‚çº§, æ–¹ä¾¿åŒºåˆ†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer level;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­èœå•é¡¹åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;MenuComponent&gt; menuItems = <span class="keyword">new</span> ArrayList&lt;MenuComponent&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MenuCatalog</span><span class="params">(String name, Integer level)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.level = level;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class="line">        menuItems.add(menuComponent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class="line">        menuItems.remove(menuComponent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.name);</span><br><span class="line">        <span class="keyword">for</span> (MenuComponent menuComponent : menuItems) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.level != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.level; i++) &#123;</span><br><span class="line">                    System.out.print(<span class="string">"*"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            menuComponent.print();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-22 15:15</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String site = <span class="string">"www.zhaohaihao.com"</span>;</span><br><span class="line">        <span class="comment">// é¦–é¡µ</span></span><br><span class="line">        MenuComponent index = <span class="keyword">new</span> MenuItem(<span class="string">"é¦–é¡µ"</span>, site);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¼–ç¨‹æ‰‹å†Œ</span></span><br><span class="line">        MenuComponent programmingManual = <span class="keyword">new</span> MenuCatalog(<span class="string">"ç¼–ç¨‹æ‰‹å†Œ"</span>, <span class="number">2</span>);</span><br><span class="line">        programmingManual.add(<span class="keyword">new</span> MenuItem(<span class="string">"è®¾è®¡æ¨¡å¼"</span>, site + <span class="string">"/category/design-patterns"</span>));</span><br><span class="line">        programmingManual.add(<span class="keyword">new</span> MenuItem(<span class="string">"Spring Cloud"</span>, site + <span class="string">"/category/spring-cloud"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸»é¢˜æ¨è</span></span><br><span class="line">        MenuComponent topic = <span class="keyword">new</span> MenuItem(<span class="string">"ä¸»é¢˜æ¨è"</span>, site + <span class="string">"/topic"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç½‘ç«™å¯¼èˆªæ , é¡¶çº§ç›®å½•, ç›®å½•å±‚çº§ç”¨1æ ‡è®°</span></span><br><span class="line">        MenuComponent main = <span class="keyword">new</span> MenuCatalog(<span class="string">"ç½‘ç«™å¯¼èˆªç›®å½•"</span>, <span class="number">1</span>);</span><br><span class="line">        main.add(index);</span><br><span class="line">        main.add(programmingManual);</span><br><span class="line">        main.add(topic);</span><br><span class="line"></span><br><span class="line">        main.print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>ç½‘ç«™å¯¼èˆªç›®å½•<br>*é¦–é¡µ, èœå•é¡¹çš„é¡µé¢è®¿é—®åœ°å€æ˜¯: <a href="http://www.zhaohaihao.com">www.zhaohaihao.com</a><br>*ç¼–ç¨‹æ‰‹å†Œ<br>**è®¾è®¡æ¨¡å¼, èœå•é¡¹çš„é¡µé¢è®¿é—®åœ°å€æ˜¯: <a href="http://www.zhaohaihao.com/category/design-patterns">www.zhaohaihao.com/category/design-patterns</a><br>**Spring Cloud, èœå•é¡¹çš„é¡µé¢è®¿é—®åœ°å€æ˜¯: <a href="http://www.zhaohaihao.com/category/spring-cloud">www.zhaohaihao.com/category/spring-cloud</a><br>*ä¸»é¢˜æ¨è, èœå•é¡¹çš„é¡µé¢è®¿é—®åœ°å€æ˜¯: <a href="http://www.zhaohaihao.com/topic">www.zhaohaihao.com/topic</a></p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º</p><p><img src="https://oss.zhaohaihao.com/photo/design-patterns/composite/composite02.png?x-oss-process=style/style01" alt="image.png"></p><p>ç”±äºèœå•é¡¹ç±»å’Œèœå•ç›®å½•ç±»éƒ½ç»§æ‰¿äº†èœå•ç»„ä»¶ç±»ï¼Œå®ƒä»¬ç»§æ‰¿äº†èœå•ç»„ä»¶çš„æ‰€æœ‰è¡Œä¸ºã€‚</p><h1 id="é€æ˜æ–¹å¼ä¸å®‰å…¨æ–¹å¼"><a href="#é€æ˜æ–¹å¼ä¸å®‰å…¨æ–¹å¼" class="headerlink" title="é€æ˜æ–¹å¼ä¸å®‰å…¨æ–¹å¼"></a>é€æ˜æ–¹å¼ä¸å®‰å…¨æ–¹å¼</h1><p>ç»„åˆæ¨¡å¼æœ‰é€æ˜æ–¹å¼å’Œå®‰å…¨æ–¹å¼ä¸¤ç§ã€‚</p><h2 id="é€æ˜æ–¹å¼"><a href="#é€æ˜æ–¹å¼" class="headerlink" title="é€æ˜æ–¹å¼"></a>é€æ˜æ–¹å¼</h2><p>æŠ½è±¡æ„ä»¶å£°æ˜äº†æ‰€æœ‰å­ç±»çš„å…¨éƒ¨æ–¹æ³•ï¼Œå®¢æˆ·ç«¯æ— éœ€åŒºåˆ†å¶èŠ‚ç‚¹å¯¹è±¡å’Œåˆ†æ”¯èŠ‚ç‚¹å¯¹è±¡ï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´æ˜¯é€æ˜çš„ã€‚</p><p>ä½†æ˜¯å¶èŠ‚ç‚¹å¯¹è±¡æœ¬èº«ä¸åŒ…å«å­èŠ‚ç‚¹ï¼Œè€ŒæŠ½è±¡æ„ä»¶åˆå£°æ˜å®ç°äº†ä¸€äº›é’ˆå¯¹äºå­èŠ‚ç‚¹çš„ <code>add</code> ã€ <code>remove</code> ç­‰æ“ä½œï¼Œè¿™æ ·ä¼šå¸¦æ¥ä¸€äº›å®‰å…¨æ€§çš„é—®é¢˜ã€‚</p><h2 id="å®‰å…¨æ–¹å¼"><a href="#å®‰å…¨æ–¹å¼" class="headerlink" title="å®‰å…¨æ–¹å¼"></a>å®‰å…¨æ–¹å¼</h2><p>å®‰å…¨æ–¹å¼ä¸é€æ˜æ–¹å¼ç›¸åã€‚</p><p>å…¶å°†é’ˆå¯¹äºå­èŠ‚ç‚¹çš„ <code>add</code> ã€ <code>remove</code> ç­‰æ“ä½œç§»åˆ°äº†åˆ†æ”¯èŠ‚ç‚¹å¯¹è±¡ä¸­ï¼Œè€ŒæŠ½è±¡æ„ä»¶å’Œå¶èŠ‚ç‚¹å¯¹è±¡å¹¶ä¸åŒ…å«è¿™äº›æ–¹æ³•ï¼Œè¿™æ ·ä¸€æ¥å°±é¿å…äº†é€æ˜æ–¹å¼æ‰€å¸¦æ¥çš„å®‰å…¨æ€§é—®é¢˜ã€‚</p><p>ä½†æ˜¯ç”±äºåˆ†æ”¯èŠ‚ç‚¹å¯¹è±¡å’Œå¶èŠ‚ç‚¹å¯¹è±¡æ¥å£è¡Œä¸ºçš„ä¸åŒï¼Œå®¢æˆ·ç«¯éœ€è¦åŒºåˆ†å¶èŠ‚ç‚¹å¯¹è±¡å’Œåˆ†æ”¯èŠ‚ç‚¹å¯¹è±¡ï¼Œæ‰€ä»¥å°±å¤±å»äº†é€æ˜æ€§ã€‚</p><h1 id="å®‰å…¨æ–¹å¼å®ç°"><a href="#å®‰å…¨æ–¹å¼å®ç°" class="headerlink" title="å®‰å…¨æ–¹å¼å®ç°"></a>å®‰å…¨æ–¹å¼å®ç°</h1><p>ä¸Šè¿°åœºæ™¯ç¤ºä¾‹ä¸­çš„ä»£ç å®é™…ä¸Šæ˜¯é€æ˜æ–¹å¼çš„ç»„åˆæ¨¡å¼ã€‚ç¬”è€…è¿™é‡Œå¯¹ä¸Šè¿°åœºæ™¯ç¤ºä¾‹ä»£ç è¿›è¡Œè°ƒæ•´ï¼Œä½¿ç”¨å®‰å…¨æ–¹å¼çš„ç»„åˆæ¨¡å¼æ¥å®ç°ã€‚</p><h2 id="è°ƒæ•´èœå•ç»„ä»¶ç±»"><a href="#è°ƒæ•´èœå•ç»„ä»¶ç±»" class="headerlink" title="è°ƒæ•´èœå•ç»„ä»¶ç±»"></a>è°ƒæ•´èœå•ç»„ä»¶ç±»</h2><p>ç§»é™¤èœå•ç»„ä»¶ä¸­çš„ <code>add</code> ã€ <code>remove</code> ã€ <code>getUrl</code> ç­‰æ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuComponent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">getName</span><span class="params">(MenuComponent menuComponent)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">"ä¸æ”¯æŒæ‰“å°æ“ä½œ"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è°ƒæ•´èœå•é¡¹ç±»"><a href="#è°ƒæ•´èœå•é¡¹ç±»" class="headerlink" title="è°ƒæ•´èœå•é¡¹ç±»"></a>è°ƒæ•´èœå•é¡¹ç±»</h2><p>èœå•é¡¹å®ç° <code>getUrl</code> æ–¹æ³•ï¼Œè€Œèœå•ç›®å½•åˆ™ä¸å®ç°è¯¥æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuItem</span> <span class="keyword">extends</span> <span class="title">MenuComponent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * èœå•é¡¹åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¡µé¢è®¿é—®åœ°å€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MenuItem</span><span class="params">(String name, String url)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.url = url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUrl</span><span class="params">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"%s, èœå•é¡¹çš„é¡µé¢è®¿é—®åœ°å€æ˜¯: %s"</span>, name, url));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è°ƒæ•´èœå•ç›®å½•ç±»"><a href="#è°ƒæ•´èœå•ç›®å½•ç±»" class="headerlink" title="è°ƒæ•´èœå•ç›®å½•ç±»"></a>è°ƒæ•´èœå•ç›®å½•ç±»</h2><p>èœå•ç›®å½•å®ç° <code>add</code> ã€ <code>remove</code> æ–¹æ³•ï¼Œè€Œèœå•é¡¹åˆ™ä¸å®ç°è¯¥æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuCatalog</span> <span class="keyword">extends</span> <span class="title">MenuComponent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * èœå•ç›®å½•åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * èœå•ç›®å½•å±‚çº§, æ–¹ä¾¿åŒºåˆ†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer level;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­èœå•é¡¹åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;MenuComponent&gt; menuItems = <span class="keyword">new</span> ArrayList&lt;MenuComponent&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MenuCatalog</span><span class="params">(String name, Integer level)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.level = level;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class="line">        menuItems.add(menuComponent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class="line">        menuItems.remove(menuComponent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">(MenuComponent menuComponent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.name);</span><br><span class="line">        <span class="keyword">for</span> (MenuComponent menuComponent : menuItems) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.level != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.level; i++) &#123;</span><br><span class="line">                    System.out.print(<span class="string">"*"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            menuComponent.print();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è°ƒæ•´æµ‹è¯•ç±»"><a href="#è°ƒæ•´æµ‹è¯•ç±»" class="headerlink" title="è°ƒæ•´æµ‹è¯•ç±»"></a>è°ƒæ•´æµ‹è¯•ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String site = <span class="string">"www.zhaohaihao.com"</span>;</span><br><span class="line">        <span class="comment">// é¦–é¡µ</span></span><br><span class="line">        MenuComponent index = <span class="keyword">new</span> MenuItem(<span class="string">"é¦–é¡µ"</span>, site);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¼–ç¨‹æ‰‹å†Œ</span></span><br><span class="line">        MenuCatalog programmingManual = <span class="keyword">new</span> MenuCatalog(<span class="string">"ç¼–ç¨‹æ‰‹å†Œ"</span>, <span class="number">2</span>);</span><br><span class="line">        programmingManual.add(<span class="keyword">new</span> MenuItem(<span class="string">"è®¾è®¡æ¨¡å¼"</span>, site + <span class="string">"/category/design-patterns"</span>));</span><br><span class="line">        programmingManual.add(<span class="keyword">new</span> MenuItem(<span class="string">"Spring Cloud"</span>, site + <span class="string">"/category/spring-cloud"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸»é¢˜æ¨è</span></span><br><span class="line">        MenuComponent topic = <span class="keyword">new</span> MenuItem(<span class="string">"ä¸»é¢˜æ¨è"</span>, site + <span class="string">"/topic"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç½‘ç«™å¯¼èˆªæ , é¡¶çº§ç›®å½•, ç›®å½•å±‚çº§ç”¨1æ ‡è®°</span></span><br><span class="line">        MenuCatalog main = <span class="keyword">new</span> MenuCatalog(<span class="string">"ç½‘ç«™å¯¼èˆªç›®å½•"</span>, <span class="number">1</span>);</span><br><span class="line">        main.add(index);</span><br><span class="line">        main.add(programmingManual);</span><br><span class="line">        main.add(topic);</span><br><span class="line"></span><br><span class="line">        main.print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç±»ç»“æ„å›¾-1"><a href="#ç±»ç»“æ„å›¾-1" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä¸Šè¿°è°ƒæ•´åç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/composite/composite03.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>éœ€æ±‚ä¸­ä½“ç°éƒ¨åˆ†ä¸æ•´ä½“å±‚æ¬¡çš„ç»“æ„ã€‚</li><li>å¸Œæœ›ç”¨æˆ·èƒ½å¤Ÿå¿½ç•¥ç»„åˆå¯¹è±¡ä¸å•ä¸ªå¯¹è±¡çš„å·®å¼‚ï¼Œç»Ÿä¸€åœ°ä½¿ç”¨ç»„åˆç»“æ„ä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>èƒ½å¤Ÿæ¸…æ¥šåœ°å®šä¹‰åˆ†å±‚æ¬¡çš„å¤æ‚å¯¹è±¡</li><li>è®©ç”¨æˆ·å¿½ç•¥å±‚æ¬¡çš„å·®å¼‚ï¼Œæ–¹ä¾¿å¯¹æ•´ä¸ªå±‚æ¬¡ç»“æ„è¿›è¡Œæ§åˆ¶</li><li>ç®€åŒ–å®¢æˆ·ç«¯ä»£ç </li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>é™åˆ¶ç±»å‹æ—¶ä¼šæ¯”è¾ƒå¤æ‚</li><li>ä½¿è®¾è®¡å˜å¾—æ›´åŠ æŠ½è±¡</li></ul><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://www.runoob.com/design-pattern/composite-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-ç»„åˆæ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç»“æ„å‹-äº«å…ƒæ¨¡å¼ (Flyweight)</title>
    <link href="https://www.zhaohaihao.com/posts/2020021601.html"/>
    <id>https://www.zhaohaihao.com/posts/2020021601.html</id>
    <published>2020-02-16T06:15:55.000Z</published>
    <updated>2020-04-07T03:30:37.495Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/110-Flyweight" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>è¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ã€‚</p></blockquote><p>â€œäº«â€å³å…±äº«ï¼Œâ€œå…ƒâ€æŒ‡çš„æ˜¯å…ƒä»¶ï¼Œä¹Ÿå°±æ˜¯å°é¢—ç²’çš„ä¸œè¥¿ã€‚â€œäº«å…ƒâ€é¡¾åæ€ä¹‰å°±æ˜¯å…±äº«å°éƒ¨ä»¶ã€‚</p><p>å¾ˆå¤šçš„ç³»ç»Ÿç¨‹åºåŒ…å«å¤§é‡çš„å¯¹è±¡ï¼Œä½†æ˜¯è¿™äº›å¯¹è±¡ç»å¤§å¤šæ•°éƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œé™¤äº†ä¸€äº›æä¸ªåˆ«çš„å±æ€§å¤–ã€‚</p><p>é‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªç³»ç»Ÿç¨‹åºä¸­æœ‰å¤šä¸ªç›¸åŒå¯¹è±¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦å…±äº«ä¸€ä»½å°±å¯ä»¥äº†ï¼Œä¸å¿…å»å®ä¾‹åŒ–æ¯ä¸€ä¸ªå¯¹è±¡ã€‚</p><h1 id="å†…éƒ¨çŠ¶æ€ä¸å¤–éƒ¨çŠ¶æ€"><a href="#å†…éƒ¨çŠ¶æ€ä¸å¤–éƒ¨çŠ¶æ€" class="headerlink" title="å†…éƒ¨çŠ¶æ€ä¸å¤–éƒ¨çŠ¶æ€"></a>å†…éƒ¨çŠ¶æ€ä¸å¤–éƒ¨çŠ¶æ€</h1><p>äº«å…ƒæ¨¡å¼æ˜¯åŒºåˆ†å†…éƒ¨çŠ¶æ€ä¸å¤–éƒ¨çŠ¶æ€çš„ï¼š</p><ul><li><strong>å†…éƒ¨çŠ¶æ€ï¼š</strong>å¯ä»¥å…±äº«ï¼Œåœ¨äº«å…ƒå¯¹è±¡çš„å†…éƒ¨ï¼ŒçŠ¶æ€ä¸ä¼šéšç€ç¯å¢ƒæ”¹å˜è€Œæ”¹å˜</li><li><strong>å¤–éƒ¨çŠ¶æ€ï¼š</strong>ä¸å¯ä»¥å…±äº«ï¼Œåœ¨äº«å…ƒå¯¹è±¡çš„å¤–éƒ¨ï¼ŒçŠ¶æ€ä¼šéšç€ç¯å¢ƒæ”¹å˜è€Œæ”¹å˜</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç¬”è€…è¿™é‡Œä»¥è¡£æœä¸ºä¾‹ã€‚å°†è¡£æœçš„å“ç‰Œä½œä¸ºå†…éƒ¨å±æ€§å…±äº«ï¼Œå°†è¡£æœçš„å¤§å°ã€æˆåˆ†ã€ä»·æ ¼ä½œä¸ºå¤–éƒ¨å±æ€§ä½¿ç”¨ã€‚</p><h2 id="åˆ›å»ºè¡£æœç±»"><a href="#åˆ›å»ºè¡£æœç±»" class="headerlink" title="åˆ›å»ºè¡£æœç±»"></a>åˆ›å»ºè¡£æœç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> è¡£æœç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-16 22:36</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Clothes</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¡£æœä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">info</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºè¡¬è¡£ç±»"><a href="#åˆ›å»ºè¡¬è¡£ç±»" class="headerlink" title="åˆ›å»ºè¡¬è¡£ç±»"></a>åˆ›å»ºè¡¬è¡£ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> è¡¬è¡£ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-16 22:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shirt</span> <span class="keyword">implements</span> <span class="title">Clothes</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å“ç‰Œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String brand;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤§å°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆåˆ†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String component;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»·æ ¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String price;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Shirt</span><span class="params">(String brand)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.brand = brand;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSize</span><span class="params">(String size)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.size = size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setComponent</span><span class="params">(String component)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.component = component;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(String price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">info</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"å½“å‰è¡¬è¡£ä¿¡æ¯: &#123;å“ç‰Œ: %s, å¤§å°: %s, æˆåˆ†: %s, ä»·æ ¼: %s&#125;"</span>, brand, size, component, price));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¯¥åœºæ™¯ä¸­ï¼Œç¬”è€…å°†å“ç‰Œå±æ€§ä½œä¸ºå…¶å†…éƒ¨çŠ¶æ€ï¼Œåœ¨å¯¹è±¡åˆ›å»ºçš„åˆæœŸå°±åˆå§‹åŒ–å®Œæˆï¼ŒçŠ¶æ€ä¸ä¼šéšç€å¤–éƒ¨ç¯å¢ƒå˜åŒ–ï¼Œå¯ä»¥å…±äº«ã€‚</p><p>è€Œå°†å¤§å°ã€æˆåˆ†ã€ä»·æ ¼è¿™äº›å±æ€§å½“åšå¤–éƒ¨çŠ¶æ€ï¼Œé€šè¿‡ <code>setter</code> æ–¹æ³•ä¾›å¤–éƒ¨ä¿®æ”¹ï¼ŒçŠ¶æ€ä¼šéšå¤–éƒ¨ç¯å¢ƒå˜åŒ–ï¼Œè¿™äº›å±æ€§ä¸èƒ½å¤Ÿå…±äº«ã€‚</p><h2 id="åˆ›å»ºè¡¬è¡£å·¥å‚ç±»"><a href="#åˆ›å»ºè¡¬è¡£å·¥å‚ç±»" class="headerlink" title="åˆ›å»ºè¡¬è¡£å·¥å‚ç±»"></a>åˆ›å»ºè¡¬è¡£å·¥å‚ç±»</h2><p>äº«å…ƒæ¨¡å¼ä¸­é€šå¸¸ä¼šå‡ºç°å·¥å‚æ¨¡å¼ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªäº«å…ƒå·¥å‚æ¥è´Ÿè´£ç»´æŠ¤ä¸€ä¸ªäº«å…ƒæ± ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> è¡£æœå·¥å‚ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-16 22:48</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClothesFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String, Clothes&gt; CLOTHES_MAP = <span class="keyword">new</span> HashMap&lt;String, Clothes&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–è¡¬è¡£</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> brand å“ç‰Œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Clothes <span class="title">getShirt</span><span class="params">(String brand)</span> </span>&#123;</span><br><span class="line">        Shirt shirt = (Shirt) CLOTHES_MAP.get(brand);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (shirt == <span class="keyword">null</span>) &#123;</span><br><span class="line">            shirt = <span class="keyword">new</span> Shirt(brand);</span><br><span class="line">            CLOTHES_MAP.put(brand, shirt);</span><br><span class="line">            System.out.println(<span class="string">"åˆ›å»ºæ–°çš„å“ç‰Œè¡¬è¡£, å“ç‰Œä¸º: "</span> + brand);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> shirt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><p>æ–¹ä¾¿èµ·è§ï¼Œåœ¨è¯¥æµ‹è¯•ç±»ä¸­éšæœºæ¨¡æ‹Ÿæ•°æ®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-16 23:04</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] BRAND = &#123;<span class="string">"YOUNGORé›…æˆˆå°”"</span>, <span class="string">"FIRSæ‰æ‰"</span>, <span class="string">"ROMONç½—è’™"</span>, <span class="string">"Hodoçº¢è±†"</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] SIZE = &#123;<span class="string">"S"</span>, <span class="string">"M"</span>, <span class="string">"L"</span>, <span class="string">"XL"</span>, <span class="string">"XXL"</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] COMPONENT = &#123;<span class="string">"æ£‰"</span>, <span class="string">"æ¶¤çº¶"</span>, <span class="string">"çœŸä¸"</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] PRICE = &#123; <span class="string">"ï¿¥99"</span>, <span class="string">"ï¿¥129"</span>, <span class="string">"ï¿¥149"</span>, <span class="string">"ï¿¥199"</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éšæœºæ¨¡æ‹Ÿ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> strs éšæœºæ¨¡æ‹Ÿæ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getRandom</span><span class="params">(String[] strs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> strs[<span class="keyword">new</span> Random().nextInt(strs.length)];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            Shirt shirt = (Shirt) ClothesFactory.getShirt(getRandom(BRAND));</span><br><span class="line">            shirt.setSize(getRandom(SIZE));</span><br><span class="line">            shirt.setComponent(getRandom(COMPONENT));</span><br><span class="line">            shirt.setPrice(getRandom(PRICE));</span><br><span class="line">            shirt.info();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>åˆ›å»ºæ–°çš„å“ç‰Œè¡¬è¡£, å“ç‰Œä¸º: ROMONç½—è’™<br>å½“å‰è¡¬è¡£ä¿¡æ¯: {å“ç‰Œ: ROMONç½—è’™, å¤§å°: M, æˆåˆ†: çœŸä¸, ä»·æ ¼: ï¿¥129}<br>åˆ›å»ºæ–°çš„å“ç‰Œè¡¬è¡£, å“ç‰Œä¸º: FIRSæ‰æ‰<br>å½“å‰è¡¬è¡£ä¿¡æ¯: {å“ç‰Œ: FIRSæ‰æ‰, å¤§å°: S, æˆåˆ†: æ£‰, ä»·æ ¼: ï¿¥199}<br>å½“å‰è¡¬è¡£ä¿¡æ¯: {å“ç‰Œ: ROMONç½—è’™, å¤§å°: M, æˆåˆ†: æ£‰, ä»·æ ¼: ï¿¥99}<br>åˆ›å»ºæ–°çš„å“ç‰Œè¡¬è¡£, å“ç‰Œä¸º: Hodoçº¢è±†<br>å½“å‰è¡¬è¡£ä¿¡æ¯: {å“ç‰Œ: Hodoçº¢è±†, å¤§å°: M, æˆåˆ†: æ£‰, ä»·æ ¼: ï¿¥99}<br>å½“å‰è¡¬è¡£ä¿¡æ¯: {å“ç‰Œ: FIRSæ‰æ‰, å¤§å°: XL, æˆåˆ†: çœŸä¸, ä»·æ ¼: ï¿¥99}<br>å½“å‰è¡¬è¡£ä¿¡æ¯: {å“ç‰Œ: ROMONç½—è’™, å¤§å°: XXL, æˆåˆ†: çœŸä¸, ä»·æ ¼: ï¿¥99}<br>å½“å‰è¡¬è¡£ä¿¡æ¯: {å“ç‰Œ: Hodoçº¢è±†, å¤§å°: M, æˆåˆ†: çœŸä¸, ä»·æ ¼: ï¿¥99}<br>å½“å‰è¡¬è¡£ä¿¡æ¯: {å“ç‰Œ: Hodoçº¢è±†, å¤§å°: M, æˆåˆ†: æ¶¤çº¶, ä»·æ ¼: ï¿¥149}<br>åˆ›å»ºæ–°çš„å“ç‰Œè¡¬è¡£, å“ç‰Œä¸º: YOUNGORé›…æˆˆå°”<br>å½“å‰è¡¬è¡£ä¿¡æ¯: {å“ç‰Œ: YOUNGORé›…æˆˆå°”, å¤§å°: XXL, æˆåˆ†: çœŸä¸, ä»·æ ¼: ï¿¥129}<br>å½“å‰è¡¬è¡£ä¿¡æ¯: {å“ç‰Œ: ROMONç½—è’™, å¤§å°: XL, æˆåˆ†: æ¶¤çº¶, ä»·æ ¼: ï¿¥199}</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/flyweight/flyweight01.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>åº”ç”¨äºç³»ç»Ÿåº•å±‚å¼€å‘ï¼Œè§£å†³ç³»ç»Ÿæ€§èƒ½é—®é¢˜ã€‚</li><li>ç³»ç»Ÿæœ‰å¤§é‡ç›¸ä¼¼å¯¹è±¡ï¼Œéœ€è¦ç¼“å†²æ± ã€‚</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>å…±äº«ç›¸åŒæˆ–è€…ç›¸ä¼¼çš„ç»†ç²’åº¦å¯¹è±¡ï¼Œå‡å°‘å¯¹è±¡çš„åˆ›å»ºï¼Œé™ä½ç³»ç»Ÿå†…å­˜ï¼Œæé«˜æ•ˆç‡ã€‚</li><li>å¤–éƒ¨çŠ¶æ€ç›¸å¯¹ç‹¬ç«‹ï¼Œå¯¹è±¡å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸­è¢«å¤ç”¨ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>è¯»å–å¤–éƒ¨çŠ¶æ€ä½¿å¾—è¿è¡Œæ—¶é—´å˜é•¿ã€‚</li><li>å†…éƒ¨çŠ¶æ€ä¸å¤–éƒ¨çŠ¶æ€åˆ†ç¦»ï¼Œä½¿å¾—ç¨‹åºçš„é€»è¾‘å¤æ‚åŒ–ã€‚</li></ul><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-äº«å…ƒæ¨¡å¼</a></li><li><a href="https://www.runoob.com/design-pattern/flyweight-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-äº«å…ƒæ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç»“æ„å‹-é€‚é…å™¨æ¨¡å¼ (Adapter)</title>
    <link href="https://www.zhaohaihao.com/posts/2020021402.html"/>
    <id>https://www.zhaohaihao.com/posts/2020021402.html</id>
    <published>2020-02-14T08:02:01.000Z</published>
    <updated>2020-04-07T03:30:46.095Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/109-Adapter" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ã€‚</p></blockquote><p>é€‚é…å™¨æ¨¡å¼å¯ä»¥ä½¿åŸæœ¬æ¥å£ä¸å…¼å®¹çš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</p><h1 id="ä¸¤ç§æ¨¡å¼"><a href="#ä¸¤ç§æ¨¡å¼" class="headerlink" title="ä¸¤ç§æ¨¡å¼"></a>ä¸¤ç§æ¨¡å¼</h1><p>é€‚é…å™¨æ¨¡å¼æœ‰ä¸¤ç§æ¨¡å¼ï¼š</p><ul><li>å¯¹è±¡é€‚é…å™¨ï¼šé‡‡ç”¨ç»„åˆæ–¹å¼è¿›è¡Œç±»çš„å§”æ‰˜</li><li>ç±»é€‚é…å™¨ï¼šé‡‡ç”¨ç»§æ‰¿æ–¹å¼</li></ul><h1 id="ä¸‰ç§è§’è‰²"><a href="#ä¸‰ç§è§’è‰²" class="headerlink" title="ä¸‰ç§è§’è‰²"></a>ä¸‰ç§è§’è‰²</h1><ul><li>ç›®æ ‡è§’è‰²(Target)ï¼šå®¢æˆ·ç«¯æ‰€æœŸå¾…çš„æ¥å£(ä¹Ÿå¯ä»¥æ˜¯å…·ä½“ç±»æˆ–è€…æŠ½è±¡ç±»)ã€‚</li><li>æºè§’è‰²(Adaptee)ï¼šè¢«é€‚é…è€…ã€‚å·²ç»å­˜åœ¨çš„éœ€è¦é€‚é…çš„æ¥å£æˆ–ç±»ã€‚</li><li>é€‚é…å™¨(Adapter)ï¼šå°†æºæ¥å£è½¬æ¢æˆç›®æ ‡æ¥å£ã€‚åªèƒ½æ˜¯å…·ä½“çš„ç±»ã€‚</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç¬”è€…æœ‰ä¸€å°åƒç°è›®ä¹…çš„å°¼åº·ç›¸æœºã€‚ç”±äºç¬”è€…çš„mbpåªæœ‰Type-Cæ¥å£ï¼Œä¸èƒ½ç›´æ¥è¯»å–ç›¸æœºçš„å†…å­˜å¡ã€‚ä¸ºæ­¤ç¬”è€…è¿˜ç‰¹åœ°æ–¥å·¨èµ„ä¹°äº†ä¸ªType-Cçš„æ‰©å±•åã€‚</p><p>è¿™é‡ŒType-Cæ‰©å±•åä½œä¸ºå†…å­˜å¡å’Œç¬”è®°æœ¬ä¹‹é—´çš„é€‚é…å™¨ï¼Œåªè¦å°†å†…å­˜å¡æ’å…¥Type-Cæ‰©å±•åçš„SDå¡æ¥å£ä¸­ï¼Œå†å°†æ‰©å±•åæ¥å…¥åˆ°ç¬”è®°æœ¬çš„Type-Cæ¥å£ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç¬”è®°æœ¬æ¥è¯»å–å†…å­˜å¡ä¸­çš„å†…å®¹ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´æ‰©å±•åå°†ç¬”è®°æœ¬çš„Type-Cæ¥å£é€‚é…æˆSDå¡æ¥å£ã€‚è¿™æ ·ç†è§£çš„è¯ï¼ŒSDå¡æ¥å£å³ä¸ºæˆ‘ä»¬çš„ç›®æ ‡è§’è‰²ï¼ŒType-Cæ¥å£ä¸ºè¢«é€‚é…è€…(å³æºè§’è‰²)ï¼Œæ‰©å±•åä¸ºä¸¤è€…ä¹‹é—´çš„é€‚é…å™¨ã€‚</p><h2 id="ç±»é€‚é…å™¨"><a href="#ç±»é€‚é…å™¨" class="headerlink" title="ç±»é€‚é…å™¨"></a>ç±»é€‚é…å™¨</h2><p>è¿™é‡Œå…ˆç”¨ç±»é€‚é…å™¨çš„æ–¹å¼æ¥å®ç°ä¸‹ã€‚</p><h3 id="åˆ›å»ºæºè§’è‰²"><a href="#åˆ›å»ºæºè§’è‰²" class="headerlink" title="åˆ›å»ºæºè§’è‰²"></a>åˆ›å»ºæºè§’è‰²</h3><p>ä¸Šè¿°å·²ç»åˆ†æäº†ï¼ŒType-Cæ¥å£ä½œä¸ºæˆ‘ä»¬çš„æºè§’è‰²ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> TypeCæ¥å£ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-14 16:33</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TypeCInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * type-Cè¯»å–</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">typeCRead</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Type-Cæ¥å£è¯»å–..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºç›®æ ‡è§’è‰²"><a href="#åˆ›å»ºç›®æ ‡è§’è‰²" class="headerlink" title="åˆ›å»ºç›®æ ‡è§’è‰²"></a>åˆ›å»ºç›®æ ‡è§’è‰²</h3><p>åˆ›å»ºç›®æ ‡è§’è‰²ï¼Œä¹Ÿå°±æ˜¯SDå¡æ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> SDå¡æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-14 16:36</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SDInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sdRead</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºé€‚é…å™¨"><a href="#åˆ›å»ºé€‚é…å™¨" class="headerlink" title="åˆ›å»ºé€‚é…å™¨"></a>åˆ›å»ºé€‚é…å™¨</h3><p>è¿™é‡Œçš„é€‚é…å™¨å³Typc-Cæ‰©å±•åï¼Œç»§æ‰¿æºè§’è‰²ï¼Œå®ç°ç›®æ ‡æ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Type-Cæ‰©å±•å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-14 16:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TypeCDockStation</span> <span class="keyword">extends</span> <span class="title">TypeCInterface</span> <span class="keyword">implements</span> <span class="title">SDInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sdRead</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"SDå¡æ¥å£è¯»å–..."</span>);</span><br><span class="line">        System.out.println(<span class="string">"æ‰©å±•åè½¬æ¢"</span>);</span><br><span class="line">        <span class="keyword">super</span>.typeCRead();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-14 16:59</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SDInterface sdInterface = <span class="keyword">new</span> TypeCDockStation();</span><br><span class="line">        sdInterface.sdRead();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>SDå¡æ¥å£è¯»å–â€¦<br>æ‰©å±•åè½¬æ¢<br>Type-Cæ¥å£è¯»å–â€¦</p></blockquote><h3 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h3><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/adapter/adapter01.png?x-oss-process=style/style01" alt="image.png"></p><h2 id="å¯¹è±¡é€‚é…å™¨"><a href="#å¯¹è±¡é€‚é…å™¨" class="headerlink" title="å¯¹è±¡é€‚é…å™¨"></a>å¯¹è±¡é€‚é…å™¨</h2><p>å†æ¥è®²è®²å¯¹è±¡é€‚é…å™¨æ–¹å¼çš„å®ç°ã€‚</p><p>è¯¥æ–¹å¼ä¸­ï¼Œç›®æ ‡è§’è‰²å’Œæºè§’è‰²å¹¶æœªå‘ç”Ÿæ”¹åŠ¨ï¼Œå’Œä¸Šè¿°ç±»é€‚é…å™¨æ–¹å¼ä¸­ä¿æŒä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸åšè¿‡å¤šçš„ä»£ç ç²˜è´´äº†ã€‚</p><p>ä¸»è¦å˜åŒ–çš„æ˜¯é€‚é…å™¨ç±»ã€‚</p><h3 id="åˆ›å»ºé€‚é…å™¨-1"><a href="#åˆ›å»ºé€‚é…å™¨-1" class="headerlink" title="åˆ›å»ºé€‚é…å™¨"></a>åˆ›å»ºé€‚é…å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-14 17:23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TypeCDockStation</span> <span class="keyword">implements</span> <span class="title">SDInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TypeCInterface typeCInterface;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TypeCDockStation</span><span class="params">(TypeCInterface typeCInterface)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.typeCInterface = typeCInterface;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sdRead</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"SDå¡æ¥å£è¯»å–..."</span>);</span><br><span class="line">        System.out.println(<span class="string">"æ‰©å±•åè½¬æ¢"</span>);</span><br><span class="line">        typeCInterface.typeCRead();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ç±»åŠè¾“å‡º-1"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º-1" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-14 16:59</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TypeCInterface typeCInterface = <span class="keyword">new</span> TypeCInterface();</span><br><span class="line">        SDInterface sdInterface = <span class="keyword">new</span> TypeCDockStation(typeCInterface);</span><br><span class="line">        sdInterface.sdRead();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>SDå¡æ¥å£è¯»å–â€¦<br>æ‰©å±•åè½¬æ¢<br>Type-Cæ¥å£è¯»å–â€¦</p></blockquote><h3 id="ç±»ç»“æ„å›¾-1"><a href="#ç±»ç»“æ„å›¾-1" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h3><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/adapter/adapter02.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>æƒ³ä½¿ç”¨ä¸€ä¸ªå·²å­˜åœ¨çš„ç±»ï¼Œä½†æ˜¯è¯¥ç±»çš„æ–¹æ³•ä¸ç¬¦åˆæ¥å£éœ€æ±‚ã€‚</li><li>è½¯ä»¶ç»´æŠ¤è¿‡ç¨‹ä¸­ï¼Œè§£å†³ä¸åŒäº§å“æˆ–è€…å‚å®¶åŠŸèƒ½ç±»ä¼¼è€Œæ¥å£ä¸åŒçš„æƒ…å†µã€‚</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>æé«˜ç±»çš„é€æ˜æ€§</li><li>å¤ç”¨ç°æœ‰çš„ç±»</li><li>ç›®æ ‡ç±»å’Œé€‚é…å™¨ç±»è§£è€¦ï¼Œæé«˜æ‰©å±•æ€§</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>å¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§</li><li>å¢åŠ ç³»ç»Ÿä»£ç å¯è¯»éš¾åº¦</li></ul><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-é€‚é…å™¨æ¨¡å¼</a></li><li><a href="https://www.runoob.com/design-pattern/adapter-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-é€‚é…å™¨æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç»“æ„å‹-è£…é¥°å™¨æ¨¡å¼ (Decorator)</title>
    <link href="https://www.zhaohaihao.com/posts/2020021401.html"/>
    <id>https://www.zhaohaihao.com/posts/2020021401.html</id>
    <published>2020-02-14T01:55:33.000Z</published>
    <updated>2020-04-07T03:30:33.105Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/108-Decorator" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><p>è£…é¥°å™¨æ¨¡å¼å¯¹äºç¬”è€…æ¥è¯´ï¼Œå°è±¡è¿˜æ˜¯æ¯”è¾ƒæ·±åˆ»çš„ã€‚å› ä¸ºå½“å¹´ç¬”è€…è€ƒè½¯ä»¶è®¾è®¡å¸ˆçš„è®¾è®¡æ¨¡å¼å¤§é¢˜è€ƒçš„å°±æ˜¯è¿™ä¸ªæ¨¡å¼ï¼Œå·®ç‚¹é˜µäº¡ã€‚</p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>åŠ¨æ€åœ°ä¸ºä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚</p></blockquote><p>åœ¨æ‰©å±•åŸæœ‰å¯¹è±¡åŠŸèƒ½ä¸Šï¼Œè£…é¥°å™¨æ¨¡å¼æ¯”ç»§æ‰¿çš„æ–¹å¼æ›´åŠ çµæ´»ã€‚</p><h1 id="æ¨¡å¼ä¸­çš„è§’è‰²"><a href="#æ¨¡å¼ä¸­çš„è§’è‰²" class="headerlink" title="æ¨¡å¼ä¸­çš„è§’è‰²"></a>æ¨¡å¼ä¸­çš„è§’è‰²</h1><ul><li>æŠ½è±¡æ„å»º(Component)ï¼šå®šä¹‰ä¸€ä¸ªæŠ½è±¡æ¥å£(å¯ä»¥æ˜¯æŠ½è±¡ç±»)ï¼Œç”¨ä»¥ç»™å¯¹è±¡åŠ¨æ€åœ°æ·»åŠ èŒè´£ã€‚</li><li>å…·ä½“æ„å»º(ConcreteComponent)ï¼šå®šä¹‰ä¸€ä¸ªå…·ä½“çš„å¯¹è±¡ï¼Œå®ç°Componentæ¥å£ã€‚</li><li>æŠ½è±¡è£…é¥°è€…(Decorator)ï¼šç»§æ‰¿Componentï¼Œç”¨æœ‰Componentçš„èŒè´£ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æ‰©å±•èŒè´£ã€‚</li><li>å…·ä½“è£…é¥°è€…(ConcretorDecorator)ï¼šè´Ÿè´£ç»™å…·ä½“çš„æ„å»ºå¯¹è±¡æ·»åŠ èŒè´£ï¼ŒåŒæ—¶å¯ä»¥å®šä¹‰é¢å¤–çš„èŒè´£ã€‚</li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç¬”è€…ä½œä¸ºä¸€ç‚¹ç‚¹çš„é‡åº¦çˆ±å¥½è€…ï¼Œè¿™é‡Œå°±ä»¥å¥¶èŒ¶ä¸ºä¾‹ã€‚</p><h2 id="åˆ›å»ºæŠ½è±¡æ„å»º"><a href="#åˆ›å»ºæŠ½è±¡æ„å»º" class="headerlink" title="åˆ›å»ºæŠ½è±¡æ„å»º"></a>åˆ›å»ºæŠ½è±¡æ„å»º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æŠ½è±¡å¥¶èŒ¶ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 23:30</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractMilkyTea</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æè¿°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> String <span class="title">desc</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»·æ ¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">price</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå…·ä½“æ„å»º"><a href="#åˆ›å»ºå…·ä½“æ„å»º" class="headerlink" title="åˆ›å»ºå…·ä½“æ„å»º"></a>åˆ›å»ºå…·ä½“æ„å»º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å…·ä½“å¥¶èŒ¶ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 23:35</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MilkyTea</span> <span class="keyword">extends</span> <span class="title">AbstractMilkyTea</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"å¥¶èŒ¶"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">price</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">7</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæŠ½è±¡è£…é¥°è€…"><a href="#åˆ›å»ºæŠ½è±¡è£…é¥°è€…" class="headerlink" title="åˆ›å»ºæŠ½è±¡è£…é¥°è€…"></a>åˆ›å»ºæŠ½è±¡è£…é¥°è€…</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æŠ½è±¡è£…é¥°è€…ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 23:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractDecorator</span> <span class="keyword">extends</span> <span class="title">AbstractMilkyTea</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AbstractMilkyTea abstractMilkyTea;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AbstractDecorator</span><span class="params">(AbstractMilkyTea abstractMilkyTea)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.abstractMilkyTea = abstractMilkyTea;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.abstractMilkyTea.desc();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">price</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.abstractMilkyTea.price();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡ŒæŠ½è±¡è£…é¥°è€…ç»§æ‰¿äº†æŠ½è±¡å¥¶èŒ¶ç±»ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œå…·ä½“å¥¶èŒ¶ç±»å’ŒæŠ½è±¡è£…é¥°è€…ç±»éƒ½ä½œä¸ºæŠ½è±¡å¥¶èŒ¶ç±»çš„å­ç±»ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å…·ä½“å¥¶èŒ¶ç±»å’ŒæŠ½è±¡è£…é¥°è€…ç±»ç»§æ‰¿çš„çˆ¶ç±»(æŠ½è±¡å¥¶èŒ¶ç±»)è¿›è¡Œç»„åˆè®©è¿™ä¸¤ä¸ªå­ç±»å»ºç«‹å…³ç³»ã€‚</p><h2 id="åˆ›å»ºå…·ä½“è£…é¥°è€…"><a href="#åˆ›å»ºå…·ä½“è£…é¥°è€…" class="headerlink" title="åˆ›å»ºå…·ä½“è£…é¥°è€…"></a>åˆ›å»ºå…·ä½“è£…é¥°è€…</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ç³–è£…é¥°è€…</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 23:58</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SugarDecorator</span> <span class="keyword">extends</span> <span class="title">AbstractDecorator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SugarDecorator</span><span class="params">(AbstractMilkyTea abstractMilkyTea)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(abstractMilkyTea);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.desc() + <span class="string">" åŠ ç³–"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">price</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.price() + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> çº¢è±†è£…é¥°è€…</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-14 00:14</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedBeanDecorator</span> <span class="keyword">extends</span> <span class="title">AbstractDecorator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RedBeanDecorator</span><span class="params">(AbstractMilkyTea abstractMilkyTea)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(abstractMilkyTea);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.desc() + <span class="string">" åŠ çº¢è±†"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">price</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.price() + <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> çç è£…é¥°è€…</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 23:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PearlDecorator</span> <span class="keyword">extends</span> <span class="title">AbstractDecorator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PearlDecorator</span><span class="params">(AbstractMilkyTea abstractMilkyTea)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(abstractMilkyTea);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.desc() + <span class="string">" åŠ çç "</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">price</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.price() + <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-14 00:21</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AbstractMilkyTea abstractMilkyTea = <span class="keyword">new</span> MilkyTea();</span><br><span class="line">        abstractMilkyTea = <span class="keyword">new</span> SugarDecorator(abstractMilkyTea);</span><br><span class="line">        abstractMilkyTea = <span class="keyword">new</span> PearlDecorator(abstractMilkyTea);</span><br><span class="line">        System.out.println(abstractMilkyTea.desc() + <span class="string">" çš„é”€å”®ä»·æ ¼æ˜¯:"</span> + abstractMilkyTea.price());</span><br><span class="line"></span><br><span class="line">        abstractMilkyTea = <span class="keyword">new</span> MilkyTea();</span><br><span class="line">        abstractMilkyTea = <span class="keyword">new</span> RedBeanDecorator(abstractMilkyTea);</span><br><span class="line">        abstractMilkyTea = <span class="keyword">new</span> PearlDecorator(abstractMilkyTea);</span><br><span class="line">        System.out.println(abstractMilkyTea.desc() + <span class="string">" çš„é”€å”®ä»·æ ¼æ˜¯:"</span> + abstractMilkyTea.price());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»è¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>å¥¶èŒ¶ åŠ ç³– åŠ çç  çš„é”€å”®ä»·æ ¼æ˜¯:10<br>å¥¶èŒ¶ åŠ çº¢è±† åŠ çç  çš„é”€å”®ä»·æ ¼æ˜¯:11</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/decorator/decorator01.png?x-oss-process=style/style01" alt="image.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>ç»™ä¸€ä¸ªç±»æ·»åŠ é¢å¤–çš„èŒè´£</li><li>åŠ¨æ€çš„ä¸ºä¸€ä¸ªå¯¹è±¡æ·»åŠ åŠŸèƒ½åŒæ—¶å¯ä»¥åŠ¨æ€æ’¤é”€</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>æ¯”ç»§æ‰¿æ›´åŠ çµæ´»ï¼Œæ˜“æ‰©å±•ã€‚å¯ä»¥åœ¨ä¸æ”¹å˜åŸæœ‰å¯¹è±¡çš„æƒ…å†µä¸‹ç»™ä¸€ä¸ªå¯¹è±¡æ‰©å±•åŠŸèƒ½ã€‚</li><li>è§£è€¦ã€‚è£…é¥°ç±»å’Œè¢«è£…é¥°è€…å¯ä»¥ç‹¬ç«‹å˜åŒ–ï¼Œä¸ä¼šç›¸äº’è€¦åˆã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><p>ä¼šå¯¼è‡´ä»£ç å’Œç±»çš„éª¤å¢ï¼Œå¢åŠ ç¨‹åºå¤æ‚æ€§ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E4%BF%AE%E9%A5%B0%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-ä¿®é¥°æ¨¡å¼</a></li><li><a href="https://www.runoob.com/design-pattern/decorator-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-è£…é¥°å™¨æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç»“æ„å‹-å¤–è§‚æ¨¡å¼ (Facade)</title>
    <link href="https://www.zhaohaihao.com/posts/2020021302.html"/>
    <id>https://www.zhaohaihao.com/posts/2020021302.html</id>
    <published>2020-02-13T12:55:33.000Z</published>
    <updated>2020-04-07T03:30:41.494Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/107-Facade" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>ä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œæ­¤æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚</p></blockquote><p>å¤–è§‚æ¨¡å¼åˆå«<strong>é—¨é¢æ¨¡å¼</strong>ï¼Œæ˜¯ç¬¦åˆè¿ªç±³ç‰¹æ³•åˆ™çš„ã€‚</p><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ä½œä¸ºä¸€ä¸ªç—…äººå»åŒ»é™¢çœ‹ç—…ï¼Œå¯èƒ½éœ€è¦ç»è¿‡æŒ‚å·ã€é—¨è¯Šã€åˆ’ä»·ã€å–è¯è¿™å‡ ä¸ªæ­¥éª¤ã€‚</p><p>ç›¸å¯¹æ¥è¯´è¿‡ç¨‹å¯èƒ½è¾ƒä¸ºç¹çï¼Œå…ˆæ¥çœ‹ä¸‹ä»£ç å±‚é¢æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p><h2 id="åˆ›å»ºå®ä½“ç±»"><a href="#åˆ›å»ºå®ä½“ç±»" class="headerlink" title="åˆ›å»ºå®ä½“ç±»"></a>åˆ›å»ºå®ä½“ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ç—…äººç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 16:21</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Patient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å§“å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Patient</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå­ç³»ç»Ÿç±»"><a href="#åˆ›å»ºå­ç³»ç»Ÿç±»" class="headerlink" title="åˆ›å»ºå­ç³»ç»Ÿç±»"></a>åˆ›å»ºå­ç³»ç»Ÿç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æŒ‚å·ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 16:15</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegisterService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operate</span><span class="params">(Patient patient)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹ŸæŒ‚å·</span></span><br><span class="line">        System.out.println(<span class="string">"ç—…äºº: "</span> + patient.getName() + <span class="string">" è¿›è¡ŒæŒ‚å·"</span>);</span><br><span class="line">        System.out.println(<span class="string">"æŒ‚å·å®Œæ¯•"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> é—¨è¯Šç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 16:18</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OutpatientService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operate</span><span class="params">(Patient patient)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿå°±è¯Š</span></span><br><span class="line">        System.out.println(<span class="string">"ç—…äºº: "</span> + patient.getName() + <span class="string">" è¿›è¡Œå°±è¯Š"</span>);</span><br><span class="line">        System.out.println(<span class="string">"å°±è¯Šå®Œæ¯•, éœ€è¦é…è¯"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> åˆ’ä»·ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 16:19</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SettleAccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operate</span><span class="params">(Patient patient)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿä»˜æ¬¾</span></span><br><span class="line">        System.out.println(<span class="string">"ç—…äºº: "</span> + patient.getName() + <span class="string">" è¿›è¡Œä»˜æ¬¾"</span>);</span><br><span class="line">        System.out.println(<span class="string">"ä»˜æ¬¾å®Œæˆ, å‰å¾€å–è¯"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å–è¯ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 16:23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TakeMedicineService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operate</span><span class="params">(Patient patient)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿå–è¯</span></span><br><span class="line">        System.out.println(<span class="string">"ç—…äºº: "</span> + patient.getName() + <span class="string">" è¿›è¡Œå–è¯"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 16:24</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Patient patient = <span class="keyword">new</span> Patient(<span class="string">"æµ·è±ª"</span>);</span><br><span class="line">        System.out.println(<span class="string">"ç—…äººè¿›å…¥åŒ»é™¢"</span>);</span><br><span class="line">        <span class="keyword">new</span> RegisterService().operate(patient);</span><br><span class="line">        <span class="keyword">new</span> OutpatientService().operate(patient);</span><br><span class="line">        <span class="keyword">new</span> SettleAccountService().operate(patient);</span><br><span class="line">        <span class="keyword">new</span> TakeMedicineService().operate(patient);</span><br><span class="line">        System.out.println(<span class="string">"ç—…äººç¦»å¼€åŒ»é™¢"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»è¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>ç—…äººè¿›å…¥åŒ»é™¢<br>ç—…äºº: æµ·è±ª è¿›è¡ŒæŒ‚å·<br>æŒ‚å·å®Œæ¯•<br>ç—…äºº: æµ·è±ª è¿›è¡Œå°±è¯Š<br>å°±è¯Šå®Œæ¯•, éœ€è¦é…è¯<br>ç—…äºº: æµ·è±ª è¿›è¡Œä»˜æ¬¾<br>ä»˜æ¬¾å®Œæˆ, å‰å¾€å–è¯<br>ç—…äºº: æµ·è±ª è¿›è¡Œå–è¯<br>ç—…äººç¦»å¼€åŒ»é™¢</p></blockquote><h2 id="ç±»ç»“æ„å›¾"><a href="#ç±»ç»“æ„å›¾" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/facade/facade01.png?x-oss-process=style/style01" alt="image.png"></p><p>ä»ç±»ç»“æ„å›¾ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå®¢æˆ·ç«¯å¯¹äºæŒ‚å·ã€é—¨è¯Šã€åˆ’ä»·ã€å–è¯è¿™äº›å­ç³»ç»Ÿçš„ä¾èµ–æ€§è¿‡é«˜ã€‚å„è‡ªå­ç³»ç»Ÿä»£ç çš„å˜åŠ¨å¾ˆå¯èƒ½å¼•èµ·å®¢æˆ·ç«¯ä»£ç å˜åŠ¨ï¼Œä»è€Œé€ æˆé£é™©ã€‚</p><h1 id="æ–¹æ¡ˆæ”¹è¿›"><a href="#æ–¹æ¡ˆæ”¹è¿›" class="headerlink" title="æ–¹æ¡ˆæ”¹è¿›"></a>æ–¹æ¡ˆæ”¹è¿›</h1><p>æˆ‘ä»¬å¯ä»¥åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­é€šè¿‡å»ºç«‹å®¢æˆ·ç«¯ä¸å­ç³»ç»Ÿé—´çš„å¤–è§‚ç±»æ¥æ¾æ•£è€¦åˆã€‚</p><p>å®ä½“ç±»ä¸å­ç³»ç»Ÿç±»æˆ‘ä»¬ä¸åšæ”¹åŠ¨ã€‚</p><h2 id="åˆ›å»ºæ¥å¾…å‘˜ç±»"><a href="#åˆ›å»ºæ¥å¾…å‘˜ç±»" class="headerlink" title="åˆ›å»ºæ¥å¾…å‘˜ç±»"></a>åˆ›å»ºæ¥å¾…å‘˜ç±»</h2><p>è¿™é‡Œçš„æ¥å¾…å‘˜å®é™…ä¸Šå°±æ˜¯å¤–è§‚æ¨¡å¼ä¸­çš„å¤–è§‚ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ¥å¾…å‘˜ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 16:46</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Receptionist</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿæ³¨å…¥</span></span><br><span class="line">    <span class="keyword">private</span> RegisterService registerService = <span class="keyword">new</span> RegisterService();</span><br><span class="line">    <span class="keyword">private</span> OutpatientService outpatientService = <span class="keyword">new</span> OutpatientService();</span><br><span class="line">    <span class="keyword">private</span> SettleAccountService settleAccountService = <span class="keyword">new</span> SettleAccountService();</span><br><span class="line">    <span class="keyword">private</span> TakeMedicineService takeMedicineService = <span class="keyword">new</span> TakeMedicineService();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¥å¾…ç—…äºº</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> patient</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receivePatients</span><span class="params">(Patient patient)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ¥å¾…å‘˜å¼€å§‹æ¥å¾…ç—…äºº"</span>);</span><br><span class="line">        registerService.operate(patient);</span><br><span class="line">        outpatientService.operate(patient);</span><br><span class="line">        settleAccountService.operate(patient);</span><br><span class="line">        takeMedicineService.operate(patient);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º-1"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º-1" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 16:24</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Patient patient = <span class="keyword">new</span> Patient(<span class="string">"æµ·è±ª"</span>);</span><br><span class="line">        Receptionist receptionist = <span class="keyword">new</span> Receptionist();</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">"ç—…äººè¿›å…¥åŒ»é™¢"</span>);</span><br><span class="line">        receptionist.receivePatients(patient);</span><br><span class="line">        System.out.println(<span class="string">"ç—…äººç¦»å¼€åŒ»é™¢"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»è¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>ç—…äººè¿›å…¥åŒ»é™¢<br>æ¥å¾…å‘˜å¼€å§‹æ¥å¾…ç—…äºº<br>ç—…äºº: æµ·è±ª è¿›è¡ŒæŒ‚å·<br>æŒ‚å·å®Œæ¯•<br>ç—…äºº: æµ·è±ª è¿›è¡Œå°±è¯Š<br>å°±è¯Šå®Œæ¯•, éœ€è¦é…è¯<br>ç—…äºº: æµ·è±ª è¿›è¡Œä»˜æ¬¾<br>ä»˜æ¬¾å®Œæˆ, å‰å¾€å–è¯<br>ç—…äºº: æµ·è±ª è¿›è¡Œå–è¯<br>ç—…äººç¦»å¼€åŒ»é™¢</p></blockquote><h2 id="ç±»ç»“æ„å›¾-1"><a href="#ç±»ç»“æ„å›¾-1" class="headerlink" title="ç±»ç»“æ„å›¾"></a>ç±»ç»“æ„å›¾</h2><p>ä»¥ä¸Šç¤ºä¾‹ç±»çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤º<br><img src="https://oss.zhaohaihao.com/photo/design-patterns/facade/facade02.png?x-oss-process=style/style01" alt="image.png"></p><p>æˆ‘ä»¬å¯ä»¥ä»ç±»å›¾ä¸­çœ‹å‡ºï¼Œé€šè¿‡å¤–è§‚æ¨¡å¼æ”¹åŠ¨åï¼Œå®¢æˆ·ç«¯ä¸å­ç³»ç»Ÿä¸å†æœ‰ç›´æ¥çš„è”ç³»ï¼Œå®¢æˆ·ç«¯åªä¸å¤–è§‚ç±»è¿›è¡Œäº¤äº’ï¼Œå­ç³»ç»Ÿä¹Ÿåªä¸å¤–è§‚ç±»è¿›è¡Œäº¤äº’ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>å­ç³»ç»Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œå¢åŠ å¤–è§‚æ¨¡å¼æä¾›ç®€å•è°ƒç”¨æ¥å£</li><li>æ„å»ºå¤šå±‚ç³»ç»Ÿç»“æ„ï¼Œåˆ©ç”¨å¤–è§‚å¯¹è±¡ä½œä¸ºæ¯å±‚çš„å…¥å£ï¼Œç®€åŒ–å±‚ä¸å±‚ä¹‹é—´çš„è°ƒç”¨</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>æ¾æ•£è€¦åˆï¼Œå‡å°‘ç³»ç»Ÿé—´ä¾èµ–</li><li>ç®€åŒ–è°ƒç”¨è¿‡ç¨‹æ“ä½œï¼Œæé«˜çµæ´»æ€§</li><li>æ›´å¥½åœ°åˆ’åˆ†è®¿é—®å±‚æ¬¡</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><p>æ–°å¢æˆ–è€…æ‰©å±•å­ç³»ç»Ÿè¡Œä¸ºä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œå®¹æ˜“å¼•å…¥é£é™©</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E5%A4%96%E8%A7%80%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-å¤–è§‚æ¨¡å¼</a></li><li><a href="https://www.runoob.com/design-pattern/facade-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-å¤–è§‚æ¨¡å¼</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºå‹-åŸå‹æ¨¡å¼ (Prototype)</title>
    <link href="https://www.zhaohaihao.com/posts/2020021301.html"/>
    <id>https://www.zhaohaihao.com/posts/2020021301.html</id>
    <published>2020-02-13T01:19:50.000Z</published>
    <updated>2020-04-07T03:30:58.726Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/106-Prototype" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</p></blockquote><p>åŸå‹æ¨¡å¼ä¸éœ€è¦çŸ¥é“ä»»ä½•åˆ›å»ºçš„ç»†èŠ‚ï¼Œä¹Ÿä¸è°ƒç”¨æ„é€ å‡½æ•°ã€‚</p><h1 id="ä¸‰ä¸ªåŸºæœ¬æ­¥éª¤"><a href="#ä¸‰ä¸ªåŸºæœ¬æ­¥éª¤" class="headerlink" title="ä¸‰ä¸ªåŸºæœ¬æ­¥éª¤"></a>ä¸‰ä¸ªåŸºæœ¬æ­¥éª¤</h1><p>åŸå‹æ¨¡å¼çš„æ ¸å¿ƒåœ¨äºåŸå‹ç±»ï¼Œè€Œæ»¡è¶³åŸå‹æ¨¡å¼çš„åŸå‹ç±»éœ€è¦è¿›è¡Œä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š</p><ul><li><strong>å®ç°Cloneableæ¥å£ã€‚</strong> <code>Cloneable</code> æ¥å£å®é™…ä¸Šæ˜¯ä¸ªç©ºæ¥å£(æ ‡è®°æ¥å£)ã€‚è¡¨æ˜åªæœ‰å®ç°è¯¥æ¥å£æ‰èƒ½å¤Ÿè¢«å¤åˆ¶ï¼Œå¦åˆ™åœ¨è¿è¡Œçš„æ—¶å€™ä¼šæŠ›å‡º <code>CloneNotSupportedException</code> å¼‚å¸¸ã€‚</li><li><strong>é‡å†™Objectç±»ä¸­çš„cloneæ–¹æ³•ã€‚</strong> <code>Object</code> ç±»ä½œä¸ºé¡¶çº§çˆ¶ç±»ï¼Œå…¶å†…éƒ¨åŒ…å«ä¸€ä¸ª <code>clone()</code> æ–¹æ³•ï¼Œç”¨æ¥è¿”å›å¯¹è±¡çš„ä¸€ä¸ªæ‹·è´ã€‚</li><li><strong>åœ¨clone()æ–¹æ³•ä¸­è°ƒç”¨super.clone()ã€‚</strong></li></ul><h1 id="åœºæ™¯ç¤ºä¾‹"><a href="#åœºæ™¯ç¤ºä¾‹" class="headerlink" title="åœºæ™¯ç¤ºä¾‹"></a>åœºæ™¯ç¤ºä¾‹</h1><p>ç¬”è€…è¿™é‡Œä»¥æ”¹ç®€å†ä¸ºä¾‹å­ã€‚ç»å¤§å¤šæ•°è¯»è€…åº”è¯¥å’Œç¬”è€…ä¸€æ ·å°†åŸæ¥çš„ç®€å†æ‹·è´ä¸€ä»½ï¼Œç„¶ååœ¨æ‹·è´çš„ç®€å†ä¸Šè¿›è¡Œä¿®æ”¹ã€‚</p><h2 id="åˆ›å»ºç®€å†ç±»"><a href="#åˆ›å»ºç®€å†ç±»" class="headerlink" title="åˆ›å»ºç®€å†ç±»"></a>åˆ›å»ºç®€å†ç±»</h2><p>è¿™é‡Œç®€å†ç±»ä½œä¸ºåŸå‹ç±»ï¼Œéœ€è¦å®ç° <code>Cloneable</code> æ¥å£çš„ï¼ŒåŒæ—¶é‡å†™ <code>clone()</code> æ–¹æ³•ï¼Œå¹¶åœ¨ <code>clone()</code> æ–¹æ³•å†…éƒ¨è°ƒç”¨ <code>super.clone()</code> ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ç®€å†ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 00:13</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Resume</span> <span class="keyword">implements</span> <span class="title">Cloneable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å§“å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæ—¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ€§åˆ«</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­¦æ ¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String school;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å·¥é¾„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String socialWorkAge;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å…¬å¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String company;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å·¥ä½œæè¿°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String workDescription;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Resume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Resumeç±»çš„æ— å‚æ„é€ å‡½æ•°"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¤å¤„çœç•¥ getterã€setteræ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å¼€å§‹å…‹éš†ç®€å†"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.clone();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(String.format(<span class="string">"å§“å: %s"</span>, name));</span><br><span class="line">        System.out.println(String.format(<span class="string">"ç”Ÿæ—¥: %s, æ€§åˆ«: %s, æ¯•ä¸šé™¢æ ¡: %s, å·¥é¾„: %s"</span>, birthday, sex, school, socialWorkAge));</span><br><span class="line">        System.out.println(String.format(<span class="string">"å…¬å¸: %s, å·¥ä½œæè¿°: %s"</span>, company, workDescription));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»åŠè¾“å‡º"><a href="#æµ‹è¯•ç±»åŠè¾“å‡º" class="headerlink" title="æµ‹è¯•ç±»åŠè¾“å‡º"></a>æµ‹è¯•ç±»åŠè¾“å‡º</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 00:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// åŸç‰ˆç®€å†</span></span><br><span class="line">        Resume resumeA = <span class="keyword">new</span> Resume();</span><br><span class="line">        resumeA.setName(<span class="string">"æµ·è±ª"</span>);</span><br><span class="line">        resumeA.setBirthday(<span class="keyword">new</span> Date(<span class="number">94</span>, <span class="number">0</span>, <span class="number">1</span>));</span><br><span class="line">        resumeA.setSex(<span class="string">"ç”·"</span>);</span><br><span class="line">        resumeA.setSchool(<span class="string">"XXXXå¤§å­¦"</span>);</span><br><span class="line">        resumeA.setSocialWorkAge(<span class="string">"1"</span>);</span><br><span class="line">        resumeA.setCompany(<span class="string">"Aç§‘æŠ€æœ‰é™å…¬å¸"</span>);</span><br><span class="line">        resumeA.setWorkDescription(<span class="string">"åœ¨Aå…¬å¸çš„å·¥ä½œæè¿°"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‹·è´ç®€å†æ”¹ç‰ˆ</span></span><br><span class="line">        Resume resumeB = (Resume) resumeA.clone();</span><br><span class="line">        resumeB.setSocialWorkAge(<span class="string">"3"</span>);</span><br><span class="line">        resumeB.setCompany(<span class="string">"Bç§‘æŠ€æœ‰é™å…¬å¸"</span>);</span><br><span class="line">        resumeB.setWorkDescription(<span class="string">"åœ¨Bå…¬å¸çš„å·¥ä½œæè¿°"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"=====ç®€å†ä¿®æ”¹å‰====="</span>);</span><br><span class="line">        resumeA.display();</span><br><span class="line">        System.out.println(<span class="string">"=====ç®€å†ä¿®æ”¹å====="</span>);</span><br><span class="line">        resumeB.display();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"æ˜¯å¦ä¸ºåŒä¸€å¯¹è±¡: "</span> + (resumeA == resumeB));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>Resumeç±»çš„æ— å‚æ„é€ å‡½æ•°<br>å¼€å§‹å…‹éš†ç®€å†<br>=====ç®€å†ä¿®æ”¹å‰=====<br>å§“å: æµ·è±ª<br>ç”Ÿæ—¥: Sat Jan 01 00:00:00 CST 1994, æ€§åˆ«: ç”·, æ¯•ä¸šé™¢æ ¡: XXXXå¤§å­¦, å·¥é¾„: 1<br>å…¬å¸: Aç§‘æŠ€æœ‰é™å…¬å¸, å·¥ä½œæè¿°: åœ¨Aå…¬å¸çš„å·¥ä½œæè¿°<br>=====ç®€å†ä¿®æ”¹å=====<br>å§“å: æµ·è±ª<br>ç”Ÿæ—¥: Sat Jan 01 00:00:00 CST 1994, æ€§åˆ«: ç”·, æ¯•ä¸šé™¢æ ¡: XXXXå¤§å­¦, å·¥é¾„: 3<br>å…¬å¸: Bç§‘æŠ€æœ‰é™å…¬å¸, å·¥ä½œæè¿°: åœ¨Bå…¬å¸çš„å·¥ä½œæè¿°<br>æ˜¯å¦ä¸ºåŒä¸€å¯¹è±¡: false</p></blockquote><p>ä»æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p><ul><li>å…‹éš†çš„æ—¶å€™å¹¶æ²¡æœ‰è°ƒç”¨ç±»çš„æ„é€ å™¨</li><li>å…‹éš†åçš„å¯¹è±¡æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡</li></ul><h1 id="çŸ¥è¯†æ‰©å±•"><a href="#çŸ¥è¯†æ‰©å±•" class="headerlink" title="çŸ¥è¯†æ‰©å±•"></a>çŸ¥è¯†æ‰©å±•</h1><p>è¯´åˆ°å…‹éš†ï¼Œå°±ä¸å¾—ä¸è¯´ä¸‹<strong>æ·±å…‹éš†(æ·±æ‹·è´)</strong>ä¸<strong>æµ…å…‹éš†(æµ…æ‹·è´)</strong>ã€‚</p><h2 id="å®šä¹‰-1"><a href="#å®šä¹‰-1" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>å…ˆæ¥çœ‹ä¸‹æ·±å…‹éš†ä¸æµ…å…‹éš†å„è‡ªçš„å®šä¹‰ï¼š</p><ul><li><strong>æ·±å…‹éš†ï¼š</strong>è¢«å¤åˆ¶çš„å¯¹è±¡æ‰€æœ‰çš„å˜é‡éƒ½å«æœ‰ä¸åŸæ¥å¯¹è±¡ç›¸åŒçš„å€¼ï¼Œæ‰€æœ‰çš„å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ä¹Ÿéƒ½æŒ‡å‘å¤åˆ¶è¿‡çš„æ–°å¯¹è±¡ã€‚æ¢å¥è¯ä¹Ÿå°±æ˜¯è¯´ï¼Œæ·±å…‹éš†ä¸ä»…æ‹·è´å¯¹è±¡æœ¬èº«(åŒ…æ‹¬å¯¹è±¡ä¸­çš„åŸºæœ¬å˜é‡)ï¼Œè€Œä¸”ä¹Ÿæ‹·è´å¯¹è±¡åŒ…å«çš„å¼•ç”¨æŒ‡å‘çš„æ‰€æœ‰å¯¹è±¡ã€‚</li><li><strong>æµ…å…‹éš†ï¼š</strong>è¢«å¤åˆ¶çš„å¯¹è±¡æ‰€æœ‰çš„å˜é‡éƒ½å«æœ‰ä¸åŸæ¥å¯¹è±¡ç›¸åŒçš„å€¼ï¼Œæ‰€æœ‰çš„å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨éƒ½ä»ç„¶æŒ‡å‘åŸæ¥çš„å¯¹è±¡ã€‚æ¢å¥è¯ä¹Ÿå°±æ˜¯è¯´ï¼Œæµ…å…‹éš†æ‹·è´å¯¹è±¡æ—¶ä»…æ‹·è´å¯¹è±¡æœ¬èº«(åŒ…æ‹¬å¯¹è±¡ä¸­çš„åŸºæœ¬å˜é‡)ï¼Œä¸æ‹·è´å¯¹è±¡åŒ…å«çš„å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚</li></ul><h2 id="å›¾è§£å®šä¹‰"><a href="#å›¾è§£å®šä¹‰" class="headerlink" title="å›¾è§£å®šä¹‰"></a>å›¾è§£å®šä¹‰</h2><p><img src="https://oss.zhaohaihao.com/photo/design-patterns/prototype/prototype01.png?x-oss-process=style/style01" alt="image.png"><br><img src="https://oss.zhaohaihao.com/photo/design-patterns/prototype/prototype02.png?x-oss-process=style/style01" alt="image.png"></p><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>æˆ‘ä»¬å¯¹ä¸Šè¿°åœºæ™¯ç¤ºä¾‹ä¸­çš„ç®€å†ç±»åšä¸€ä¸ªæµ‹è¯•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 00:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// åŸç‰ˆç®€å†</span></span><br><span class="line">        Resume resumeA = <span class="keyword">new</span> Resume();</span><br><span class="line">        resumeA.setName(<span class="string">"æµ·è±ª"</span>);</span><br><span class="line">        resumeA.setBirthday(<span class="keyword">new</span> Date(<span class="number">94</span>, <span class="number">0</span>, <span class="number">1</span>));</span><br><span class="line">        resumeA.setSex(<span class="string">"ç”·"</span>);</span><br><span class="line">        resumeA.setSchool(<span class="string">"XXXXå¤§å­¦"</span>);</span><br><span class="line">        resumeA.setSocialWorkAge(<span class="string">"1"</span>);</span><br><span class="line">        resumeA.setCompany(<span class="string">"Aç§‘æŠ€æœ‰é™å…¬å¸"</span>);</span><br><span class="line">        resumeA.setWorkDescription(<span class="string">"åœ¨Aå…¬å¸çš„å·¥ä½œæè¿°"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‹·è´ç®€å†</span></span><br><span class="line">        Resume resumeB = (Resume) resumeA.clone();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"=====åŸç‰ˆç®€å†====="</span>);</span><br><span class="line">        resumeA.display();</span><br><span class="line">        System.out.println(<span class="string">"=====æ‹·è´ç®€å†====="</span>);</span><br><span class="line">        resumeB.display();</span><br><span class="line"></span><br><span class="line">        resumeA.getBirthday().setDate(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">"=====ä¿®æ”¹ååŸç‰ˆç®€å†====="</span>);</span><br><span class="line">        resumeA.display();</span><br><span class="line">        System.out.println(<span class="string">"=====ä¿®æ”¹åæ‹·è´ç®€å†====="</span>);</span><br><span class="line">        resumeB.display();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>Resumeç±»çš„æ— å‚æ„é€ å‡½æ•°<br>å¼€å§‹å…‹éš†ç®€å†<br>=====åŸç‰ˆç®€å†=====<br>å§“å: æµ·è±ª<br>ç”Ÿæ—¥: Sat Jan 01 00:00:00 CST 1994, æ€§åˆ«: ç”·, æ¯•ä¸šé™¢æ ¡: XXXXå¤§å­¦, å·¥é¾„: 1<br>å…¬å¸: Aç§‘æŠ€æœ‰é™å…¬å¸, å·¥ä½œæè¿°: åœ¨Aå…¬å¸çš„å·¥ä½œæè¿°<br>=====æ‹·è´ç®€å†=====<br>å§“å: æµ·è±ª<br>ç”Ÿæ—¥: Sat Jan 01 00:00:00 CST 1994, æ€§åˆ«: ç”·, æ¯•ä¸šé™¢æ ¡: XXXXå¤§å­¦, å·¥é¾„: 1<br>å…¬å¸: Aç§‘æŠ€æœ‰é™å…¬å¸, å·¥ä½œæè¿°: åœ¨Aå…¬å¸çš„å·¥ä½œæè¿°</p><p>=====ä¿®æ”¹ååŸç‰ˆç®€å†=====<br>å§“å: æµ·è±ª<br>ç”Ÿæ—¥: Wed Jan 05 00:00:00 CST 1994, æ€§åˆ«: ç”·, æ¯•ä¸šé™¢æ ¡: XXXXå¤§å­¦, å·¥é¾„: 1<br>å…¬å¸: Aç§‘æŠ€æœ‰é™å…¬å¸, å·¥ä½œæè¿°: åœ¨Aå…¬å¸çš„å·¥ä½œæè¿°<br>=====ä¿®æ”¹åæ‹·è´ç®€å†=====<br>å§“å: æµ·è±ª<br>ç”Ÿæ—¥: Wed Jan 05 00:00:00 CST 1994, æ€§åˆ«: ç”·, æ¯•ä¸šé™¢æ ¡: XXXXå¤§å­¦, å·¥é¾„: 1<br>å…¬å¸: Aç§‘æŠ€æœ‰é™å…¬å¸, å·¥ä½œæè¿°: åœ¨Aå…¬å¸çš„å·¥ä½œæè¿°</p></blockquote><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æµ‹è¯•ç±»ä¸­æˆ‘ä»¬åªä¿®æ”¹äº†åŸç‰ˆç®€å†çš„ç”Ÿæ—¥ï¼Œä½†æ˜¯è¾“å‡ºçš„ç»“æœå½“ä¸­æ‹·è´ç®€å†çš„ç”Ÿæ—¥ä¹Ÿè·Ÿç€å‘ç”Ÿäº†å˜åŒ–ã€‚</p><p>ä¸Šè¿°å³ä¸ºæµ…å…‹éš†ï¼Œå…¶å¹¶ä¸æ‹·è´ç”Ÿæ—¥å˜é‡å¼•ç”¨æŒ‡å‘çš„æ—¥æœŸå¯¹è±¡ï¼Œä¸åŸå¯¹è±¡å…±äº«æ—¥æœŸå¯¹è±¡ã€‚</p><h2 id="æ”¹è¿›"><a href="#æ”¹è¿›" class="headerlink" title="æ”¹è¿›"></a>æ”¹è¿›</h2><p>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ¥å®ç°æ·±å…‹éš†ï¼Ÿ</p><p>å…¶å®æ–¹æ³•å¾ˆç®€å•ï¼Œå¤§ä½“ä¸Šä»£ç ä¸æµ…å…‹éš†ç±»ä¼¼ï¼Œä¸»è¦çš„å·®åˆ«åœ¨äº <code>clone()</code> æ–¹æ³•ã€‚ä¸‹æ®µæ”¹è¿›ä»£ç çœç•¥äº†å…¶ä½™æ–¹æ³•ï¼Œä¸»è¦æ¥çœ‹ä¸‹ <code>clone()</code> æ–¹æ³•çš„å˜åŒ–ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ç®€å†ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-13 00:13</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Resume</span> <span class="keyword">implements</span> <span class="title">Cloneable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœç•¥å…¶ä»–æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"å¼€å§‹å…‹éš†ç®€å†"</span>);</span><br><span class="line">        Resume resume = (Resume) <span class="keyword">super</span>.clone();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ·±å…‹éš†</span></span><br><span class="line">        resume.birthday = (Date) resume.birthday.clone();</span><br><span class="line">        <span class="keyword">return</span> resume;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å†ç”¨ç¤ºä¾‹çš„æµ‹è¯•ç±»è¿›è¡Œæµ‹è¯•çš„ç»“æœå¦‚ä¸‹ï¼š</p><blockquote><p>Resumeç±»çš„æ— å‚æ„é€ å‡½æ•°<br>å¼€å§‹å…‹éš†ç®€å†<br>=====åŸç‰ˆç®€å†=====<br>å§“å: æµ·è±ª<br>ç”Ÿæ—¥: Sat Jan 01 00:00:00 CST 1994, æ€§åˆ«: ç”·, æ¯•ä¸šé™¢æ ¡: XXXXå¤§å­¦, å·¥é¾„: 1<br>å…¬å¸: Aç§‘æŠ€æœ‰é™å…¬å¸, å·¥ä½œæè¿°: åœ¨Aå…¬å¸çš„å·¥ä½œæè¿°<br>=====æ‹·è´ç®€å†=====<br>å§“å: æµ·è±ª<br>ç”Ÿæ—¥: Sat Jan 01 00:00:00 CST 1994, æ€§åˆ«: ç”·, æ¯•ä¸šé™¢æ ¡: XXXXå¤§å­¦, å·¥é¾„: 1<br>å…¬å¸: Aç§‘æŠ€æœ‰é™å…¬å¸, å·¥ä½œæè¿°: åœ¨Aå…¬å¸çš„å·¥ä½œæè¿°</p><p>=====ä¿®æ”¹ååŸç‰ˆç®€å†=====<br>å§“å: æµ·è±ª<br>ç”Ÿæ—¥: Wed Jan 05 00:00:00 CST 1994, æ€§åˆ«: ç”·, æ¯•ä¸šé™¢æ ¡: XXXXå¤§å­¦, å·¥é¾„: 1<br>å…¬å¸: Aç§‘æŠ€æœ‰é™å…¬å¸, å·¥ä½œæè¿°: åœ¨Aå…¬å¸çš„å·¥ä½œæè¿°<br>=====ä¿®æ”¹åæ‹·è´ç®€å†=====<br>å§“å: æµ·è±ª<br>ç”Ÿæ—¥: Sat Jan 01 00:00:00 CST 1994, æ€§åˆ«: ç”·, æ¯•ä¸šé™¢æ ¡: XXXXå¤§å­¦, å·¥é¾„: 1<br>å…¬å¸: Aç§‘æŠ€æœ‰é™å…¬å¸, å·¥ä½œæè¿°: åœ¨Aå…¬å¸çš„å·¥ä½œæè¿°</p></blockquote><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¿®æ”¹äº†åŸç‰ˆç®€å†çš„ç”Ÿæ—¥åï¼Œæ‹·è´ç®€å†çš„ç”Ÿæ—¥å¹¶æœªå‘ç”Ÿæ”¹å˜ã€‚è¿™ä¹Ÿè¯´æ˜ç»è¿‡æ·±å…‹éš†åï¼Œä¸¤è€…çš„æ—¥æœŸå¼•ç”¨å¹¶ä¸æ˜¯å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>ç±»åˆå§‹åŒ–éœ€è¦æ¶ˆè€—è¾ƒå¤šçš„èµ„æº</li><li>newäº§ç”Ÿçš„ä¸€ä¸ªå¯¹è±¡éœ€è¦éå¸¸ç¹ççš„è¿‡ç¨‹(æ•°æ®å‡†å¤‡ã€è®¿é—®æƒé™ç­‰)</li><li>æ„é€ å‡½æ•°æ¯”è¾ƒå¤æ‚</li><li>å¾ªç¯ä½“ä¸­ç”Ÿäº§å¤§é‡å¯¹è±¡æ—¶</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>æ€§èƒ½æé«˜ã€‚åŸå‹æ¨¡å¼æ€§èƒ½æ¯”ç›´æ¥newä¸€ä¸ªå¯¹è±¡çš„æ€§èƒ½é«˜ã€‚</li><li>æ‘†è„±æ„é€ å‡½æ•°çš„çº¦æŸï¼Œç®€åŒ–åˆ›å»ºçš„è¿‡ç¨‹</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>å¿…é¡»é…å¤‡å…‹éš†æ–¹æ³•</li><li>å¯¹å…‹éš†å¤æ‚å¯¹è±¡æˆ–è€…å¯¹å…‹éš†å‡ºçš„å¯¹è±¡è¿›è¡Œå¤æ‚æ”¹é€ æ—¶ï¼Œå®¹æ˜“å¼•å…¥é£é™©</li></ul><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-åŸå‹æ¨¡å¼</a></li><li><a href="https://www.runoob.com/design-pattern/prototype-pattern.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹-åŸå‹æ¨¡å¼</a></li><li><a href="https://blog.csdn.net/lovezhaohaimig/article/details/80372233" target="_blank" rel="noopener">å½»åº•ç†è§£Javaæ·±å…‹éš†å’Œæµ…å…‹éš†çš„åŸç†åŠå®ç°</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºå‹-å•ä¾‹æ¨¡å¼ (Singleton)</title>
    <link href="https://www.zhaohaihao.com/posts/2020021201.html"/>
    <id>https://www.zhaohaihao.com/posts/2020021201.html</id>
    <published>2020-02-12T06:11:55.000Z</published>
    <updated>2020-04-07T03:31:16.136Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener">ğŸ‘‰</a><a href="https://github.com/zhaohaihao/java-design-patterns/tree/master/105-Singleton" target="_blank" rel="noopener"><strong>æ–‡ç« ç¤ºä¾‹ä»£ç </strong></a><a href="https://emojipedia.org/backhand-index-pointing-left/" target="_blank" rel="noopener">ğŸ‘ˆ</a></p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>ä¿è¯ä¸€ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªå¯ä»¥è®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚</p></blockquote><h1 id="ä¸‰ä¸ªåŸºæœ¬æ­¥éª¤"><a href="#ä¸‰ä¸ªåŸºæœ¬æ­¥éª¤" class="headerlink" title="ä¸‰ä¸ªåŸºæœ¬æ­¥éª¤"></a>ä¸‰ä¸ªåŸºæœ¬æ­¥éª¤</h1><p>å®ç°å•ä¾‹æ¨¡å¼æœ‰ä¸‰ä¸ªåŸºæœ¬çš„æ­¥éª¤ï¼š</p><ol><li>ç§æœ‰æ„é€ æ–¹æ³•ç”¨æ¥é™åˆ¶å¤–éƒ¨ç±»å¯¹å…¶ç›´æ¥å®ä¾‹åŒ–</li><li>æä¾›ä¸€ä¸ªç§æœ‰é™æ€å½“å‰ç±»çš„å¯¹è±¡ä½œä¸ºå˜é‡</li><li>æä¾›ä¸€ä¸ªå…¬æœ‰é™æ€æ–¹æ³•è¿”å›ç±»çš„å®ä¾‹</li></ol><h1 id="å®ç°å•ä¾‹æ¨¡å¼çš„å‡ ç§æ–¹å¼"><a href="#å®ç°å•ä¾‹æ¨¡å¼çš„å‡ ç§æ–¹å¼" class="headerlink" title="å®ç°å•ä¾‹æ¨¡å¼çš„å‡ ç§æ–¹å¼"></a>å®ç°å•ä¾‹æ¨¡å¼çš„å‡ ç§æ–¹å¼</h1><h2 id="æ‡’æ±‰å¼"><a href="#æ‡’æ±‰å¼" class="headerlink" title="æ‡’æ±‰å¼"></a>æ‡’æ±‰å¼</h2><p>æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼åœ¨ç±»åˆ›å»ºçš„æ—¶å€™ä¸ä¼šåˆ›å»ºå®ä¾‹ï¼Œå› æ­¤ç±»çš„åŠ è½½é€Ÿåº¦æ¯”è¾ƒå¿«ã€‚</p><p>æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™æ‰è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ ·åšé¿å…äº†å†…å­˜çš„æµªè´¹ã€‚ </p><p>ä½¿ç”¨æ‡’æ±‰å¼æ–¹æ³•åˆ›å»ºçš„ <code>LazySingleton</code> ç±»å®ä¾‹ä»£ç :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å•ä¾‹æ¨¡å¼-æ‡’æ±‰å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-11 19:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LazySingleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LazySingleton instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LazySingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼å…¶å®æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚</p><p>åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œè¿™ç§æ–¹å¼å¯ä»¥å¾ˆå¥½åœ°è¿›è¡Œå¤„ç†ã€‚ä½†æ˜¯åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼Œè¿™ç§æ–¹å¼å°±ä¼šå‡ºç°é—®é¢˜ã€‚</p><p>å‡è®¾ç°åœ¨æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹Aï¼Œå¦ä¸€ä¸ªçº¿ç¨‹Bã€‚å½“çº¿ç¨‹Aåˆ°è¾¾ <code>instance = new LazySingleton();</code> è¿™ä¸€è¡Œä½†æ²¡æœ‰æ‰§è¡Œè¿™ä¸€è¡Œçš„åŒæ—¶ï¼Œçº¿ç¨‹Båˆ°è¾¾äº† <code>if (instance == null)</code> è¿™ä¸ªåˆ¤æ–­ã€‚æ­¤æ—¶ç”±äºçº¿ç¨‹Aè¿˜æœªæ‰§è¡Œå½“å‰è¡Œï¼Œçº¿ç¨‹Bçš„åˆ¤æ–­ç»“æœä¸º <code>true</code> ï¼Œæ‰€ä»¥çº¿ç¨‹Bä¾æ—§å¯ä»¥æ‰§è¡Œ <code>instance = new LazySingleton();</code> è¿™ä¸€è¡Œè¯­å¥ã€‚æ­¤æ—¶è¿™ä¸¤ä¸ªçº¿ç¨‹ä¼šè·å¾—å•ä¾‹ç±» <code>LazySingleton</code> çš„ä¸¤ä¸ªä¸åŒå®ä¾‹ï¼Œä»è€Œè¿›ä¸€æ­¥ç ´åäº†å•ä¾‹æ¨¡å¼ã€‚</p><h3 id="æ”¹è¿›æ–¹å¼ä¸€-åŠ åŒæ­¥é”"><a href="#æ”¹è¿›æ–¹å¼ä¸€-åŠ åŒæ­¥é”" class="headerlink" title="æ”¹è¿›æ–¹å¼ä¸€ (åŠ åŒæ­¥é”)"></a>æ”¹è¿›æ–¹å¼ä¸€ (åŠ åŒæ­¥é”)</h3><p>åœ¨ <code>getInstance()</code> æ–¹æ³•ä¸Šæ·»åŠ  <code>synchronized</code> å…³é”®å­—ï¼Œä½¿å¾—å½“å‰çš„æ–¹æ³•å˜æˆåŒæ­¥æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å•ä¾‹æ¨¡å¼-æ‡’æ±‰å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-11 19:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LazySingleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LazySingleton instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LazySingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>synchronized</code> åŠ åœ¨é™æ€æ–¹æ³•ä¸Šï¼Œç›¸å½“äºé”çš„æ˜¯å½“å‰ç±»çš„classæ–‡ä»¶ã€‚</p><h3 id="æ”¹è¿›æ–¹å¼äºŒ-åŠ åŒæ­¥é”"><a href="#æ”¹è¿›æ–¹å¼äºŒ-åŠ åŒæ­¥é”" class="headerlink" title="æ”¹è¿›æ–¹å¼äºŒ (åŠ åŒæ­¥é”)"></a>æ”¹è¿›æ–¹å¼äºŒ (åŠ åŒæ­¥é”)</h3><p>åœ¨ <code>getInstance()</code> æ–¹æ³•ä¸­æ·»åŠ  <code>synchronized</code> å—ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å•ä¾‹æ¨¡å¼-æ‡’æ±‰å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-11 19:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LazySingleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LazySingleton instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LazySingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (LazySingleton<span class="class">.<span class="keyword">class</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">                instance = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼å’Œä¸Šè¿°æ”¹è¿›æ–¹å¼ä¸€çš„æ•ˆæœå®é™…ä¸Šæ˜¯ä¸€æ ·çš„ã€‚</p><p>åœ¨å¤šçº¿ç¨‹èµ„æºå…±äº«å½“ä¸­ï¼Œä½¿ç”¨ <code>synchronized</code> åŒæ­¥é”çš„æ–¹å¼ï¼Œå…¶å®å°±æ˜¯ä»¥<strong>æ—¶é—´æ¢ç©ºé—´</strong>çš„æ–¹å¼ã€‚</p><h2 id="åŒé‡æ£€æŸ¥æ‡’æ±‰å¼"><a href="#åŒé‡æ£€æŸ¥æ‡’æ±‰å¼" class="headerlink" title="åŒé‡æ£€æŸ¥æ‡’æ±‰å¼"></a>åŒé‡æ£€æŸ¥æ‡’æ±‰å¼</h2><p>åŒæ­¥é”æ˜¯æ¯”è¾ƒæ¶ˆè€—èµ„æºçš„ï¼Œä¼šå­˜åœ¨åŠ é”å’Œè§£é”çš„å¼€é”€ã€‚è€Œä¸”ä¸Šè¿°ä¸¤æ”¹è¿›æ–¹å¼ <code>synchronized</code> é”çš„æ˜¯classæ–‡ä»¶ï¼Œé”çš„ç²’åº¦èŒƒå›´è¾ƒå¤§ã€‚</p><p>ä¸ºäº†å…¼é¡¾æ€§èƒ½å’Œçº¿ç¨‹å®‰å…¨ï¼Œä½¿ç”¨åŒé‡æ£€æŸ¥çš„æ–¹å¼æ¥æ”¹è¿›æ‡’æ±‰å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å•ä¾‹æ¨¡å¼-æ‡’æ±‰å¼(åŒé‡æ£€æŸ¥)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-11 19:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LazySingleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LazySingleton instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LazySingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (LazySingleton<span class="class">.<span class="keyword">class</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤–å±‚ <code>if (instance == null)</code> ä¸åŠ é”ï¼Œå¦‚æœä¸æ»¡è¶³åˆ™ç¨‹åºç›´æ¥è¿”å›ï¼Œå¦‚æœæ»¡è¶³åˆ™ä¹Ÿåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥åˆ° <code>synchronized</code> å½“ä¸­ã€‚å¤§å¹…åº¦åœ°é™ä½äº†å°† <code>synchronized</code> åŠ åœ¨æ–¹æ³•ä¸Šæ—¶å¸¦æ¥çš„æ€§èƒ½å¼€é”€ã€‚</p><p>ä½†æ˜¯ç›®å‰è¿™ç§æ–¹å¼ä¾æ—§å­˜åœ¨éšæ‚£ã€‚ä¸»è¦åŸå› åœ¨äºå¤–å±‚ <code>if (instance == null)</code> åˆ†æ”¯åˆ¤æ–­å’Œ <code>instance = new LazySingleton()</code> è¯­å¥è¿™ä¸¤å¤„ã€‚</p><p>å¤–å±‚ <code>if (instance == null)</code> åœ¨è¿›è¡Œåˆ†æ”¯åˆ¤æ–­çš„æ—¶å€™ï¼Œ <code>instance</code> å¯¹è±¡æœ‰å¯èƒ½æ˜¯ä¸ä¸ºç©ºçš„ï¼Œè™½ç„¶ä¸ä¸ºç©ºï¼Œä½†æ˜¯å¾ˆæœ‰å¯èƒ½ <code>instance</code> è¿™ä¸ªå¯¹è±¡è¿˜æœªå®Œæˆåˆå§‹åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„ <code>instance = new LazySingleton()</code> è¯­å¥è¿˜æ²¡æœ‰æ‰§è¡Œå®Œæˆã€‚</p><p><strong>Qï¼šå¦‚ä½•ç†è§£ï¼Ÿ</strong></p><hr><p>æˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹ä¸‹ <code>instance = new LazySingleton()</code> è¿™è¯­å¥ã€‚è™½ç„¶çœ‹ä¼¼ç®€å•çš„ä¸€è¡Œè¯­å¥ï¼Œä½†æ˜¯åœ¨ç¨‹åºä¸­è¿™æ¡è¯­å¥å®é™…ä¸Šè¿›è¡Œäº†ä¸‰ä¸ªæ“ä½œï¼š</p><ol><li>ç»™å½“å‰å¯¹è±¡åˆ†é…å†…å­˜</li><li>åˆå§‹åŒ–å¯¹è±¡</li><li>è®¾ç½®å˜é‡ <code>instance</code> æŒ‡å‘åˆšåˆ†é…çš„å†…å­˜åœ°å€</li></ol><p>åœ¨ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹å½“ä¸­ï¼ŒJVMæœ‰å¯èƒ½ä¼šå‘ç”Ÿ<strong>æŒ‡ä»¤é‡æ’åº</strong>ã€‚æ¯”å¦‚å‘ç”ŸæŒ‡ä»¤é‡æ’åºåå½“å‰è¯­å¥çš„æ‰§è¡Œé¡ºåºå˜ä¸º132ï¼Œå³å…ˆç»™å¯¹è±¡åˆ†é…å†…å­˜åœ°å€ï¼Œç„¶åå°†å˜é‡æŒ‡å‘åˆšåˆ†é…çš„å†…å­˜åœ°å€ï¼Œæœ€åå†è¿›è¡Œå¯¹è±¡çš„åˆå§‹åŒ–æ“ä½œã€‚</p><p>ä¸Šè¿°æ“ä½œåœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¹Ÿæ²¡ä»€ä¹ˆå¤§é—®é¢˜ã€‚ç„¶åæˆ‘ä»¬å†æ¥çœ‹çœ‹ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå½“å‰ç¨‹åºå­˜åœ¨éšæ‚£çš„å¯èƒ½ã€‚</p><table><thead><tr><th align="center">æ—¶é—´çº¿</th><th align="center">çº¿ç¨‹A</th><th align="center">çº¿ç¨‹B</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">ç»™å½“å‰å¯¹è±¡åˆ†é…å†…å­˜</td><td align="center"></td></tr><tr><td align="center">2</td><td align="center">è®¾ç½®å˜é‡ <code>instance</code> æŒ‡å‘åˆšåˆ†é…çš„å†…å­˜åœ°å€</td><td align="center"></td></tr><tr><td align="center">3</td><td align="center"></td><td align="center">å¤–å±‚åˆ†æ”¯åˆ¤æ–­ <code>instance</code> æ˜¯å¦ä¸ºnull</td></tr><tr><td align="center">4</td><td align="center"></td><td align="center">åˆæ¬¡è®¿é—®å¯¹è±¡</td></tr><tr><td align="center">5</td><td align="center">åˆå§‹åŒ–å¯¹è±¡</td><td align="center"></td></tr><tr><td align="center">6</td><td align="center">åˆæ¬¡è®¿é—®å¯¹è±¡</td><td align="center"></td></tr></tbody></table><p>æŒ‰ç…§æ—¶é—´çº¿çš„æ¨ç§»ï¼Œæˆ‘ä»¬å¯ä»¥ä»è¡¨æ ¼ä¸­çœ‹åˆ°åœ¨æ—¶é—´çº¿4ä¸­çº¿ç¨‹Bè®¿é—®çš„å¯¹è±¡æ˜¯çº¿ç¨‹Aä¸­è¿˜æœªåˆå§‹åŒ–å®Œæˆçš„å¯¹è±¡ï¼Œè¿™ä¸ªæ—¶å€™å°±æœ‰å¯èƒ½å‘ç”Ÿå¼‚å¸¸ã€‚</p><p>è¿™é‡Œå®é™…ä¸Šæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è§£å†³ä»¥ä¸Šé—®é¢˜ï¼š</p><ul><li>é˜²æ­¢æŒ‡ä»¤é‡æ’åº</li><li>è®©å…¶ä½™çš„çº¿ç¨‹æ— æ³•è§‚å¯Ÿåˆ°å½“å‰çº¿ç¨‹çš„æŒ‡ä»¤é‡æ’åº</li></ul><p><strong>Qï¼šå¦‚ä½•é¿å…æŒ‡ä»¤é‡æ’åºï¼Ÿ</strong></p><hr><p>ä½¿ç”¨ <code>volatile</code> å…³é”®å­—æ¥å£°æ˜ <code>instance</code> å˜é‡ï¼Œè¿™æ ·çš„è¯é‡æ’åºå°±ä¼šè¢«ç¦æ­¢ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LazySingleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> LazySingleton instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LazySingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (LazySingleton<span class="class">.<span class="keyword">class</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>CPUä¹Ÿæœ‰å…±äº«å†…å­˜ã€‚åœ¨åŠ äº† <code>volatile</code> å…³é”®å­—ä¹‹åï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½èƒ½è§‚å¯Ÿåˆ°å…±äº«å†…å­˜çš„æœ€æ–°çŠ¶æ€ï¼Œä¿è¯äº†å†…å­˜çš„å¯è§æ€§ã€‚</p><h2 id="é™æ€å†…éƒ¨ç±»æ¨¡å¼"><a href="#é™æ€å†…éƒ¨ç±»æ¨¡å¼" class="headerlink" title="é™æ€å†…éƒ¨ç±»æ¨¡å¼"></a>é™æ€å†…éƒ¨ç±»æ¨¡å¼</h2><p>è¿™ç§æ–¹å¼ï¼Œå…¶å®å°±æ˜¯è®©å…¶ä½™çš„çº¿ç¨‹æ— æ³•è§‚å¯Ÿåˆ°å½“å‰çº¿ç¨‹çš„æŒ‡ä»¤é‡æ’åºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-12 01:36</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticInnerClassSingleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> StaticInnerClassSingleton instance = <span class="keyword">new</span> StaticInnerClassSingleton();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">StaticInnerClassSingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> StaticInnerClassSingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonHolder.instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>JVMåœ¨ç±»çš„åˆå§‹åŒ–é˜¶æ®µ(å³Classåœ¨è¢«ç±»åŠ è½½å™¨åŠ è½½ä¹‹åï¼Œåœ¨è¢«çº¿ç¨‹ä½¿ç”¨ä¹‹å‰è¿™ä¸€æœŸé—´)ä¼šå»æ‰§è¡Œç±»çš„åˆå§‹åŒ–ã€‚</p><p>åœ¨ç±»çš„åˆå§‹åŒ–æœŸé—´ï¼ŒJVMä¼šå»è·å–Classå¯¹è±¡çš„åˆå§‹åŒ–é”(åŒæ­¥å¤šä¸ªçº¿ç¨‹å¯¹ä¸€ä¸ªç±»çš„åˆå§‹åŒ–)ã€‚</p><p>åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼ŒåŒ…æ‹¬æ‰§è¡Œç±»çš„é™æ€åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–ç±»ä¸­å£°æ˜çš„é™æ€å˜é‡ã€‚<br>æ ¹æ®Javaè¯­è¨€è§„èŒƒä¸»è¦æœ‰äº”ç§æƒ…å†µåœ¨é¦–æ¬¡å‘ç”Ÿæ—¶ï¼Œä¸€ä¸ªç±»(åŒ…æ‹¬æ¥å£)å°†è¢«ç«‹åˆ»åˆå§‹åŒ–ã€‚ä»¥ <code>Clazz</code> ç±»ä¸ºä¾‹ï¼š</p><ul><li>æœ‰ä¸€ä¸ª <code>Clazz</code> ç±»å‹çš„å®ä¾‹è¢«åˆ›å»º</li><li><code>Clazz</code> ç±»ä¸­å£°æ˜çš„ä¸€ä¸ªé™æ€æ–¹æ³•è¢«è°ƒç”¨</li><li><code>Clazz</code> ç±»ä¸­å£°æ˜çš„ä¸€ä¸ªé™æ€æˆå‘˜è¢«èµ‹å€¼</li><li><code>Clazz</code> ç±»ä¸­çš„é™æ€æˆå‘˜è¢«ä½¿ç”¨ï¼Œå¹¶ä¸”è¿™ä¸ªæˆå‘˜ä¸æ˜¯ä¸€ä¸ªå¸¸é‡æˆå‘˜</li><li><code>Clazz</code> ç±»æ˜¯ä¸€ä¸ªé¡¶çº§ç±»ï¼Œå¹¶ä¸” <code>Clazz</code> ç±»ä¸­æœ‰åµŒå¥—çš„æ–­è¨€è¯­å¥</li></ul><p>é€šè¿‡æ”¹åŠ¨åŒé‡æ£€æŸ¥æ‡’æ±‰å¼ä¸­çº¿ç¨‹Aå’Œçº¿ç¨‹Bçš„æµç¨‹ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸‹å›¾ã€‚</p><p><img src="https://oss.zhaohaihao.com/photo/design-patterns/singleton/singleton01.png?x-oss-process=style/style01" alt=""><br>é€šè¿‡ä¸Šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æä¸‹ï¼šå½“çº¿ç¨‹Aå’Œçº¿ç¨‹Bå°è¯•è·å– <code>Class</code> å¯¹è±¡çš„åˆå§‹åŒ–é”ï¼Œå‡è®¾çº¿ç¨‹Aè·å–åˆ°äº†è¿™ä¸ªé”ï¼Œæ­¤æ—¶çº¿ç¨‹Aæ‰§è¡Œé™æ€å†…éƒ¨ç±»çš„åˆå§‹åŒ–æ“ä½œã€‚ç”±äº <code>Class</code> å¯¹è±¡åˆå§‹åŒ–é”çš„å­˜åœ¨ï¼Œçº¿ç¨‹Bæ˜¯æ— æ³•çœ‹åˆ°ç±»åˆå§‹åŒ–æ“ä½œä¸­çš„æŒ‡ä»¤é‡æ’åºçš„ã€‚</p><h2 id="é¥¿æ±‰å¼"><a href="#é¥¿æ±‰å¼" class="headerlink" title="é¥¿æ±‰å¼"></a>é¥¿æ±‰å¼</h2><p>é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼æ­£å¥½ä¸æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼ç›¸åã€‚</p><p>é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼åœ¨ç±»åŠ è½½çš„æ—¶å€™å°±å®Œæˆäº†åˆå§‹åŒ–æ“ä½œï¼Œé¿å…äº†çº¿ç¨‹åŒæ­¥çš„é—®é¢˜ã€‚æ‰€ä»¥ç±»åœ¨åŠ è½½çš„æ—¶å€™æ¯”è¾ƒç¼“æ…¢ï¼Œè€Œåœ¨è¿è¡Œæ—¶è·å–å¯¹è±¡çš„é€Ÿåº¦ç›¸å¯¹è¾ƒå¿«ã€‚ </p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å•ä¾‹æ¨¡å¼-é¥¿æ±‰å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-12 12:59</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HungrySingleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> HungrySingleton instance = <span class="keyword">new</span> HungrySingleton();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">HungrySingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HungrySingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼çš„é—®é¢˜å°±åœ¨äºç±»åœ¨åŠ è½½çš„æ—¶å€™å°±è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œæ²¡æœ‰è¾¾åˆ°æ‡’åŠ è½½çš„æ•ˆæœã€‚å¦‚æœç±»ä»å§‹è‡³ç»ˆéƒ½æœªæ›¾ä½¿ç”¨è¿‡ï¼Œé‚£ä¹ˆå°±é€ æˆäº†èµ„æºçš„æµªè´¹ã€‚ </p><p>å½“ç„¶ä¹Ÿå¯ä»¥æŠŠå¯¹è±¡å®ä¾‹åŒ–çš„è¿‡ç¨‹æ”¾å…¥åˆ°é™æ€å—å½“ä¸­ï¼Œæ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å•ä¾‹æ¨¡å¼-é¥¿æ±‰å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-12 12:59</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HungrySingleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> HungrySingleton instance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        instance = <span class="keyword">new</span> HungrySingleton();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">HungrySingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HungrySingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æšä¸¾æ¨¡å¼"><a href="#æšä¸¾æ¨¡å¼" class="headerlink" title="æšä¸¾æ¨¡å¼"></a>æšä¸¾æ¨¡å¼</h2><p>æšä¸¾æ–¹å¼æ˜¯ã€ŠEffective Javaã€‹ä½œè€…Josh Blochæ¨èçš„æ–¹å¼ã€‚</p><p>è¿™ç§æ–¹å¼ä¸ä»…èƒ½é¿å…å¤šçº¿ç¨‹åŒæ­¥çš„é—®é¢˜ï¼Œè€Œä¸”è¿˜èƒ½é˜²æ­¢åºåˆ—åŒ–å’Œåå°„ç ´åå•ä¾‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æšä¸¾å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-12 16:08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> EnumSingleton &#123;</span><br><span class="line">    INSTANCE;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ä»»ä½•å…¶ä»–æ–¹æ³•"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æšä¸¾å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-12 16:08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> EnumSingleton &#123;</span><br><span class="line">    INSTANCE &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"ä»»ä½•å…¶ä»–æ–¹æ³•"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šçš„ä¸¤ç§æ–¹å¼å‡å¯ï¼Œæ•ˆæœä¸€æ ·ã€‚</p><h2 id="å®¹å™¨å•ä¾‹"><a href="#å®¹å™¨å•ä¾‹" class="headerlink" title="å®¹å™¨å•ä¾‹"></a>å®¹å™¨å•ä¾‹</h2><p>è¿™ç§å•ä¾‹æ¨¡å¼å’Œäº«å…ƒæ¨¡å¼æœ‰ç‚¹ç±»ä¼¼ã€‚åˆ©ç”¨å®¹å™¨æ¥ç®¡ç†å¤šä¸ªå•ä¾‹å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å®¹å™¨å•ä¾‹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-12 16:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContainerSingleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">ContainerSingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">putInstance</span><span class="params">(String key, Object instance)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotBlank(key) &amp;&amp; instance != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!map.containsKey(key)) &#123;</span><br><span class="line">                map.put(key, instance);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getInstance</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.get(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼æ¯”è¾ƒé€‚åˆç¨‹åºåœ¨åˆå§‹åŒ–æœŸé—´å¤šä¸ªå•ä¾‹å­˜æ”¾è‡³å®¹å™¨è¿›è¡Œç»Ÿä¸€ç®¡ç†ï¼Œä½¿ç”¨æ—¶é€šè¿‡é”®å€¼ä»å®¹å™¨ä¸­è·å–å•ä¾‹å¯¹è±¡ã€‚</p><p>è¿™é‡Œçš„å®¹å™¨ä½¿ç”¨çš„æ˜¯ <code>HashMap</code> ï¼Œå¾ˆæ˜¾ç„¶æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚ä½†æ˜¯å¯¹ä¸Šè¿°ç”¨ä¾‹(ç¨‹åºåœ¨åˆå§‹åŒ–æœŸé—´å¤šä¸ªå•ä¾‹å­˜æ”¾è‡³å®¹å™¨è¿›è¡Œç»Ÿä¸€ç®¡ç†ï¼Œä½¿ç”¨æ—¶é€šè¿‡é”®å€¼ä»å®¹å™¨ä¸­è·å–å•ä¾‹å¯¹è±¡)è¿™æ ·ä½¿ç”¨ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p>ä¸ºäº†çº¿ç¨‹å®‰å…¨ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹ç”¨ <code>HashTable</code> ã€‚ä½†æ˜¯ <code>HashTable</code> ä¼šå½±å“æ€§èƒ½ï¼Œåœ¨é¢‘ç¹åœ°å­˜å–æ—¶éƒ½ä¼šæœ‰åŒæ­¥é”ã€‚ä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨ <code>ConcurrentHashMap</code> ã€‚</p><h2 id="ThreadLocalçº¿ç¨‹å•ä¾‹"><a href="#ThreadLocalçº¿ç¨‹å•ä¾‹" class="headerlink" title="ThreadLocalçº¿ç¨‹å•ä¾‹"></a>ThreadLocalçº¿ç¨‹å•ä¾‹</h2><p>è¿™ç§æ–¹å¼äº§ç”Ÿçš„å•ä¾‹å¹¶ä¸èƒ½ä¿è¯åœ¨æ•´ä¸ªåº”ç”¨ä¸­å…¨å±€å”¯ä¸€ï¼Œä½†æ˜¯å®ƒå¯ä»¥ä¿è¯åœ¨åŒä¸ªçº¿ç¨‹å½“ä¸­å”¯ä¸€ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ThreadLocalçº¿ç¨‹å•ä¾‹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-02-12 17:03</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadLocalSingleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;ThreadLocalSingleton&gt; THREAD_LOCAL = <span class="keyword">new</span> ThreadLocal&lt;ThreadLocalSingleton&gt;() &#123;</span><br><span class="line">        <span class="comment">// é‡å†™åˆå§‹åŒ–æ–¹æ³•</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> ThreadLocalSingleton <span class="title">initialValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ThreadLocalSingleton();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">ThreadLocalSingleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ThreadLocalSingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> THREAD_LOCAL.get();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>ThreadLocal</code> ä¼šä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›ä¸€ä¸ªç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ã€‚<code>ThreadLocal</code> æ˜¯åŸºäº <code>ThreadLocalMap</code> è¿™ä¸ªç±»æ¥å®ç°çš„ï¼Œå®ƒç»´æŒäº†çº¿ç¨‹é—´çš„éš”ç¦»ã€‚å½“è°ƒç”¨ <code>ThreadLocal</code> çš„ <code>get()</code> æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬ä¸ç”¨æŒ‡å®šé”®å€¼ï¼Œé»˜è®¤èµ°çš„å°±æ˜¯ <code>ThreadLocalMap</code> ã€‚</p><p><code>ThreadLocal</code> éš”ç¦»äº†å¤šä¸ªçº¿ç¨‹å¯¹æ•°æ®è®¿é—®çš„å†²çªã€‚åœ¨å¤šçº¿ç¨‹èµ„æºå…±äº«å½“ä¸­ï¼Œä½¿ç”¨ <code>ThreadLocal</code> çš„æ–¹å¼ï¼Œå…¶å®å°±æ˜¯ä»¥<strong>ç©ºé—´æ¢æ—¶é—´</strong>çš„æ–¹å¼ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><ul><li>åœ¨åº”ç”¨åœºæ™¯ä¸­ï¼ŒæŸç±»åªè¦æ±‚ç”Ÿæˆä¸€ä¸ªå®ä¾‹çš„æ—¶å€™ã€‚ä¾‹å¦‚ä¸€ä¸ªç­ä¸­çš„ç­é•¿ã€æ¯ä¸ªäººçš„èº«ä»½è¯å·ç­‰ã€‚</li><li>å½“å¯¹è±¡éœ€è¦è¢«å…±äº«çš„åœºåˆã€‚ç”±äºå•ä¾‹æ¨¡å¼åªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå…±äº«è¯¥å¯¹è±¡å¯ä»¥èŠ‚çœå†…å­˜ï¼Œå¹¶ä¸”åŠ å¿«å¯¹è±¡è®¿é—®é€Ÿåº¦ã€‚ä¾‹å¦‚Webä¸­çš„é…ç½®å¯¹è±¡ã€æ•°æ®åº“çš„è¿æ¥æ± ç­‰ã€‚</li><li>å½“æŸç±»éœ€è¦é¢‘ç¹è¿›è¡Œå®ä¾‹åŒ–æ“ä½œï¼Œè€Œåˆ›å»ºçš„å¯¹è±¡åˆé¢‘ç¹è¢«é”€æ¯çš„æ—¶å€™ã€‚ä¾‹å¦‚å¤šçº¿ç¨‹çš„çº¿ç¨‹æ± ã€ç½‘ç»œè¿æ¥æ± ç­‰ã€‚</li></ul><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul><li>åœ¨å†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹ï¼Œå‡å°‘äº†å†…å­˜å¼€é”€ã€‚</li><li>é¿å…å¯¹å…±äº«èµ„æºçš„å¤šé‡å ç”¨ã€‚</li><li>è®¾ç½®å…¨å±€è®¿é—®ç‚¹ï¼Œä¸¥æ ¼æ§åˆ¶è®¿é—®ã€‚</li></ul><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul><li>æ²¡æœ‰æŠ½è±¡å±‚ï¼Œæ‰©å±•å›°éš¾ã€‚</li><li>å•ä¾‹ç±»çš„èŒè´£è¿‡é‡ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè¿èƒŒäº†â€œå•ä¸€èŒè´£åŸåˆ™â€ã€‚ </li><li>ä¸é€‚ç”¨äºå˜åŒ–çš„å¯¹è±¡ï¼Œå¦‚æœåŒä¸€ç±»å‹çš„å¯¹è±¡æ€»æ˜¯è¦åœ¨ä¸åŒçš„ç”¨ä¾‹åœºæ™¯å‘ç”Ÿå˜åŒ–ï¼Œå•ä¾‹å°±ä¼šå¼•èµ·æ•°æ®çš„é”™è¯¯ï¼Œä¸èƒ½ä¿å­˜å½¼æ­¤çš„çŠ¶æ€ã€‚ </li><li>æ»¥ç”¨å•ä¾‹å°†å¸¦æ¥ä¸€äº›è´Ÿé¢é—®é¢˜ï¼Œå¦‚ä¸ºäº†èŠ‚çœèµ„æºå°†æ•°æ®åº“è¿æ¥æ± å¯¹è±¡è®¾è®¡ä¸ºçš„å•ä¾‹ç±»ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…±äº«è¿æ¥æ± å¯¹è±¡çš„ç¨‹åºè¿‡å¤šè€Œå‡ºç°è¿æ¥æ± æº¢å‡ºï¼›å¦‚æœå®ä¾‹åŒ–çš„å¯¹è±¡é•¿æ—¶é—´ä¸è¢«åˆ©ç”¨ï¼Œç³»ç»Ÿä¼šè®¤ä¸ºæ˜¯åƒåœ¾è€Œè¢«å›æ”¶ï¼Œè¿™å°†å¯¼è‡´å¯¹è±¡çŠ¶æ€çš„ä¸¢å¤±ã€‚ </li></ul><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li>ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹</li><li>ã€ŠEffective Javaã€‹</li><li><a href="https://zh.wikipedia.org/wiki/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘-å•ä¾‹æ¨¡å¼</a></li><li><a href="https://book.51cto.com/art/201511/498717.htm?pc" target="_blank" rel="noopener">ä½¿ç”¨å®¹å™¨å®ç°å•ä¾‹æ¨¡å¼</a></li><li><a href="https://www.jianshu.com/p/6521ccac486d" target="_blank" rel="noopener">å®¹å™¨å•ä¾‹å’ŒThreadLocalå•ä¾‹</a></li><li><a href="https://blog.csdn.net/wu2374633583/article/details/80880203" target="_blank" rel="noopener">å¤šçº¿ç¨‹ä¹‹ThreadLocalå•ä¾‹æ¨¡å¼</a></li><li><a href="https://blog.csdn.net/yejingtao703/article/details/78806902" target="_blank" rel="noopener">ThreadLocal-å•ä¾‹æ¨¡å¼ä¸‹é«˜å¹¶å‘çº¿ç¨‹å®‰å…¨</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emojipedia.org/backhand-index-pointing-right/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ğŸ‘‰&lt;/a&gt;&lt;a href=&quot;https://github.com/zhaohaih
      
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://www.zhaohaihao.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
</feed>
